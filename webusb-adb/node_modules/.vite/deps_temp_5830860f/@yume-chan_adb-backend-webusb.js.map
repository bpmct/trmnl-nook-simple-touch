{
  "version": 3,
  "sources": ["../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/async/src/promise-resolver.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/async/src/async-operation-manager.ts", "../../web-streams-polyfill/dist/ponyfill.mjs", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/stream-extra/src/stream.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/stream-extra/src/consumable.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/struct/src/basic/definition.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/struct/src/basic/field-value.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/struct/src/basic/options.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/struct/src/basic/struct-value.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/struct/src/sync-promise.ts", "../../@yume-chan/dataview-bigint-polyfill/src/pure.ts", "../../@yume-chan/dataview-bigint-polyfill/src/fallback.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/struct/src/types/bigint.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/struct/src/utils.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/struct/src/types/buffer/base.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/struct/src/types/buffer/fixed-length.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/struct/src/types/buffer/variable-length.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/struct/src/types/number.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/struct/src/struct.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/stream-extra/src/wrap-readable.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/stream-extra/src/duplex.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/stream-extra/src/pipe-from.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/crypto.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/packet.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/utils/base64.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/auth.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/commands/framebuffer.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/commands/reverse.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/features.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/commands/subprocess/protocols/shell.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/commands/sync/request.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/commands/sync/response.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/commands/sync/stat.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/commands/sync/list.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/commands/sync/pull.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/commands/sync/push.ts", "../../@yume-chan/adb-backend-webusb/node_modules/@yume-chan/adb/src/adb.ts", "../../@yume-chan/adb-backend-webusb/src/backend.ts", "../../@yume-chan/adb-backend-webusb/src/manager.ts", "../../@yume-chan/adb-backend-webusb/src/watcher.ts"],
  "sourcesContent": ["export type PromiseResolverState = 'running' | 'resolved' | 'rejected';\n\nexport class PromiseResolver<T> {\n    private _promise: Promise<T>;\n    public get promise(): Promise<T> { return this._promise; }\n\n    private _resolve!: (value: T | PromiseLike<T>) => void;\n    private _reject!: (reason?: any) => void;\n\n    private _state: PromiseResolverState = 'running';\n    public get state(): PromiseResolverState { return this._state; }\n\n    public constructor() {\n        this._promise = new Promise<T>((resolve, reject) => {\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n    }\n\n    public resolve = (value: T | PromiseLike<T>): void => {\n        this._resolve(value);\n        this._state = 'resolved';\n    };\n\n    public reject = (reason?: any): void => {\n        this._reject(reason);\n        this._state = 'rejected';\n    };\n}\n", "import { PromiseResolver } from \"./promise-resolver\";\n\nexport class AsyncOperationManager {\n    private nextId: number;\n\n    private pendingResolvers: Map<number, PromiseResolver<any>> = new Map();\n\n    public constructor(startId: number = 0) {\n        this.nextId = startId;\n    }\n\n    public add<T>(): [id: number, promise: Promise<T>] {\n        const id = this.nextId++;\n        const resolver = new PromiseResolver<T>();\n        this.pendingResolvers.set(id, resolver);\n        return [id, resolver.promise];\n    }\n\n    private getResolver(id: number): PromiseResolver<unknown> | null {\n        if (!this.pendingResolvers.has(id)) {\n            return null;\n        }\n\n        const resolver = this.pendingResolvers.get(id)!;\n        this.pendingResolvers.delete(id);\n        return resolver;\n    }\n\n    public resolve<T>(id: number, result: T): boolean {\n        const resolver = this.getResolver(id);\n        if (resolver !== null) {\n            resolver.resolve(result);\n            return true;\n        }\n        return false;\n    }\n\n    public reject(id: number, reason: Error): boolean {\n        const resolver = this.getResolver(id);\n        if (resolver !== null) {\n            resolver.reject(reason);\n            return true;\n        }\n        return false;\n    }\n}\n", "/**\n * @license\n * web-streams-polyfill v4.2.0\n * Copyright 2025 Mattias Buelens, Diwank Singh Tomer and other contributors.\n * This code is released under the MIT license.\n * SPDX-License-Identifier: MIT\n */\nfunction e(){}function t(e){return\"object\"==typeof e&&null!==e||\"function\"==typeof e}const r=e;function o(e,t){try{Object.defineProperty(e,\"name\",{value:t,configurable:!0})}catch(e){}}const n=Promise,a=Promise.resolve.bind(n),i=Promise.prototype.then,l=Promise.reject.bind(n),s=a;function u(e){return new n(e)}function c(e){return u(t=>t(e))}function d(e){return l(e)}function f(e,t,r){return i.call(e,t,r)}function b(e,t,o){f(f(e,t,o),void 0,r)}function h(e,t){b(e,t)}function m(e,t){b(e,void 0,t)}function _(e,t,r){return f(e,t,r)}function p(e){f(e,void 0,r)}let y=e=>{if(\"function\"==typeof queueMicrotask)y=queueMicrotask;else{const e=c(void 0);y=t=>f(e,t)}return y(e)};function S(e,t,r){if(\"function\"!=typeof e)throw new TypeError(\"Argument is not a function\");return Function.prototype.apply.call(e,t,r)}function g(e,t,r){try{return c(S(e,t,r))}catch(e){return d(e)}}class v{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const t=this._back;let r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){const e=this._front;let t=e;const r=this._cursor;let o=r+1;const n=e._elements,a=n[r];return 16384===o&&(t=e._next,o=0),--this._size,this._cursor=o,e!==t&&(this._front=t),n[r]=void 0,a}forEach(e){let t=this._cursor,r=this._front,o=r._elements;for(;!(t===o.length&&void 0===r._next||t===o.length&&(r=r._next,o=r._elements,t=0,0===o.length));)e(o[t]),++t}peek(){const e=this._front,t=this._cursor;return e._elements[t]}}const w=Symbol(\"[[AbortSteps]]\"),R=Symbol(\"[[ErrorSteps]]\"),T=Symbol(\"[[CancelSteps]]\"),C=Symbol(\"[[PullSteps]]\"),P=Symbol(\"[[ReleaseSteps]]\");function q(e,t){e._ownerReadableStream=t,t._reader=e,\"readable\"===t._state?B(e):\"closed\"===t._state?function(e){B(e),A(e)}(e):k(e,t._storedError)}function E(e,t){return Or(e._ownerReadableStream,t)}function W(e){const t=e._ownerReadableStream;\"readable\"===t._state?j(e,new TypeError(\"Reader was released and can no longer be used to monitor the stream's closedness\")):function(e,t){k(e,t)}(e,new TypeError(\"Reader was released and can no longer be used to monitor the stream's closedness\")),t._readableStreamController[P](),t._reader=void 0,e._ownerReadableStream=void 0}function O(e){return new TypeError(\"Cannot \"+e+\" a stream using a released reader\")}function B(e){e._closedPromise=u((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r})}function k(e,t){B(e),j(e,t)}function j(e,t){void 0!==e._closedPromise_reject&&(p(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function A(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const z=Number.isFinite||function(e){return\"number\"==typeof e&&isFinite(e)},D=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function L(e,t){if(void 0!==e&&(\"object\"!=typeof(r=e)&&\"function\"!=typeof r))throw new TypeError(`${t} is not an object.`);var r}function F(e,t){if(\"function\"!=typeof e)throw new TypeError(`${t} is not a function.`)}function I(e,t){if(!function(e){return\"object\"==typeof e&&null!==e||\"function\"==typeof e}(e))throw new TypeError(`${t} is not an object.`)}function $(e,t,r){if(void 0===e)throw new TypeError(`Parameter ${t} is required in '${r}'.`)}function M(e,t,r){if(void 0===e)throw new TypeError(`${t} is required in '${r}'.`)}function Y(e){return Number(e)}function x(e){return 0===e?0:e}function Q(e,t){const r=Number.MAX_SAFE_INTEGER;let o=Number(e);if(o=x(o),!z(o))throw new TypeError(`${t} is not a finite number`);if(o=function(e){return x(D(e))}(o),o<0||o>r)throw new TypeError(`${t} is outside the accepted range of 0 to ${r}, inclusive`);return z(o)&&0!==o?o:0}function N(e,t){if(!Er(e))throw new TypeError(`${t} is not a ReadableStream.`)}function H(e){return new ReadableStreamDefaultReader(e)}function V(e,t){e._reader._readRequests.push(t)}function U(e,t,r){const o=e._reader._readRequests.shift();r?o._closeSteps():o._chunkSteps(t)}function G(e){return e._reader._readRequests.length}function X(e){const t=e._reader;return void 0!==t&&!!J(t)}class ReadableStreamDefaultReader{constructor(e){if($(e,1,\"ReadableStreamDefaultReader\"),N(e,\"First parameter\"),Wr(e))throw new TypeError(\"This stream has already been locked for exclusive reading by another reader\");q(this,e),this._readRequests=new v}get closed(){return J(this)?this._closedPromise:d(ee(\"closed\"))}cancel(e=void 0){return J(this)?void 0===this._ownerReadableStream?d(O(\"cancel\")):E(this,e):d(ee(\"cancel\"))}read(){if(!J(this))return d(ee(\"read\"));if(void 0===this._ownerReadableStream)return d(O(\"read from\"));let e,t;const r=u((r,o)=>{e=r,t=o});return K(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),r}releaseLock(){if(!J(this))throw ee(\"releaseLock\");void 0!==this._ownerReadableStream&&function(e){W(e);const t=new TypeError(\"Reader was released\");Z(e,t)}(this)}}function J(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_readRequests\")&&e instanceof ReadableStreamDefaultReader)}function K(e,t){const r=e._ownerReadableStream;r._disturbed=!0,\"closed\"===r._state?t._closeSteps():\"errored\"===r._state?t._errorSteps(r._storedError):r._readableStreamController[C](t)}function Z(e,t){const r=e._readRequests;e._readRequests=new v,r.forEach(e=>{e._errorSteps(t)})}function ee(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}var te,re,oe;function ne(e){return e.slice()}function ae(e,t,r,o,n){new Uint8Array(e).set(new Uint8Array(r,o,n),t)}Object.defineProperties(ReadableStreamDefaultReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),o(ReadableStreamDefaultReader.prototype.cancel,\"cancel\"),o(ReadableStreamDefaultReader.prototype.read,\"read\"),o(ReadableStreamDefaultReader.prototype.releaseLock,\"releaseLock\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ReadableStreamDefaultReader.prototype,Symbol.toStringTag,{value:\"ReadableStreamDefaultReader\",configurable:!0});let ie=e=>(ie=\"function\"==typeof e.transfer?e=>e.transfer():\"function\"==typeof structuredClone?e=>structuredClone(e,{transfer:[e]}):e=>e,ie(e)),le=e=>(le=\"boolean\"==typeof e.detached?e=>e.detached:e=>0===e.byteLength,le(e));function se(e,t,r){if(e.slice)return e.slice(t,r);const o=r-t,n=new ArrayBuffer(o);return ae(n,0,e,t,o),n}function ue(e,t){const r=e[t];if(null!=r){if(\"function\"!=typeof r)throw new TypeError(`${String(t)} is not a function`);return r}}function ce(e){try{const t=e.done,r=e.value;return f(s(r),e=>({done:t,value:e}))}catch(e){return d(e)}}const de=null!==(oe=null!==(te=Symbol.asyncIterator)&&void 0!==te?te:null===(re=Symbol.for)||void 0===re?void 0:re.call(Symbol,\"Symbol.asyncIterator\"))&&void 0!==oe?oe:\"@@asyncIterator\";function fe(e,r=\"sync\",o){if(void 0===o)if(\"async\"===r){if(void 0===(o=ue(e,de))){return function(e){const r={next(){let t;try{t=be(e)}catch(e){return d(e)}return ce(t)},return(r){let o;try{const t=ue(e.iterator,\"return\");if(void 0===t)return c({done:!0,value:r});o=S(t,e.iterator,[r])}catch(e){return d(e)}return t(o)?ce(o):d(new TypeError(\"The iterator.return() method must return an object\"))}};return{iterator:r,nextMethod:r.next,done:!1}}(fe(e,\"sync\",ue(e,Symbol.iterator)))}}else o=ue(e,Symbol.iterator);if(void 0===o)throw new TypeError(\"The object is not iterable\");const n=S(o,e,[]);if(!t(n))throw new TypeError(\"The iterator method must return an object\");return{iterator:n,nextMethod:n.next,done:!1}}function be(e){const r=S(e.nextMethod,e.iterator,[]);if(!t(r))throw new TypeError(\"The iterator.next() method must return an object\");return r}class he{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?_(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const t=()=>this._returnSteps(e);return this._ongoingPromise=this._ongoingPromise?_(this._ongoingPromise,t,t):t(),this._ongoingPromise}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;let t,r;const o=u((e,o)=>{t=e,r=o});return K(e,{_chunkSteps:e=>{this._ongoingPromise=void 0,y(()=>t({value:e,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,W(e),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,W(e),r(t)}}),o}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const t=this._reader;if(!this._preventCancel){const r=E(t,e);return W(t),_(r,()=>({value:e,done:!0}))}return W(t),c({value:e,done:!0})}}const me={next(){return _e(this)?this._asyncIteratorImpl.next():d(pe(\"next\"))},return(e){return _e(this)?this._asyncIteratorImpl.return(e):d(pe(\"return\"))},[de](){return this}};function _e(e){if(!t(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,\"_asyncIteratorImpl\"))return!1;try{return e._asyncIteratorImpl instanceof he}catch(e){return!1}}function pe(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}Object.defineProperty(me,de,{enumerable:!1});const ye=Number.isNaN||function(e){return e!=e};function Se(e){const t=se(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function ge(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function ve(e,t,r){if(\"number\"!=typeof(o=r)||ye(o)||o<0||r===1/0)throw new RangeError(\"Size must be a finite, non-NaN, non-negative number.\");var o;e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function we(e){e._queue=new v,e._queueTotalSize=0}function Re(e){return e===DataView}class ReadableStreamBYOBRequest{constructor(){throw new TypeError(\"Illegal constructor\")}get view(){if(!Ce(this))throw Ke(\"view\");return this._view}respond(e){if(!Ce(this))throw Ke(\"respond\");if($(e,1,\"respond\"),e=Q(e,\"First parameter\"),void 0===this._associatedReadableByteStreamController)throw new TypeError(\"This BYOB request has been invalidated\");if(le(this._view.buffer))throw new TypeError(\"The BYOB request's buffer has been detached and so cannot be used as a response\");Ge(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!Ce(this))throw Ke(\"respondWithNewView\");if($(e,1,\"respondWithNewView\"),!ArrayBuffer.isView(e))throw new TypeError(\"You can only respond with array buffer views\");if(void 0===this._associatedReadableByteStreamController)throw new TypeError(\"This BYOB request has been invalidated\");if(le(e.buffer))throw new TypeError(\"The given view's buffer has been detached and so cannot be used as a response\");Xe(this._associatedReadableByteStreamController,e)}}Object.defineProperties(ReadableStreamBYOBRequest.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),o(ReadableStreamBYOBRequest.prototype.respond,\"respond\"),o(ReadableStreamBYOBRequest.prototype.respondWithNewView,\"respondWithNewView\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ReadableStreamBYOBRequest.prototype,Symbol.toStringTag,{value:\"ReadableStreamBYOBRequest\",configurable:!0});class ReadableByteStreamController{constructor(){throw new TypeError(\"Illegal constructor\")}get byobRequest(){if(!Te(this))throw Ze(\"byobRequest\");return Ve(this)}get desiredSize(){if(!Te(this))throw Ze(\"desiredSize\");return Ue(this)}close(){if(!Te(this))throw Ze(\"close\");if(this._closeRequested)throw new TypeError(\"The stream has already been closed; do not close it again!\");const e=this._controlledReadableByteStream._state;if(\"readable\"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);xe(this)}enqueue(e){if(!Te(this))throw Ze(\"enqueue\");if($(e,1,\"enqueue\"),!ArrayBuffer.isView(e))throw new TypeError(\"chunk must be an array buffer view\");if(0===e.byteLength)throw new TypeError(\"chunk must have non-zero byteLength\");if(0===e.buffer.byteLength)throw new TypeError(\"chunk's buffer must have non-zero byteLength\");if(this._closeRequested)throw new TypeError(\"stream is closed or draining\");const t=this._controlledReadableByteStream._state;if(\"readable\"!==t)throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);Qe(this,e)}error(e=void 0){if(!Te(this))throw Ze(\"error\");Ne(this,e)}[T](e){qe(this),we(this);const t=this._cancelAlgorithm(e);return Ye(this),t}[C](e){const t=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void He(this,e);const r=this._autoAllocateChunkSize;if(void 0!==r){let t;try{t=new ArrayBuffer(r)}catch(t){return void e._errorSteps(t)}const o={buffer:t,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:\"default\"};this._pendingPullIntos.push(o)}V(t,e),Pe(this)}[P](){if(this._pendingPullIntos.length>0){const e=this._pendingPullIntos.peek();e.readerType=\"none\",this._pendingPullIntos=new v,this._pendingPullIntos.push(e)}}}function Te(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_controlledReadableByteStream\")&&e instanceof ReadableByteStreamController)}function Ce(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_associatedReadableByteStreamController\")&&e instanceof ReadableStreamBYOBRequest)}function Pe(e){const t=function(e){const t=e._controlledReadableByteStream;if(\"readable\"!==t._state)return!1;if(e._closeRequested)return!1;if(!e._started)return!1;if(X(t)&&G(t)>0)return!0;if(nt(t)&&ot(t)>0)return!0;const r=Ue(e);if(r>0)return!0;return!1}(e);if(!t)return;if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0;b(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Pe(e)),null),t=>(Ne(e,t),null))}function qe(e){Le(e),e._pendingPullIntos=new v}function Ee(e,t){let r=!1;\"closed\"===e._state&&(r=!0);const o=Oe(t);\"default\"===t.readerType?U(e,o,r):function(e,t,r){const o=e._reader,n=o._readIntoRequests.shift();r?n._closeSteps(t):n._chunkSteps(t)}(e,o,r)}function We(e,t){for(let r=0;r<t.length;++r)Ee(e,t[r])}function Oe(e){const t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function Be(e,t,r,o){e._queue.push({buffer:t,byteOffset:r,byteLength:o}),e._queueTotalSize+=o}function ke(e,t,r,o){let n;try{n=se(t,r,r+o)}catch(t){throw Ne(e,t),t}Be(e,n,0,o)}function je(e,t){t.bytesFilled>0&&ke(e,t.buffer,t.byteOffset,t.bytesFilled),Me(e)}function Ae(e,t){const r=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),o=t.bytesFilled+r;let n=r,a=!1;const i=o-o%t.elementSize;i>=t.minimumFill&&(n=i-t.bytesFilled,a=!0);const l=e._queue;for(;n>0;){const r=l.peek(),o=Math.min(n,r.byteLength),a=t.byteOffset+t.bytesFilled;ae(t.buffer,a,r.buffer,r.byteOffset,o),r.byteLength===o?l.shift():(r.byteOffset+=o,r.byteLength-=o),e._queueTotalSize-=o,ze(e,o,t),n-=o}return a}function ze(e,t,r){r.bytesFilled+=t}function De(e){0===e._queueTotalSize&&e._closeRequested?(Ye(e),Br(e._controlledReadableByteStream)):Pe(e)}function Le(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Fe(e){const t=[];for(;e._pendingPullIntos.length>0&&0!==e._queueTotalSize;){const r=e._pendingPullIntos.peek();Ae(e,r)&&(Me(e),t.push(r))}return t}function Ie(e,t,r,o){const n=e._controlledReadableByteStream,a=t.constructor,i=function(e){return Re(e)?1:e.BYTES_PER_ELEMENT}(a),{byteOffset:l,byteLength:s}=t,u=r*i;let c;try{c=ie(t.buffer)}catch(e){return void o._errorSteps(e)}const d={buffer:c,bufferByteLength:c.byteLength,byteOffset:l,byteLength:s,bytesFilled:0,minimumFill:u,elementSize:i,viewConstructor:a,readerType:\"byob\"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(d),void rt(n,o);if(\"closed\"===n._state){const e=new a(d.buffer,d.byteOffset,0);return void o._closeSteps(e)}if(e._queueTotalSize>0){if(Ae(e,d)){const t=Oe(d);return De(e),void o._chunkSteps(t)}if(e._closeRequested){const t=new TypeError(\"Insufficient bytes to fill elements in the given buffer\");return Ne(e,t),void o._errorSteps(t)}}e._pendingPullIntos.push(d),rt(n,o),Pe(e)}function $e(e,t){const r=e._pendingPullIntos.peek();Le(e);\"closed\"===e._controlledReadableByteStream._state?function(e,t){\"none\"===t.readerType&&Me(e);const r=e._controlledReadableByteStream;if(nt(r)){const t=[];for(;t.length<ot(r);)t.push(Me(e));We(r,t)}}(e,r):function(e,t,r){if(ze(0,t,r),\"none\"===r.readerType){je(e,r);const t=Fe(e);return void We(e._controlledReadableByteStream,t)}if(r.bytesFilled<r.minimumFill)return;Me(e);const o=r.bytesFilled%r.elementSize;if(o>0){const t=r.byteOffset+r.bytesFilled;ke(e,r.buffer,t-o,o)}r.bytesFilled-=o;const n=Fe(e);Ee(e._controlledReadableByteStream,r),We(e._controlledReadableByteStream,n)}(e,t,r),Pe(e)}function Me(e){return e._pendingPullIntos.shift()}function Ye(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function xe(e){const t=e._controlledReadableByteStream;if(!e._closeRequested&&\"readable\"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();if(t.bytesFilled%t.elementSize!==0){const t=new TypeError(\"Insufficient bytes to fill elements in the given buffer\");throw Ne(e,t),t}}Ye(e),Br(t)}}function Qe(e,t){const r=e._controlledReadableByteStream;if(e._closeRequested||\"readable\"!==r._state)return;const{buffer:o,byteOffset:n,byteLength:a}=t;if(le(o))throw new TypeError(\"chunk's buffer is detached and so cannot be enqueued\");const i=ie(o);if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();if(le(t.buffer))throw new TypeError(\"The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk\");Le(e),t.buffer=ie(t.buffer),\"none\"===t.readerType&&je(e,t)}if(X(r))if(function(e){const t=e._controlledReadableByteStream._reader;for(;t._readRequests.length>0;){if(0===e._queueTotalSize)return;He(e,t._readRequests.shift())}}(e),0===G(r))Be(e,i,n,a);else{e._pendingPullIntos.length>0&&Me(e);U(r,new Uint8Array(i,n,a),!1)}else if(nt(r)){Be(e,i,n,a);We(r,Fe(e))}else Be(e,i,n,a);Pe(e)}function Ne(e,t){const r=e._controlledReadableByteStream;\"readable\"===r._state&&(qe(e),we(e),Ye(e),kr(r,t))}function He(e,t){const r=e._queue.shift();e._queueTotalSize-=r.byteLength,De(e);const o=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t._chunkSteps(o)}function Ve(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),o=Object.create(ReadableStreamBYOBRequest.prototype);!function(e,t,r){e._associatedReadableByteStreamController=t,e._view=r}(o,e,r),e._byobRequest=o}return e._byobRequest}function Ue(e){const t=e._controlledReadableByteStream._state;return\"errored\"===t?null:\"closed\"===t?0:e._strategyHWM-e._queueTotalSize}function Ge(e,t){const r=e._pendingPullIntos.peek();if(\"closed\"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError(\"bytesWritten must be 0 when calling respond() on a closed stream\")}else{if(0===t)throw new TypeError(\"bytesWritten must be greater than 0 when calling respond() on a readable stream\");if(r.bytesFilled+t>r.byteLength)throw new RangeError(\"bytesWritten out of range\")}r.buffer=ie(r.buffer),$e(e,t)}function Xe(e,t){const r=e._pendingPullIntos.peek();if(\"closed\"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError(\"The view's length must be 0 when calling respondWithNewView() on a closed stream\")}else if(0===t.byteLength)throw new TypeError(\"The view's length must be greater than 0 when calling respondWithNewView() on a readable stream\");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError(\"The region specified by view does not match byobRequest\");if(r.bufferByteLength!==t.buffer.byteLength)throw new RangeError(\"The buffer of view has different capacity than byobRequest\");if(r.bytesFilled+t.byteLength>r.byteLength)throw new RangeError(\"The region specified by view is larger than byobRequest\");const o=t.byteLength;r.buffer=ie(t.buffer),$e(e,o)}function Je(e,t,r,o,n,a,i){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,we(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=a,t._pullAlgorithm=o,t._cancelAlgorithm=n,t._autoAllocateChunkSize=i,t._pendingPullIntos=new v,e._readableStreamController=t;b(c(r()),()=>(t._started=!0,Pe(t),null),e=>(Ne(t,e),null))}function Ke(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ze(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function et(e,t){if(\"byob\"!==(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function tt(e){return new ReadableStreamBYOBReader(e)}function rt(e,t){e._reader._readIntoRequests.push(t)}function ot(e){return e._reader._readIntoRequests.length}function nt(e){const t=e._reader;return void 0!==t&&!!at(t)}Object.defineProperties(ReadableByteStreamController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),o(ReadableByteStreamController.prototype.close,\"close\"),o(ReadableByteStreamController.prototype.enqueue,\"enqueue\"),o(ReadableByteStreamController.prototype.error,\"error\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ReadableByteStreamController.prototype,Symbol.toStringTag,{value:\"ReadableByteStreamController\",configurable:!0});class ReadableStreamBYOBReader{constructor(e){if($(e,1,\"ReadableStreamBYOBReader\"),N(e,\"First parameter\"),Wr(e))throw new TypeError(\"This stream has already been locked for exclusive reading by another reader\");if(!Te(e._readableStreamController))throw new TypeError(\"Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source\");q(this,e),this._readIntoRequests=new v}get closed(){return at(this)?this._closedPromise:d(st(\"closed\"))}cancel(e=void 0){return at(this)?void 0===this._ownerReadableStream?d(O(\"cancel\")):E(this,e):d(st(\"cancel\"))}read(e,t={}){if(!at(this))return d(st(\"read\"));if(!ArrayBuffer.isView(e))return d(new TypeError(\"view must be an array buffer view\"));if(0===e.byteLength)return d(new TypeError(\"view must have non-zero byteLength\"));if(0===e.buffer.byteLength)return d(new TypeError(\"view's buffer must have non-zero byteLength\"));if(le(e.buffer))return d(new TypeError(\"view's buffer has been detached\"));let r;try{r=function(e,t){var r;return L(e,t),{min:Q(null!==(r=null==e?void 0:e.min)&&void 0!==r?r:1,`${t} has member 'min' that`)}}(t,\"options\")}catch(e){return d(e)}const o=r.min;if(0===o)return d(new TypeError(\"options.min must be greater than 0\"));if(function(e){return Re(e.constructor)}(e)){if(o>e.byteLength)return d(new RangeError(\"options.min must be less than or equal to view's byteLength\"))}else if(o>e.length)return d(new RangeError(\"options.min must be less than or equal to view's length\"));if(void 0===this._ownerReadableStream)return d(O(\"read from\"));let n,a;const i=u((e,t)=>{n=e,a=t});return it(this,e,o,{_chunkSteps:e=>n({value:e,done:!1}),_closeSteps:e=>n({value:e,done:!0}),_errorSteps:e=>a(e)}),i}releaseLock(){if(!at(this))throw st(\"releaseLock\");void 0!==this._ownerReadableStream&&function(e){W(e);const t=new TypeError(\"Reader was released\");lt(e,t)}(this)}}function at(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_readIntoRequests\")&&e instanceof ReadableStreamBYOBReader)}function it(e,t,r,o){const n=e._ownerReadableStream;n._disturbed=!0,\"errored\"===n._state?o._errorSteps(n._storedError):Ie(n._readableStreamController,t,r,o)}function lt(e,t){const r=e._readIntoRequests;e._readIntoRequests=new v,r.forEach(e=>{e._errorSteps(t)})}function st(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function ut(e,t){const{highWaterMark:r}=e;if(void 0===r)return t;if(ye(r)||r<0)throw new RangeError(\"Invalid highWaterMark\");return r}function ct(e){const{size:t}=e;return t||(()=>1)}function dt(e,t){L(e,t);const r=null==e?void 0:e.highWaterMark,o=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:Y(r),size:void 0===o?void 0:ft(o,`${t} has member 'size' that`)}}function ft(e,t){return F(e,t),t=>Y(e(t))}function bt(e,t,r){return F(e,r),r=>g(e,t,[r])}function ht(e,t,r){return F(e,r),()=>g(e,t,[])}function mt(e,t,r){return F(e,r),r=>S(e,t,[r])}function _t(e,t,r){return F(e,r),(r,o)=>g(e,t,[r,o])}function pt(e,t){if(!gt(e))throw new TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(ReadableStreamBYOBReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),o(ReadableStreamBYOBReader.prototype.cancel,\"cancel\"),o(ReadableStreamBYOBReader.prototype.read,\"read\"),o(ReadableStreamBYOBReader.prototype.releaseLock,\"releaseLock\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ReadableStreamBYOBReader.prototype,Symbol.toStringTag,{value:\"ReadableStreamBYOBReader\",configurable:!0});class WritableStream{constructor(e={},t={}){void 0===e?e=null:I(e,\"First parameter\");const r=dt(t,\"Second parameter\"),o=function(e,t){L(e,t);const r=null==e?void 0:e.abort,o=null==e?void 0:e.close,n=null==e?void 0:e.start,a=null==e?void 0:e.type,i=null==e?void 0:e.write;return{abort:void 0===r?void 0:bt(r,e,`${t} has member 'abort' that`),close:void 0===o?void 0:ht(o,e,`${t} has member 'close' that`),start:void 0===n?void 0:mt(n,e,`${t} has member 'start' that`),write:void 0===i?void 0:_t(i,e,`${t} has member 'write' that`),type:a}}(e,\"First parameter\");St(this);if(void 0!==o.type)throw new RangeError(\"Invalid type is specified\");const n=ct(r);!function(e,t,r,o){const n=Object.create(WritableStreamDefaultController.prototype);let a,i,l,s;a=void 0!==t.start?()=>t.start(n):()=>{};i=void 0!==t.write?e=>t.write(e,n):()=>c(void 0);l=void 0!==t.close?()=>t.close():()=>c(void 0);s=void 0!==t.abort?e=>t.abort(e):()=>c(void 0);Ft(e,n,a,i,l,s,r,o)}(this,o,ut(r,1),n)}get locked(){if(!gt(this))throw Nt(\"locked\");return vt(this)}abort(e=void 0){return gt(this)?vt(this)?d(new TypeError(\"Cannot abort a stream that already has a writer\")):wt(this,e):d(Nt(\"abort\"))}close(){return gt(this)?vt(this)?d(new TypeError(\"Cannot close a stream that already has a writer\")):qt(this)?d(new TypeError(\"Cannot close an already-closing stream\")):Rt(this):d(Nt(\"close\"))}getWriter(){if(!gt(this))throw Nt(\"getWriter\");return yt(this)}}function yt(e){return new WritableStreamDefaultWriter(e)}function St(e){e._state=\"writable\",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new v,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function gt(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_writableStreamController\")&&e instanceof WritableStream)}function vt(e){return void 0!==e._writer}function wt(e,t){var r;if(\"closed\"===e._state||\"errored\"===e._state)return c(void 0);e._writableStreamController._abortReason=t,null===(r=e._writableStreamController._abortController)||void 0===r||r.abort(t);const o=e._state;if(\"closed\"===o||\"errored\"===o)return c(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let n=!1;\"erroring\"===o&&(n=!0,t=void 0);const a=u((r,o)=>{e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:o,_reason:t,_wasAlreadyErroring:n}});return e._pendingAbortRequest._promise=a,n||Ct(e,t),a}function Rt(e){const t=e._state;if(\"closed\"===t||\"errored\"===t)return d(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const r=u((t,r)=>{const o={_resolve:t,_reject:r};e._closeRequest=o}),o=e._writer;var n;return void 0!==o&&e._backpressure&&\"writable\"===t&&or(o),ve(n=e._writableStreamController,Dt,0),Mt(n),r}function Tt(e,t){\"writable\"!==e._state?Pt(e):Ct(e,t)}function Ct(e,t){const r=e._writableStreamController;e._state=\"erroring\",e._storedError=t;const o=e._writer;void 0!==o&&jt(o,t),!function(e){if(void 0===e._inFlightWriteRequest&&void 0===e._inFlightCloseRequest)return!1;return!0}(e)&&r._started&&Pt(e)}function Pt(e){e._state=\"errored\",e._writableStreamController[R]();const t=e._storedError;if(e._writeRequests.forEach(e=>{e._reject(t)}),e._writeRequests=new v,void 0===e._pendingAbortRequest)return void Et(e);const r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void Et(e);b(e._writableStreamController[w](r._reason),()=>(r._resolve(),Et(e),null),t=>(r._reject(t),Et(e),null))}function qt(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function Et(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;void 0!==t&&Jt(t,e._storedError)}function Wt(e,t){const r=e._writer;void 0!==r&&t!==e._backpressure&&(t?function(e){Zt(e)}(r):or(r)),e._backpressure=t}Object.defineProperties(WritableStream.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),o(WritableStream.prototype.abort,\"abort\"),o(WritableStream.prototype.close,\"close\"),o(WritableStream.prototype.getWriter,\"getWriter\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(WritableStream.prototype,Symbol.toStringTag,{value:\"WritableStream\",configurable:!0});class WritableStreamDefaultWriter{constructor(e){if($(e,1,\"WritableStreamDefaultWriter\"),pt(e,\"First parameter\"),vt(e))throw new TypeError(\"This stream has already been locked for exclusive writing by another writer\");this._ownerWritableStream=e,e._writer=this;const t=e._state;if(\"writable\"===t)!qt(e)&&e._backpressure?Zt(this):tr(this),Gt(this);else if(\"erroring\"===t)er(this,e._storedError),Gt(this);else if(\"closed\"===t)tr(this),Gt(r=this),Kt(r);else{const t=e._storedError;er(this,t),Xt(this,t)}var r}get closed(){return Ot(this)?this._closedPromise:d(Vt(\"closed\"))}get desiredSize(){if(!Ot(this))throw Vt(\"desiredSize\");if(void 0===this._ownerWritableStream)throw Ut(\"desiredSize\");return function(e){const t=e._ownerWritableStream,r=t._state;if(\"errored\"===r||\"erroring\"===r)return null;if(\"closed\"===r)return 0;return $t(t._writableStreamController)}(this)}get ready(){return Ot(this)?this._readyPromise:d(Vt(\"ready\"))}abort(e=void 0){return Ot(this)?void 0===this._ownerWritableStream?d(Ut(\"abort\")):function(e,t){return wt(e._ownerWritableStream,t)}(this,e):d(Vt(\"abort\"))}close(){if(!Ot(this))return d(Vt(\"close\"));const e=this._ownerWritableStream;return void 0===e?d(Ut(\"close\")):qt(e)?d(new TypeError(\"Cannot close an already-closing stream\")):Bt(this)}releaseLock(){if(!Ot(this))throw Vt(\"releaseLock\");void 0!==this._ownerWritableStream&&At(this)}write(e=void 0){return Ot(this)?void 0===this._ownerWritableStream?d(Ut(\"write to\")):zt(this,e):d(Vt(\"write\"))}}function Ot(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_ownerWritableStream\")&&e instanceof WritableStreamDefaultWriter)}function Bt(e){return Rt(e._ownerWritableStream)}function kt(e,t){\"pending\"===e._closedPromiseState?Jt(e,t):function(e,t){Xt(e,t)}(e,t)}function jt(e,t){\"pending\"===e._readyPromiseState?rr(e,t):function(e,t){er(e,t)}(e,t)}function At(e){const t=e._ownerWritableStream,r=new TypeError(\"Writer was released and can no longer be used to monitor the stream's closedness\");jt(e,r),kt(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function zt(e,t){const r=e._ownerWritableStream,o=r._writableStreamController,n=function(e,t){if(void 0===e._strategySizeAlgorithm)return 1;try{return e._strategySizeAlgorithm(t)}catch(t){return Yt(e,t),1}}(o,t);if(r!==e._ownerWritableStream)return d(Ut(\"write to\"));const a=r._state;if(\"errored\"===a)return d(r._storedError);if(qt(r)||\"closed\"===a)return d(new TypeError(\"The stream is closing or closed and cannot be written to\"));if(\"erroring\"===a)return d(r._storedError);const i=function(e){return u((t,r)=>{const o={_resolve:t,_reject:r};e._writeRequests.push(o)})}(r);return function(e,t,r){try{ve(e,t,r)}catch(t){return void Yt(e,t)}const o=e._controlledWritableStream;if(!qt(o)&&\"writable\"===o._state){Wt(o,xt(e))}Mt(e)}(o,t,n),i}Object.defineProperties(WritableStreamDefaultWriter.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),o(WritableStreamDefaultWriter.prototype.abort,\"abort\"),o(WritableStreamDefaultWriter.prototype.close,\"close\"),o(WritableStreamDefaultWriter.prototype.releaseLock,\"releaseLock\"),o(WritableStreamDefaultWriter.prototype.write,\"write\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(WritableStreamDefaultWriter.prototype,Symbol.toStringTag,{value:\"WritableStreamDefaultWriter\",configurable:!0});const Dt={};class WritableStreamDefaultController{constructor(){throw new TypeError(\"Illegal constructor\")}get abortReason(){if(!Lt(this))throw Ht(\"abortReason\");return this._abortReason}get signal(){if(!Lt(this))throw Ht(\"signal\");if(void 0===this._abortController)throw new TypeError(\"WritableStreamDefaultController.prototype.signal is not supported\");return this._abortController.signal}error(e=void 0){if(!Lt(this))throw Ht(\"error\");\"writable\"===this._controlledWritableStream._state&&Qt(this,e)}[w](e){const t=this._abortAlgorithm(e);return It(this),t}[R](){we(this)}}function Lt(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_controlledWritableStream\")&&e instanceof WritableStreamDefaultController)}function Ft(e,t,r,o,n,a,i,l){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,we(t),t._abortReason=void 0,t._abortController=function(){if(\"function\"==typeof AbortController)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=l,t._strategyHWM=i,t._writeAlgorithm=o,t._closeAlgorithm=n,t._abortAlgorithm=a;const s=xt(t);Wt(e,s);b(c(r()),()=>(t._started=!0,Mt(t),null),r=>(t._started=!0,Tt(e,r),null))}function It(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function $t(e){return e._strategyHWM-e._queueTotalSize}function Mt(e){const t=e._controlledWritableStream;if(!e._started)return;if(void 0!==t._inFlightWriteRequest)return;if(\"erroring\"===t._state)return void Pt(t);if(0===e._queue.length)return;const r=e._queue.peek().value;r===Dt?function(e){const t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),ge(e);const r=e._closeAlgorithm();It(e),b(r,()=>(function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,\"erroring\"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state=\"closed\";const t=e._writer;void 0!==t&&Kt(t)}(t),null),e=>(function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),Tt(e,t)}(t,e),null))}(e):function(e,t){const r=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(r);const o=e._writeAlgorithm(t);b(o,()=>{!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(r);const t=r._state;if(ge(e),!qt(r)&&\"writable\"===t){const t=xt(e);Wt(r,t)}return Mt(e),null},t=>(\"writable\"===r._state&&It(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,Tt(e,t)}(r,t),null))}(e,r)}function Yt(e,t){\"writable\"===e._controlledWritableStream._state&&Qt(e,t)}function xt(e){return $t(e)<=0}function Qt(e,t){const r=e._controlledWritableStream;It(e),Ct(r,t)}function Nt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Ht(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Vt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Ut(e){return new TypeError(\"Cannot \"+e+\" a stream using a released writer\")}function Gt(e){e._closedPromise=u((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState=\"pending\"})}function Xt(e,t){Gt(e),Jt(e,t)}function Jt(e,t){void 0!==e._closedPromise_reject&&(p(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState=\"rejected\")}function Kt(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState=\"resolved\")}function Zt(e){e._readyPromise=u((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r}),e._readyPromiseState=\"pending\"}function er(e,t){Zt(e),rr(e,t)}function tr(e){Zt(e),or(e)}function rr(e,t){void 0!==e._readyPromise_reject&&(p(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState=\"rejected\")}function or(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState=\"fulfilled\")}Object.defineProperties(WritableStreamDefaultController.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(WritableStreamDefaultController.prototype,Symbol.toStringTag,{value:\"WritableStreamDefaultController\",configurable:!0});const nr=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof self?self:\"undefined\"!=typeof global?global:void 0;const ar=function(){const e=null==nr?void 0:nr.DOMException;return function(e){if(\"function\"!=typeof e&&\"object\"!=typeof e)return!1;if(\"DOMException\"!==e.name)return!1;try{return new e,!0}catch(e){return!1}}(e)?e:void 0}()||function(){const e=function(e,t){this.message=e||\"\",this.name=t||\"Error\",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return o(e,\"DOMException\"),e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,\"constructor\",{value:e,writable:!0,configurable:!0}),e}();function ir(t,r,o,n,a,i){const l=H(t),s=yt(r);t._disturbed=!0;let _=!1,y=c(void 0);return u((S,g)=>{let v;if(void 0!==i){if(v=()=>{const e=void 0!==i.reason?i.reason:new ar(\"Aborted\",\"AbortError\"),o=[];n||o.push(()=>\"writable\"===r._state?wt(r,e):c(void 0)),a||o.push(()=>\"readable\"===t._state?Or(t,e):c(void 0)),q(()=>Promise.all(o.map(e=>e())),!0,e)},i.aborted)return void v();i.addEventListener(\"abort\",v)}var w,R,T;if(P(t,l._closedPromise,e=>(n?E(!0,e):q(()=>wt(r,e),!0,e),null)),P(r,s._closedPromise,e=>(a?E(!0,e):q(()=>Or(t,e),!0,e),null)),w=t,R=l._closedPromise,T=()=>(o?E():q(()=>function(e){const t=e._ownerWritableStream,r=t._state;return qt(t)||\"closed\"===r?c(void 0):\"errored\"===r?d(t._storedError):Bt(e)}(s)),null),\"closed\"===w._state?T():h(R,T),qt(r)||\"closed\"===r._state){const e=new TypeError(\"the destination writable stream closed before all data could be piped to it\");a?E(!0,e):q(()=>Or(t,e),!0,e)}function C(){const e=y;return f(y,()=>e!==y?C():void 0)}function P(e,t,r){\"errored\"===e._state?r(e._storedError):m(t,r)}function q(e,t,o){function n(){return b(e(),()=>O(t,o),e=>O(!0,e)),null}_||(_=!0,\"writable\"!==r._state||qt(r)?n():h(C(),n))}function E(e,t){_||(_=!0,\"writable\"!==r._state||qt(r)?O(e,t):h(C(),()=>O(e,t)))}function O(e,t){return At(s),W(l),void 0!==i&&i.removeEventListener(\"abort\",v),e?g(t):S(void 0),null}p(u((t,r)=>{!function o(n){n?t():f(_?c(!0):f(s._readyPromise,()=>u((t,r)=>{K(l,{_chunkSteps:r=>{y=f(zt(s,r),void 0,e),t(!1)},_closeSteps:()=>t(!0),_errorSteps:r})})),o,r)}(!1)}))})}class ReadableStreamDefaultController{constructor(){throw new TypeError(\"Illegal constructor\")}get desiredSize(){if(!lr(this))throw pr(\"desiredSize\");return hr(this)}close(){if(!lr(this))throw pr(\"close\");if(!mr(this))throw new TypeError(\"The stream is not in a state that permits close\");dr(this)}enqueue(e=void 0){if(!lr(this))throw pr(\"enqueue\");if(!mr(this))throw new TypeError(\"The stream is not in a state that permits enqueue\");return fr(this,e)}error(e=void 0){if(!lr(this))throw pr(\"error\");br(this,e)}[T](e){we(this);const t=this._cancelAlgorithm(e);return cr(this),t}[C](e){const t=this._controlledReadableStream;if(this._queue.length>0){const r=ge(this);this._closeRequested&&0===this._queue.length?(cr(this),Br(t)):sr(this),e._chunkSteps(r)}else V(t,e),sr(this)}[P](){}}function lr(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_controlledReadableStream\")&&e instanceof ReadableStreamDefaultController)}function sr(e){if(!ur(e))return;if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0;b(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,sr(e)),null),t=>(br(e,t),null))}function ur(e){const t=e._controlledReadableStream;if(!mr(e))return!1;if(!e._started)return!1;if(Wr(t)&&G(t)>0)return!0;return hr(e)>0}function cr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function dr(e){if(!mr(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(cr(e),Br(t))}function fr(e,t){if(!mr(e))return;const r=e._controlledReadableStream;if(Wr(r)&&G(r)>0)U(r,t,!1);else{let r;try{r=e._strategySizeAlgorithm(t)}catch(t){throw br(e,t),t}try{ve(e,t,r)}catch(t){throw br(e,t),t}}sr(e)}function br(e,t){const r=e._controlledReadableStream;\"readable\"===r._state&&(we(e),cr(e),kr(r,t))}function hr(e){const t=e._controlledReadableStream._state;return\"errored\"===t?null:\"closed\"===t?0:e._strategyHWM-e._queueTotalSize}function mr(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&\"readable\"===t}function _r(e,t,r,o,n,a,i){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,we(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=i,t._strategyHWM=a,t._pullAlgorithm=o,t._cancelAlgorithm=n,e._readableStreamController=t;b(c(r()),()=>(t._started=!0,sr(t),null),e=>(br(t,e),null))}function pr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function yr(e,t){return Te(e._readableStreamController)?function(e){let t,r,o,n,a,i=H(e),l=!1,s=!1,d=!1,f=!1,b=!1;const h=u(e=>{a=e});function _(e){m(e._closedPromise,t=>(e!==i||(Ne(o._readableStreamController,t),Ne(n._readableStreamController,t),f&&b||a(void 0)),null))}function p(){at(i)&&(W(i),i=H(e),_(i));K(i,{_chunkSteps:t=>{y(()=>{s=!1,d=!1;const r=t;let i=t;if(!f&&!b)try{i=Se(t)}catch(t){return Ne(o._readableStreamController,t),Ne(n._readableStreamController,t),void a(Or(e,t))}f||Qe(o._readableStreamController,r),b||Qe(n._readableStreamController,i),l=!1,s?g():d&&v()})},_closeSteps:()=>{l=!1,f||xe(o._readableStreamController),b||xe(n._readableStreamController),o._readableStreamController._pendingPullIntos.length>0&&Ge(o._readableStreamController,0),n._readableStreamController._pendingPullIntos.length>0&&Ge(n._readableStreamController,0),f&&b||a(void 0)},_errorSteps:()=>{l=!1}})}function S(t,r){J(i)&&(W(i),i=tt(e),_(i));const u=r?n:o,c=r?o:n;it(i,t,1,{_chunkSteps:t=>{y(()=>{s=!1,d=!1;const o=r?b:f;if(r?f:b)o||Xe(u._readableStreamController,t);else{let r;try{r=Se(t)}catch(t){return Ne(u._readableStreamController,t),Ne(c._readableStreamController,t),void a(Or(e,t))}o||Xe(u._readableStreamController,t),Qe(c._readableStreamController,r)}l=!1,s?g():d&&v()})},_closeSteps:e=>{l=!1;const t=r?b:f,o=r?f:b;t||xe(u._readableStreamController),o||xe(c._readableStreamController),void 0!==e&&(t||Xe(u._readableStreamController,e),!o&&c._readableStreamController._pendingPullIntos.length>0&&Ge(c._readableStreamController,0)),t&&o||a(void 0)},_errorSteps:()=>{l=!1}})}function g(){if(l)return s=!0,c(void 0);l=!0;const e=Ve(o._readableStreamController);return null===e?p():S(e._view,!1),c(void 0)}function v(){if(l)return d=!0,c(void 0);l=!0;const e=Ve(n._readableStreamController);return null===e?p():S(e._view,!0),c(void 0)}function w(o){if(f=!0,t=o,b){const o=ne([t,r]),n=Or(e,o);a(n)}return h}function R(o){if(b=!0,r=o,f){const o=ne([t,r]),n=Or(e,o);a(n)}return h}function T(){}return o=Pr(T,g,w),n=Pr(T,v,R),_(i),[o,n]}(e):function(e){const t=H(e);let r,o,n,a,i,l=!1,s=!1,d=!1,f=!1;const b=u(e=>{i=e});function h(){if(l)return s=!0,c(void 0);l=!0;return K(t,{_chunkSteps:e=>{y(()=>{s=!1;const t=e,r=e;d||fr(n._readableStreamController,t),f||fr(a._readableStreamController,r),l=!1,s&&h()})},_closeSteps:()=>{l=!1,d||dr(n._readableStreamController),f||dr(a._readableStreamController),d&&f||i(void 0)},_errorSteps:()=>{l=!1}}),c(void 0)}function _(t){if(d=!0,r=t,f){const t=ne([r,o]),n=Or(e,t);i(n)}return b}function p(t){if(f=!0,o=t,d){const t=ne([r,o]),n=Or(e,t);i(n)}return b}function S(){}return n=Cr(S,h,_),a=Cr(S,h,p),m(t._closedPromise,e=>(br(n._readableStreamController,e),br(a._readableStreamController,e),d&&f||i(void 0),null)),[n,a]}(e)}function Sr(r){return t(o=r)&&void 0!==o.getReader?function(r){let o;function n(){let e;try{e=r.read()}catch(e){return d(e)}return _(e,e=>{if(!t(e))throw new TypeError(\"The promise returned by the reader.read() method must fulfill with an object\");if(e.done)dr(o._readableStreamController);else{const t=e.value;fr(o._readableStreamController,t)}})}function a(e){try{return c(r.cancel(e))}catch(e){return d(e)}}return o=Cr(e,n,a,0),o}(r.getReader()):function(r){let o;const n=fe(r,\"async\");function a(){let e;try{e=be(n)}catch(e){return d(e)}return _(c(e),e=>{if(!t(e))throw new TypeError(\"The promise returned by the iterator.next() method must fulfill with an object\");if(e.done)dr(o._readableStreamController);else{const t=e.value;fr(o._readableStreamController,t)}})}function i(e){const r=n.iterator;let o;try{o=ue(r,\"return\")}catch(e){return d(e)}if(void 0===o)return c(void 0);return _(g(o,r,[e]),e=>{if(!t(e))throw new TypeError(\"The promise returned by the iterator.return() method must fulfill with an object\")})}return o=Cr(e,a,i,0),o}(r);var o}function gr(e,t,r){return F(e,r),r=>g(e,t,[r])}function vr(e,t,r){return F(e,r),r=>g(e,t,[r])}function wr(e,t,r){return F(e,r),r=>S(e,t,[r])}function Rr(e,t){if(\"bytes\"!==(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Tr(e,t){L(e,t);const r=null==e?void 0:e.preventAbort,o=null==e?void 0:e.preventCancel,n=null==e?void 0:e.preventClose,a=null==e?void 0:e.signal;return void 0!==a&&function(e,t){if(!function(e){if(\"object\"!=typeof e||null===e)return!1;try{return\"boolean\"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(`${t} is not an AbortSignal.`)}(a,`${t} has member 'signal' that`),{preventAbort:Boolean(r),preventCancel:Boolean(o),preventClose:Boolean(n),signal:a}}Object.defineProperties(ReadableStreamDefaultController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),o(ReadableStreamDefaultController.prototype.close,\"close\"),o(ReadableStreamDefaultController.prototype.enqueue,\"enqueue\"),o(ReadableStreamDefaultController.prototype.error,\"error\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ReadableStreamDefaultController.prototype,Symbol.toStringTag,{value:\"ReadableStreamDefaultController\",configurable:!0});class ReadableStream{constructor(e={},t={}){void 0===e?e=null:I(e,\"First parameter\");const r=dt(t,\"Second parameter\"),o=function(e,t){L(e,t);const r=e,o=null==r?void 0:r.autoAllocateChunkSize,n=null==r?void 0:r.cancel,a=null==r?void 0:r.pull,i=null==r?void 0:r.start,l=null==r?void 0:r.type;return{autoAllocateChunkSize:void 0===o?void 0:Q(o,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===n?void 0:gr(n,r,`${t} has member 'cancel' that`),pull:void 0===a?void 0:vr(a,r,`${t} has member 'pull' that`),start:void 0===i?void 0:wr(i,r,`${t} has member 'start' that`),type:void 0===l?void 0:Rr(l,`${t} has member 'type' that`)}}(e,\"First parameter\");if(qr(this),\"bytes\"===o.type){if(void 0!==r.size)throw new RangeError(\"The strategy for a byte stream cannot have a size function\");!function(e,t,r){const o=Object.create(ReadableByteStreamController.prototype);let n,a,i;n=void 0!==t.start?()=>t.start(o):()=>{},a=void 0!==t.pull?()=>t.pull(o):()=>c(void 0),i=void 0!==t.cancel?e=>t.cancel(e):()=>c(void 0);const l=t.autoAllocateChunkSize;if(0===l)throw new TypeError(\"autoAllocateChunkSize must be greater than 0\");Je(e,o,n,a,i,r,l)}(this,o,ut(r,0))}else{const e=ct(r);!function(e,t,r,o){const n=Object.create(ReadableStreamDefaultController.prototype);let a,i,l;a=void 0!==t.start?()=>t.start(n):()=>{},i=void 0!==t.pull?()=>t.pull(n):()=>c(void 0),l=void 0!==t.cancel?e=>t.cancel(e):()=>c(void 0),_r(e,n,a,i,l,r,o)}(this,o,ut(r,1),e)}}get locked(){if(!Er(this))throw jr(\"locked\");return Wr(this)}cancel(e=void 0){return Er(this)?Wr(this)?d(new TypeError(\"Cannot cancel a stream that already has a reader\")):Or(this,e):d(jr(\"cancel\"))}getReader(e=void 0){if(!Er(this))throw jr(\"getReader\");return void 0===function(e,t){L(e,t);const r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:et(r,`${t} has member 'mode' that`)}}(e,\"First parameter\").mode?H(this):tt(this)}pipeThrough(e,t={}){if(!Er(this))throw jr(\"pipeThrough\");$(e,1,\"pipeThrough\");const r=function(e,t){L(e,t);const r=null==e?void 0:e.readable;M(r,\"readable\",\"ReadableWritablePair\"),N(r,`${t} has member 'readable' that`);const o=null==e?void 0:e.writable;return M(o,\"writable\",\"ReadableWritablePair\"),pt(o,`${t} has member 'writable' that`),{readable:r,writable:o}}(e,\"First parameter\"),o=Tr(t,\"Second parameter\");if(Wr(this))throw new TypeError(\"ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream\");if(vt(r.writable))throw new TypeError(\"ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream\");return p(ir(this,r.writable,o.preventClose,o.preventAbort,o.preventCancel,o.signal)),r.readable}pipeTo(e,t={}){if(!Er(this))return d(jr(\"pipeTo\"));if(void 0===e)return d(\"Parameter 1 is required in 'pipeTo'.\");if(!gt(e))return d(new TypeError(\"ReadableStream.prototype.pipeTo's first argument must be a WritableStream\"));let r;try{r=Tr(t,\"Second parameter\")}catch(e){return d(e)}return Wr(this)?d(new TypeError(\"ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream\")):vt(e)?d(new TypeError(\"ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream\")):ir(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!Er(this))throw jr(\"tee\");return ne(yr(this))}values(e=void 0){if(!Er(this))throw jr(\"values\");return function(e,t){const r=H(e),o=new he(r,t),n=Object.create(me);return n._asyncIteratorImpl=o,n}(this,function(e,t){L(e,t);const r=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(r)}}(e,\"First parameter\").preventCancel)}[de](e){return this.values(e)}static from(e){return Sr(e)}}function Cr(e,t,r,o=1,n=()=>1){const a=Object.create(ReadableStream.prototype);qr(a);return _r(a,Object.create(ReadableStreamDefaultController.prototype),e,t,r,o,n),a}function Pr(e,t,r){const o=Object.create(ReadableStream.prototype);qr(o);return Je(o,Object.create(ReadableByteStreamController.prototype),e,t,r,0,void 0),o}function qr(e){e._state=\"readable\",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Er(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_readableStreamController\")&&e instanceof ReadableStream)}function Wr(e){return void 0!==e._reader}function Or(t,r){if(t._disturbed=!0,\"closed\"===t._state)return c(void 0);if(\"errored\"===t._state)return d(t._storedError);Br(t);const o=t._reader;if(void 0!==o&&at(o)){const e=o._readIntoRequests;o._readIntoRequests=new v,e.forEach(e=>{e._closeSteps(void 0)})}return _(t._readableStreamController[T](r),e)}function Br(e){e._state=\"closed\";const t=e._reader;if(void 0!==t&&(A(t),J(t))){const e=t._readRequests;t._readRequests=new v,e.forEach(e=>{e._closeSteps()})}}function kr(e,t){e._state=\"errored\",e._storedError=t;const r=e._reader;void 0!==r&&(j(r,t),J(r)?Z(r,t):lt(r,t))}function jr(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ar(e,t){L(e,t);const r=null==e?void 0:e.highWaterMark;return M(r,\"highWaterMark\",\"QueuingStrategyInit\"),{highWaterMark:Y(r)}}Object.defineProperties(ReadableStream,{from:{enumerable:!0}}),Object.defineProperties(ReadableStream.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),o(ReadableStream.from,\"from\"),o(ReadableStream.prototype.cancel,\"cancel\"),o(ReadableStream.prototype.getReader,\"getReader\"),o(ReadableStream.prototype.pipeThrough,\"pipeThrough\"),o(ReadableStream.prototype.pipeTo,\"pipeTo\"),o(ReadableStream.prototype.tee,\"tee\"),o(ReadableStream.prototype.values,\"values\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ReadableStream.prototype,Symbol.toStringTag,{value:\"ReadableStream\",configurable:!0}),Object.defineProperty(ReadableStream.prototype,de,{value:ReadableStream.prototype.values,writable:!0,configurable:!0});const zr=e=>e.byteLength;o(zr,\"size\");class ByteLengthQueuingStrategy{constructor(e){$(e,1,\"ByteLengthQueuingStrategy\"),e=Ar(e,\"First parameter\"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Lr(this))throw Dr(\"highWaterMark\");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Lr(this))throw Dr(\"size\");return zr}}function Dr(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Lr(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_byteLengthQueuingStrategyHighWaterMark\")&&e instanceof ByteLengthQueuingStrategy)}Object.defineProperties(ByteLengthQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ByteLengthQueuingStrategy.prototype,Symbol.toStringTag,{value:\"ByteLengthQueuingStrategy\",configurable:!0});const Fr=()=>1;o(Fr,\"size\");class CountQueuingStrategy{constructor(e){$(e,1,\"CountQueuingStrategy\"),e=Ar(e,\"First parameter\"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!$r(this))throw Ir(\"highWaterMark\");return this._countQueuingStrategyHighWaterMark}get size(){if(!$r(this))throw Ir(\"size\");return Fr}}function Ir(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function $r(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_countQueuingStrategyHighWaterMark\")&&e instanceof CountQueuingStrategy)}function Mr(e,t,r){return F(e,r),r=>g(e,t,[r])}function Yr(e,t,r){return F(e,r),r=>S(e,t,[r])}function xr(e,t,r){return F(e,r),(r,o)=>g(e,t,[r,o])}function Qr(e,t,r){return F(e,r),r=>g(e,t,[r])}Object.defineProperties(CountQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(CountQueuingStrategy.prototype,Symbol.toStringTag,{value:\"CountQueuingStrategy\",configurable:!0});class TransformStream{constructor(e={},t={},r={}){void 0===e&&(e=null);const o=dt(t,\"Second parameter\"),n=dt(r,\"Third parameter\"),a=function(e,t){L(e,t);const r=null==e?void 0:e.cancel,o=null==e?void 0:e.flush,n=null==e?void 0:e.readableType,a=null==e?void 0:e.start,i=null==e?void 0:e.transform,l=null==e?void 0:e.writableType;return{cancel:void 0===r?void 0:Qr(r,e,`${t} has member 'cancel' that`),flush:void 0===o?void 0:Mr(o,e,`${t} has member 'flush' that`),readableType:n,start:void 0===a?void 0:Yr(a,e,`${t} has member 'start' that`),transform:void 0===i?void 0:xr(i,e,`${t} has member 'transform' that`),writableType:l}}(e,\"First parameter\");if(void 0!==a.readableType)throw new RangeError(\"Invalid readableType specified\");if(void 0!==a.writableType)throw new RangeError(\"Invalid writableType specified\");const i=ut(n,0),l=ct(n),s=ut(o,1),f=ct(o);let h;!function(e,t,r,o,n,a){function i(){return t}function l(t){return function(e,t){const r=e._transformStreamController;if(e._backpressure){return _(e._backpressureChangePromise,()=>{const o=e._writable;if(\"erroring\"===o._state)throw o._storedError;return Zr(r,t)})}return Zr(r,t)}(e,t)}function s(t){return function(e,t){const r=e._transformStreamController;if(void 0!==r._finishPromise)return r._finishPromise;const o=e._readable;r._finishPromise=u((e,t)=>{r._finishPromise_resolve=e,r._finishPromise_reject=t});const n=r._cancelAlgorithm(t);return Jr(r),b(n,()=>(\"errored\"===o._state?ro(r,o._storedError):(br(o._readableStreamController,t),to(r)),null),e=>(br(o._readableStreamController,e),ro(r,e),null)),r._finishPromise}(e,t)}function c(){return function(e){const t=e._transformStreamController;if(void 0!==t._finishPromise)return t._finishPromise;const r=e._readable;t._finishPromise=u((e,r)=>{t._finishPromise_resolve=e,t._finishPromise_reject=r});const o=t._flushAlgorithm();return Jr(t),b(o,()=>(\"errored\"===r._state?ro(t,r._storedError):(dr(r._readableStreamController),to(t)),null),e=>(br(r._readableStreamController,e),ro(t,e),null)),t._finishPromise}(e)}function d(){return function(e){return Gr(e,!1),e._backpressureChangePromise}(e)}function f(t){return function(e,t){const r=e._transformStreamController;if(void 0!==r._finishPromise)return r._finishPromise;const o=e._writable;r._finishPromise=u((e,t)=>{r._finishPromise_resolve=e,r._finishPromise_reject=t});const n=r._cancelAlgorithm(t);return Jr(r),b(n,()=>(\"errored\"===o._state?ro(r,o._storedError):(Yt(o._writableStreamController,t),Ur(e),to(r)),null),t=>(Yt(o._writableStreamController,t),Ur(e),ro(r,t),null)),r._finishPromise}(e,t)}e._writable=function(e,t,r,o,n=1,a=()=>1){const i=Object.create(WritableStream.prototype);return St(i),Ft(i,Object.create(WritableStreamDefaultController.prototype),e,t,r,o,n,a),i}(i,l,c,s,r,o),e._readable=Cr(i,d,f,n,a),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Gr(e,!0),e._transformStreamController=void 0}(this,u(e=>{h=e}),s,f,i,l),function(e,t){const r=Object.create(TransformStreamDefaultController.prototype);let o,n,a;o=void 0!==t.transform?e=>t.transform(e,r):e=>{try{return Kr(r,e),c(void 0)}catch(e){return d(e)}};n=void 0!==t.flush?()=>t.flush(r):()=>c(void 0);a=void 0!==t.cancel?e=>t.cancel(e):()=>c(void 0);!function(e,t,r,o,n){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=r,t._flushAlgorithm=o,t._cancelAlgorithm=n,t._finishPromise=void 0,t._finishPromise_resolve=void 0,t._finishPromise_reject=void 0}(e,r,o,n,a)}(this,a),void 0!==a.start?h(a.start(this._transformStreamController)):h(void 0)}get readable(){if(!Nr(this))throw oo(\"readable\");return this._readable}get writable(){if(!Nr(this))throw oo(\"writable\");return this._writable}}function Nr(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_transformStreamController\")&&e instanceof TransformStream)}function Hr(e,t){br(e._readable._readableStreamController,t),Vr(e,t)}function Vr(e,t){Jr(e._transformStreamController),Yt(e._writable._writableStreamController,t),Ur(e)}function Ur(e){e._backpressure&&Gr(e,!1)}function Gr(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=u(t=>{e._backpressureChangePromise_resolve=t}),e._backpressure=t}Object.defineProperties(TransformStream.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(TransformStream.prototype,Symbol.toStringTag,{value:\"TransformStream\",configurable:!0});class TransformStreamDefaultController{constructor(){throw new TypeError(\"Illegal constructor\")}get desiredSize(){if(!Xr(this))throw eo(\"desiredSize\");return hr(this._controlledTransformStream._readable._readableStreamController)}enqueue(e=void 0){if(!Xr(this))throw eo(\"enqueue\");Kr(this,e)}error(e=void 0){if(!Xr(this))throw eo(\"error\");var t;t=e,Hr(this._controlledTransformStream,t)}terminate(){if(!Xr(this))throw eo(\"terminate\");!function(e){const t=e._controlledTransformStream;dr(t._readable._readableStreamController);const r=new TypeError(\"TransformStream terminated\");Vr(t,r)}(this)}}function Xr(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_controlledTransformStream\")&&e instanceof TransformStreamDefaultController)}function Jr(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0,e._cancelAlgorithm=void 0}function Kr(e,t){const r=e._controlledTransformStream,o=r._readable._readableStreamController;if(!mr(o))throw new TypeError(\"Readable side is not in a state that permits enqueue\");try{fr(o,t)}catch(e){throw Vr(r,e),r._readable._storedError}const n=function(e){return!ur(e)}(o);n!==r._backpressure&&Gr(r,!0)}function Zr(e,t){return _(e._transformAlgorithm(t),void 0,t=>{throw Hr(e._controlledTransformStream,t),t})}function eo(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function to(e){void 0!==e._finishPromise_resolve&&(e._finishPromise_resolve(),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function ro(e,t){void 0!==e._finishPromise_reject&&(p(e._finishPromise),e._finishPromise_reject(t),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function oo(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(TransformStreamDefaultController.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),o(TransformStreamDefaultController.prototype.enqueue,\"enqueue\"),o(TransformStreamDefaultController.prototype.error,\"error\"),o(TransformStreamDefaultController.prototype.terminate,\"terminate\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(TransformStreamDefaultController.prototype,Symbol.toStringTag,{value:\"TransformStreamDefaultController\",configurable:!0});export{ByteLengthQueuingStrategy,CountQueuingStrategy,ReadableByteStreamController,ReadableStream,ReadableStreamBYOBReader,ReadableStreamBYOBRequest,ReadableStreamDefaultController,ReadableStreamDefaultReader,TransformStream,TransformStreamDefaultController,WritableStream,WritableStreamDefaultController,WritableStreamDefaultWriter};\n", "import type { AbortSignal } from \"web-streams-polyfill\";\nimport {\n    ReadableStream as ReadableStreamPolyfill,\n    TransformStream as TransformStreamPolyfill,\n    WritableStream as WritableStreamPolyfill,\n} from \"web-streams-polyfill\";\nexport * from \"web-streams-polyfill\";\n\n/** A controller object that allows you to abort one or more DOM requests as and when desired. */\nexport interface AbortController {\n    /**\n     * Returns the AbortSignal object associated with this object.\n     */\n    readonly signal: AbortSignal;\n\n    /**\n     * Invoking this method will set this object's AbortSignal's aborted flag and signal to any observers that the associated activity is to be aborted.\n     */\n    abort(reason?: any): void;\n}\n\ninterface AbortControllerConstructor {\n    prototype: AbortController;\n    new (): AbortController;\n}\n\ninterface GlobalExtension {\n    AbortController: AbortControllerConstructor;\n    ReadableStream: typeof ReadableStreamPolyfill;\n    WritableStream: typeof WritableStreamPolyfill;\n    TransformStream: typeof TransformStreamPolyfill;\n}\n\nconst GLOBAL = globalThis as unknown as GlobalExtension;\n\nexport const AbortController = GLOBAL.AbortController;\n\nexport type ReadableStream<R = any> = ReadableStreamPolyfill<R>;\nexport let ReadableStream = ReadableStreamPolyfill;\n\nexport type WritableStream<W = any> = WritableStreamPolyfill<W>;\nexport let WritableStream = WritableStreamPolyfill;\n\nexport type TransformStream<I = any, O = any> = TransformStreamPolyfill<I, O>;\nexport let TransformStream = TransformStreamPolyfill;\n\nif (GLOBAL.ReadableStream && GLOBAL.WritableStream && GLOBAL.TransformStream) {\n    // Use browser native implementation\n    ReadableStream = GLOBAL.ReadableStream;\n    WritableStream = GLOBAL.WritableStream;\n    TransformStream = GLOBAL.TransformStream;\n} else {\n    // TODO: enable loading Node.js stream implementation when bundler supports Top Level Await\n    // try {\n    //     // Use Node.js native implementation\n    //     const MODULE_NAME = \"node:stream/web\";\n    //     const StreamWeb = (await import(MODULE_NAME)) as GlobalExtension;\n    //     ReadableStream = StreamWeb.ReadableStream;\n    //     WritableStream = StreamWeb.WritableStream;\n    //     TransformStream = StreamWeb.TransformStream;\n    // } catch {\n    //     // ignore\n    // }\n}\n", "import { PromiseResolver } from \"@yume-chan/async\";\n\nimport type { QueuingStrategy, WritableStreamDefaultWriter } from \"./stream.js\";\nimport { ReadableStream, TransformStream, WritableStream } from \"./stream.js\";\n\ninterface Task {\n    run<T>(callback: () => T): T;\n}\n\ninterface Console {\n    createTask(name: string): Task;\n}\n\ninterface GlobalEx {\n    console: Console;\n}\n\n// `createTask` allows browser DevTools to track the call stack across async boundaries.\nconst { console } = globalThis as unknown as GlobalEx;\nconst createTask: Console[\"createTask\"] =\n    console.createTask?.bind(console) ??\n    (() => ({\n        run(callback) {\n            return callback();\n        },\n    }));\n\nexport class Consumable<T> {\n    private readonly task: Task;\n    private readonly resolver: PromiseResolver<void>;\n\n    public readonly value: T;\n    public readonly consumed: Promise<void>;\n\n    public constructor(value: T) {\n        this.task = createTask(\"Consumable\");\n        this.value = value;\n        this.resolver = new PromiseResolver<void>();\n        this.consumed = this.resolver.promise;\n    }\n\n    public consume() {\n        this.resolver.resolve();\n    }\n\n    public error(error: any) {\n        this.resolver.reject(error);\n    }\n\n    public async tryConsume<U>(callback: (value: T) => U) {\n        try {\n            // eslint-disable-next-line @typescript-eslint/await-thenable\n            const result = await this.task.run(() => callback(this.value));\n            this.consume();\n            return result;\n        } catch (e) {\n            this.resolver.reject(e);\n            throw e;\n        }\n    }\n}\n\nasync function enqueue<T>(\n    controller: { enqueue: (chunk: Consumable<T>) => void },\n    chunk: T\n) {\n    const output = new Consumable(chunk);\n    controller.enqueue(output);\n    await output.consumed;\n}\n\nexport class WrapConsumableStream<T> extends TransformStream<T, Consumable<T>> {\n    public constructor() {\n        super({\n            async transform(chunk, controller) {\n                await enqueue(controller, chunk);\n            },\n        });\n    }\n}\n\nexport class UnwrapConsumableStream<T> extends TransformStream<\n    Consumable<T>,\n    T\n> {\n    public constructor() {\n        super({\n            transform(chunk, controller) {\n                controller.enqueue(chunk.value);\n                chunk.consume();\n            },\n        });\n    }\n}\n\nexport interface ConsumableReadableStreamController<T> {\n    enqueue(chunk: T): Promise<void>;\n    close(): void;\n    error(reason: any): void;\n}\n\nexport interface ConsumableReadableStreamSource<T> {\n    start?(\n        controller: ConsumableReadableStreamController<T>\n    ): void | PromiseLike<void>;\n    pull?(\n        controller: ConsumableReadableStreamController<T>\n    ): void | PromiseLike<void>;\n    cancel?(reason: any): void | PromiseLike<void>;\n}\n\nexport class ConsumableReadableStream<T> extends ReadableStream<Consumable<T>> {\n    public constructor(\n        source: ConsumableReadableStreamSource<T>,\n        strategy?: QueuingStrategy<T>\n    ) {\n        let wrappedController:\n            | ConsumableReadableStreamController<T>\n            | undefined;\n\n        let wrappedStrategy: QueuingStrategy<Consumable<T>> | undefined;\n        if (strategy) {\n            wrappedStrategy = {};\n            if (\"highWaterMark\" in strategy) {\n                wrappedStrategy.highWaterMark = strategy.highWaterMark;\n            }\n            if (\"size\" in strategy) {\n                wrappedStrategy.size = (chunk) => {\n                    return strategy.size!(chunk.value);\n                };\n            }\n        }\n\n        super(\n            {\n                async start(controller) {\n                    wrappedController = {\n                        async enqueue(chunk) {\n                            await enqueue(controller, chunk);\n                        },\n                        close() {\n                            controller.close();\n                        },\n                        error(reason) {\n                            controller.error(reason);\n                        },\n                    };\n\n                    await source.start?.(wrappedController);\n                },\n                async pull() {\n                    await source.pull?.(wrappedController!);\n                },\n                async cancel(reason) {\n                    await source.cancel?.(reason);\n                },\n            },\n            wrappedStrategy\n        );\n    }\n}\n\nexport interface ConsumableWritableStreamSink<T> {\n    start?(): void | PromiseLike<void>;\n    write?(chunk: T): void | PromiseLike<void>;\n    abort?(reason: any): void | PromiseLike<void>;\n    close?(): void | PromiseLike<void>;\n}\n\nexport class ConsumableWritableStream<T> extends WritableStream<Consumable<T>> {\n    public static async write<T>(\n        writer: WritableStreamDefaultWriter<Consumable<T>>,\n        value: T\n    ) {\n        const consumable = new Consumable(value);\n        await writer.write(consumable);\n        await consumable.consumed;\n    }\n\n    public constructor(\n        sink: ConsumableWritableStreamSink<T>,\n        strategy?: QueuingStrategy<T>\n    ) {\n        let wrappedStrategy: QueuingStrategy<Consumable<T>> | undefined;\n        if (strategy) {\n            wrappedStrategy = {};\n            if (\"highWaterMark\" in strategy) {\n                wrappedStrategy.highWaterMark = strategy.highWaterMark;\n            }\n            if (\"size\" in strategy) {\n                wrappedStrategy.size = (chunk) => {\n                    return strategy.size!(chunk.value);\n                };\n            }\n        }\n\n        super(\n            {\n                start() {\n                    return sink.start?.();\n                },\n                async write(chunk) {\n                    await chunk.tryConsume((value) => sink.write?.(value));\n                    chunk.consume();\n                },\n                abort(reason) {\n                    return sink.abort?.(reason);\n                },\n                close() {\n                    return sink.close?.();\n                },\n            },\n            wrappedStrategy\n        );\n    }\n}\n\nexport interface ConsumableTransformer<I, O> {\n    start?(\n        controller: ConsumableReadableStreamController<O>\n    ): void | PromiseLike<void>;\n    transform?(\n        chunk: I,\n        controller: ConsumableReadableStreamController<O>\n    ): void | PromiseLike<void>;\n    flush?(\n        controller: ConsumableReadableStreamController<O>\n    ): void | PromiseLike<void>;\n}\n\nexport class ConsumableTransformStream<I, O> extends TransformStream<\n    Consumable<I>,\n    Consumable<O>\n> {\n    public constructor(transformer: ConsumableTransformer<I, O>) {\n        let wrappedController:\n            | ConsumableReadableStreamController<O>\n            | undefined;\n\n        super({\n            async start(controller) {\n                wrappedController = {\n                    async enqueue(chunk) {\n                        await enqueue(controller, chunk);\n                    },\n                    close() {\n                        controller.terminate();\n                    },\n                    error(reason) {\n                        controller.error(reason);\n                    },\n                };\n\n                await transformer.start?.(wrappedController);\n            },\n            async transform(chunk) {\n                await chunk.tryConsume((value) =>\n                    transformer.transform?.(value, wrappedController!)\n                );\n                chunk.consume();\n            },\n            async flush() {\n                await transformer.flush?.(wrappedController!);\n            },\n        });\n    }\n}\n\nexport class ConsumableInspectStream<T> extends TransformStream<\n    Consumable<T>,\n    Consumable<T>\n> {\n    public constructor(callback: (value: T) => void) {\n        super({\n            transform(chunk, controller) {\n                callback(chunk.value);\n                controller.enqueue(chunk);\n            },\n        });\n    }\n}\n", "import type { StructFieldValue } from \"./field-value.js\";\nimport type { StructOptions } from \"./options.js\";\nimport type {\n    StructAsyncDeserializeStream,\n    StructDeserializeStream,\n} from \"./stream.js\";\nimport type { StructValue } from \"./struct-value.js\";\n\n/**\n * A field definition defines how to deserialize a field.\n *\n * @template TOptions TypeScript type of this definition's `options`.\n * @template TValue TypeScript type of this field.\n * @template TOmitInitKey Optionally remove some fields from the init type. Should be a union of string literal types.\n */\nexport abstract class StructFieldDefinition<\n    TOptions = void,\n    TValue = unknown,\n    TOmitInitKey extends PropertyKey = never\n> {\n    /**\n     * When `T` is a type initiated `StructFieldDefinition`,\n     * use `T['TValue']` to retrieve its `TValue` type parameter.\n     */\n    public readonly TValue!: TValue;\n\n    /**\n     * When `T` is a type initiated `StructFieldDefinition`,\n     * use `T['TOmitInitKey']` to retrieve its `TOmitInitKey` type parameter.\n     */\n    public readonly TOmitInitKey!: TOmitInitKey;\n\n    public readonly options: TOptions;\n\n    public constructor(options: TOptions) {\n        this.options = options;\n    }\n\n    /**\n     * When implemented in derived classes, returns the size (or minimal size if it's dynamic) of this field.\n     *\n     * Actual size can be retrieved from `StructFieldValue#getSize`\n     */\n    public abstract getSize(): number;\n\n    /**\n     * When implemented in derived classes, creates a `StructFieldValue` from a given `value`.\n     */\n    public abstract create(\n        options: Readonly<StructOptions>,\n        structValue: StructValue,\n        value: TValue\n    ): StructFieldValue<this>;\n\n    /**\n     * When implemented in derived classes,It must be synchronous (returns a value) or asynchronous (returns a `Promise`) depending\n     * on the type of `stream`. reads and creates a `StructFieldValue` from `stream`.\n     *\n     *  `SyncPromise` can be used to simplify implementation.\n     */\n    public abstract deserialize(\n        options: Readonly<StructOptions>,\n        stream: StructDeserializeStream,\n        structValue: StructValue\n    ): StructFieldValue<this>;\n    public abstract deserialize(\n        options: Readonly<StructOptions>,\n        stream: StructAsyncDeserializeStream,\n        struct: StructValue\n    ): Promise<StructFieldValue<this>>;\n}\n", "import type { StructFieldDefinition } from \"./definition.js\";\nimport type { StructOptions } from \"./options.js\";\nimport type { StructValue } from \"./struct-value.js\";\n\n/**\n * A field value defines how to serialize a field.\n *\n * It may contains extra metadata about the value which are essential or\n * helpful for the serialization process.\n */\nexport abstract class StructFieldValue<\n    TDefinition extends StructFieldDefinition<\n        any,\n        any,\n        any\n    > = StructFieldDefinition<any, any, any>\n> {\n    /** Gets the definition associated with this runtime value */\n    public readonly definition: TDefinition;\n\n    /** Gets the options of the associated `Struct` */\n    public readonly options: Readonly<StructOptions>;\n\n    /** Gets the associated `Struct` instance */\n    public readonly struct: StructValue;\n\n    public get hasCustomAccessors(): boolean {\n        return (\n            this.get !== StructFieldValue.prototype.get ||\n            this.set !== StructFieldValue.prototype.set\n        );\n    }\n\n    protected value: TDefinition[\"TValue\"];\n\n    public constructor(\n        definition: TDefinition,\n        options: Readonly<StructOptions>,\n        struct: StructValue,\n        value: TDefinition[\"TValue\"]\n    ) {\n        this.definition = definition;\n        this.options = options;\n        this.struct = struct;\n        this.value = value;\n    }\n\n    /**\n     * Gets size of this field. By default, it returns its `definition`'s size.\n     *\n     * When overridden in derived classes, can have custom logic to calculate the actual size.\n     */\n    public getSize(): number {\n        return this.definition.getSize();\n    }\n\n    /**\n     * When implemented in derived classes, reads current field's value.\n     */\n    public get(): TDefinition[\"TValue\"] {\n        return this.value;\n    }\n\n    /**\n     * When implemented in derived classes, updates current field's value.\n     */\n    public set(value: TDefinition[\"TValue\"]): void {\n        this.value = value;\n    }\n\n    /**\n     * When implemented in derived classes, serializes this field into `dataView` at `offset`\n     */\n    public abstract serialize(dataView: DataView, offset: number): void;\n}\n", "export interface StructOptions {\n    /**\n     * Whether all multi-byte fields in this struct are little-endian encoded.\n     *\n     * @default false\n     */\n    littleEndian: boolean;\n\n    // TODO: StructOptions: investigate whether this is necessary\n    // I can't think about any other options which need to be struct wide.\n    // Even endianness can be set on a per-field basis (because it's not meaningful\n    // for some field types like `Uint8Array`, and very rarely, a struct may contain\n    // mixed endianness).\n    // It's just more common and a little more convenient to have it here.\n}\n\nexport const StructDefaultOptions: Readonly<StructOptions> = {\n    littleEndian: false,\n};\n", "import type { StructFieldValue } from \"./field-value.js\";\n\nexport const STRUCT_VALUE_SYMBOL = Symbol(\"struct-value\");\n\n/**\n * A struct value is a map between keys in a struct and their field values.\n */\nexport class StructValue {\n    /** @internal */ readonly fieldValues: Record<\n        PropertyKey,\n        StructFieldValue\n    > = {};\n\n    /**\n     * Gets the result struct value object\n     */\n    public readonly value: Record<PropertyKey, unknown>;\n\n    public constructor(prototype: object) {\n        // PERF: `Object.create(extra)` is 50% faster\n        // than `Object.defineProperties(this.value, extra)`\n        this.value = Object.create(prototype) as Record<PropertyKey, unknown>;\n\n        // PERF: `Object.defineProperty` is slow\n        // but we need it to be non-enumerable\n        Object.defineProperty(this.value, STRUCT_VALUE_SYMBOL, {\n            enumerable: false,\n            value: this,\n        });\n    }\n\n    /**\n     * Sets a `StructFieldValue` for `key`\n     *\n     * @param name The field name\n     * @param fieldValue The associated `StructFieldValue`\n     */\n    public set(name: PropertyKey, fieldValue: StructFieldValue): void {\n        this.fieldValues[name] = fieldValue;\n\n        // PERF: `Object.defineProperty` is slow\n        // use normal property when possible\n        if (fieldValue.hasCustomAccessors) {\n            Object.defineProperty(this.value, name, {\n                configurable: true,\n                enumerable: true,\n                get() {\n                    return fieldValue.get();\n                },\n                set(v) {\n                    fieldValue.set(v);\n                },\n            });\n        } else {\n            this.value[name] = fieldValue.get();\n        }\n    }\n\n    /**\n     * Gets the `StructFieldValue` for `key`\n     *\n     * @param name The field name\n     */\n    public get(name: PropertyKey): StructFieldValue {\n        return this.fieldValues[name]!;\n    }\n}\n", "export interface SyncPromise<T> {\n    then<TResult1 = T, TResult2 = never>(\n        onfulfilled?:\n            | ((value: T) => TResult1 | PromiseLike<TResult1>)\n            | null\n            | undefined,\n        onrejected?:\n            | ((reason: any) => TResult2 | PromiseLike<TResult2>)\n            | null\n            | undefined\n    ): SyncPromise<TResult1 | TResult2>;\n\n    valueOrPromise(): T | PromiseLike<T>;\n}\n\ninterface SyncPromiseStatic {\n    reject<T = never>(reason?: any): SyncPromise<T>;\n\n    resolve(): SyncPromise<void>;\n    resolve<T>(value: T | PromiseLike<T>): SyncPromise<T>;\n\n    try<T>(executor: () => T | PromiseLike<T>): SyncPromise<T>;\n}\n\nexport const SyncPromise: SyncPromiseStatic = {\n    reject<T = never>(reason?: any): SyncPromise<T> {\n        return new RejectedSyncPromise(reason);\n    },\n    resolve<T>(value?: T | PromiseLike<T>): SyncPromise<T> {\n        if (\n            typeof value === \"object\" &&\n            value !== null &&\n            typeof (value as PromiseLike<T>).then === \"function\"\n        ) {\n            if (\n                value instanceof PendingSyncPromise ||\n                value instanceof ResolvedSyncPromise ||\n                value instanceof RejectedSyncPromise\n            ) {\n                return value;\n            }\n\n            return new PendingSyncPromise(value as PromiseLike<T>);\n        } else {\n            return new ResolvedSyncPromise(value as T);\n        }\n    },\n    try<T>(executor: () => T | PromiseLike<T>): SyncPromise<T> {\n        try {\n            return SyncPromise.resolve(executor());\n        } catch (e) {\n            return SyncPromise.reject(e);\n        }\n    },\n};\n\nclass PendingSyncPromise<T> implements SyncPromise<T> {\n    private promise: PromiseLike<T>;\n\n    public constructor(promise: PromiseLike<T>) {\n        this.promise = promise;\n    }\n\n    public then<TResult1 = T, TResult2 = never>(\n        onfulfilled?:\n            | ((value: T) => TResult1 | PromiseLike<TResult1>)\n            | null\n            | undefined,\n        onrejected?:\n            | ((reason: any) => TResult2 | PromiseLike<TResult2>)\n            | null\n            | undefined\n    ) {\n        return new PendingSyncPromise<TResult1 | TResult2>(\n            this.promise.then(onfulfilled, onrejected)\n        );\n    }\n\n    public valueOrPromise(): T | PromiseLike<T> {\n        return this.promise;\n    }\n}\n\nclass ResolvedSyncPromise<T> implements SyncPromise<T> {\n    private value: T;\n\n    public constructor(value: T) {\n        this.value = value;\n    }\n\n    public then<TResult1 = T>(\n        onfulfilled?:\n            | ((value: T) => TResult1 | PromiseLike<TResult1>)\n            | null\n            | undefined\n    ) {\n        if (!onfulfilled) {\n            return this as any;\n        }\n        return SyncPromise.try(() => onfulfilled(this.value));\n    }\n\n    public valueOrPromise(): T | PromiseLike<T> {\n        return this.value;\n    }\n}\n\nclass RejectedSyncPromise<T> implements SyncPromise<T> {\n    private reason: any;\n\n    public constructor(reason: any) {\n        this.reason = reason;\n    }\n\n    public then<TResult1 = T, TResult2 = never>(\n        onfulfilled?:\n            | ((value: T) => TResult1 | PromiseLike<TResult1>)\n            | null\n            | undefined,\n        onrejected?:\n            | ((reason: any) => TResult2 | PromiseLike<TResult2>)\n            | null\n            | undefined\n    ) {\n        if (!onrejected) {\n            return this as any;\n        }\n        return SyncPromise.try(() => onrejected(this.reason));\n    }\n\n    public valueOrPromise(): T | PromiseLike<T> {\n        throw this.reason;\n    }\n}\n", "const BigInt32 = BigInt(32);\n\nexport function getBigInt64(\n    dataView: DataView,\n    byteOffset: number,\n    littleEndian: boolean | undefined\n): bigint {\n    const littleEndianMask = Number(!!littleEndian);\n    const bigEndianMask = Number(!littleEndian);\n\n    return (\n        (BigInt(\n            dataView.getInt32(byteOffset, littleEndian) * bigEndianMask +\n                dataView.getInt32(byteOffset + 4, littleEndian) *\n                    littleEndianMask\n        ) <<\n            BigInt32) |\n        BigInt(\n            dataView.getUint32(byteOffset, littleEndian) * littleEndianMask +\n                dataView.getUint32(byteOffset + 4, littleEndian) * bigEndianMask\n        )\n    );\n}\n\nexport function getBigUint64(\n    dataView: DataView,\n    byteOffset: number,\n    littleEndian: boolean | undefined\n): bigint {\n    const a = dataView.getUint32(byteOffset, littleEndian);\n    const b = dataView.getUint32(byteOffset + 4, littleEndian);\n\n    const littleEndianMask = Number(!!littleEndian);\n    const bigEndianMask = Number(!littleEndian);\n\n    // This branch-less optimization is 77x faster than normal ternary operator.\n    // and only 3% slower than native implementation\n    // https://jsbench.me/p8kyhg1eqv/1\n    return (\n        (BigInt(a * bigEndianMask + b * littleEndianMask) << BigInt32) |\n        BigInt(a * littleEndianMask + b * bigEndianMask)\n    );\n}\n\nexport function setBigInt64(\n    dataView: DataView,\n    byteOffset: number,\n    value: bigint,\n    littleEndian: boolean | undefined\n) {\n    const hi = Number(value >> BigInt32);\n    const lo = Number(value & BigInt(0xffffffff));\n\n    if (littleEndian) {\n        dataView.setInt32(byteOffset + 4, hi, littleEndian);\n        dataView.setUint32(byteOffset, lo, littleEndian);\n    } else {\n        dataView.setInt32(byteOffset, hi, littleEndian);\n        dataView.setUint32(byteOffset + 4, lo, littleEndian);\n    }\n}\n\nexport function setBigUint64(\n    dataView: DataView,\n    byteOffset: number,\n    value: bigint,\n    littleEndian: boolean | undefined\n) {\n    const hi = Number(value >> BigInt32);\n    const lo = Number(value & BigInt(0xffffffff));\n\n    if (littleEndian) {\n        dataView.setUint32(byteOffset + 4, hi, littleEndian);\n        dataView.setUint32(byteOffset, lo, littleEndian);\n    } else {\n        dataView.setUint32(byteOffset, hi, littleEndian);\n        dataView.setUint32(byteOffset + 4, lo, littleEndian);\n    }\n}\n", "import {\n    getBigInt64 as fallbackGetBigInt64,\n    getBigUint64 as fallbackGetBigUint64,\n    setBigInt64 as fallbackSetBigInt64,\n    setBigUint64 as fallbackSetBigUint64,\n} from \"./pure.js\";\n\nexport const getBigInt64 =\n    \"getBigInt64\" in DataView.prototype\n        ? (\n              dataView: DataView,\n              byteOffset: number,\n              littleEndian: boolean | undefined\n          ) => dataView.getBigInt64(byteOffset, littleEndian)\n        : fallbackGetBigInt64;\n\nexport const getBigUint64 =\n    \"getBigUint64\" in DataView.prototype\n        ? (\n              dataView: DataView,\n              byteOffset: number,\n              littleEndian: boolean | undefined\n          ) => dataView.getBigUint64(byteOffset, littleEndian)\n        : fallbackGetBigUint64;\n\nexport const setBigInt64 =\n    \"setBigInt64\" in DataView.prototype\n        ? (\n              dataView: DataView,\n              byteOffset: number,\n              value: bigint,\n              littleEndian: boolean | undefined\n          ) => dataView.setBigInt64(byteOffset, value, littleEndian)\n        : fallbackSetBigInt64;\n\nexport const setBigUint64 =\n    \"setBigUint64\" in DataView.prototype\n        ? (\n              dataView: DataView,\n              byteOffset: number,\n              value: bigint,\n              littleEndian: boolean | undefined\n          ) => dataView.setBigUint64(byteOffset, value, littleEndian)\n        : fallbackSetBigUint64;\n", "import {\n    getBigInt64,\n    getBigUint64,\n    setBigInt64,\n    setBigUint64,\n} from \"@yume-chan/dataview-bigint-polyfill/esm/fallback.js\";\n\nimport type {\n    StructAsyncDeserializeStream,\n    StructDeserializeStream,\n    StructOptions,\n    StructValue,\n} from \"../basic/index.js\";\nimport { StructFieldDefinition, StructFieldValue } from \"../basic/index.js\";\nimport { SyncPromise } from \"../sync-promise.js\";\nimport type { ValueOrPromise } from \"../utils.js\";\n\ntype DataViewBigInt64Getter = (\n    dataView: DataView,\n    byteOffset: number,\n    littleEndian: boolean | undefined\n) => bigint;\n\ntype DataViewBigInt64Setter = (\n    dataView: DataView,\n    byteOffset: number,\n    value: bigint,\n    littleEndian: boolean | undefined\n) => void;\n\nexport class BigIntFieldType {\n    public readonly TTypeScriptType!: bigint;\n\n    public readonly size: number;\n\n    public readonly getter: DataViewBigInt64Getter;\n\n    public readonly setter: DataViewBigInt64Setter;\n\n    public constructor(\n        size: number,\n        getter: DataViewBigInt64Getter,\n        setter: DataViewBigInt64Setter\n    ) {\n        this.size = size;\n        this.getter = getter;\n        this.setter = setter;\n    }\n\n    public static readonly Int64 = new BigIntFieldType(\n        8,\n        getBigInt64,\n        setBigInt64\n    );\n\n    public static readonly Uint64 = new BigIntFieldType(\n        8,\n        getBigUint64,\n        setBigUint64\n    );\n}\n\nexport class BigIntFieldDefinition<\n    TType extends BigIntFieldType = BigIntFieldType,\n    TTypeScriptType = TType[\"TTypeScriptType\"]\n> extends StructFieldDefinition<void, TTypeScriptType> {\n    public readonly type: TType;\n\n    public constructor(type: TType, typescriptType?: TTypeScriptType) {\n        void typescriptType;\n        super();\n        this.type = type;\n    }\n\n    public getSize(): number {\n        return this.type.size;\n    }\n\n    public create(\n        options: Readonly<StructOptions>,\n        struct: StructValue,\n        value: TTypeScriptType\n    ): BigIntFieldValue<this> {\n        return new BigIntFieldValue(this, options, struct, value);\n    }\n\n    public override deserialize(\n        options: Readonly<StructOptions>,\n        stream: StructDeserializeStream,\n        struct: StructValue\n    ): BigIntFieldValue<this>;\n    public override deserialize(\n        options: Readonly<StructOptions>,\n        stream: StructAsyncDeserializeStream,\n        struct: StructValue\n    ): Promise<BigIntFieldValue<this>>;\n    public override deserialize(\n        options: Readonly<StructOptions>,\n        stream: StructDeserializeStream | StructAsyncDeserializeStream,\n        struct: StructValue\n    ): ValueOrPromise<BigIntFieldValue<this>> {\n        return SyncPromise.try(() => {\n            return stream.read(this.getSize());\n        })\n            .then((array) => {\n                const view = new DataView(\n                    array.buffer,\n                    array.byteOffset,\n                    array.byteLength\n                );\n                const value = this.type.getter(view, 0, options.littleEndian);\n                return this.create(options, struct, value as any);\n            })\n            .valueOrPromise();\n    }\n}\n\nexport class BigIntFieldValue<\n    TDefinition extends BigIntFieldDefinition<BigIntFieldType, any>\n> extends StructFieldValue<TDefinition> {\n    public serialize(dataView: DataView, offset: number): void {\n        this.definition.type.setter(\n            dataView,\n            offset,\n            this.value,\n            this.options.littleEndian\n        );\n    }\n}\n", "/**\n * When evaluating a very complex generic type alias,\n * tell TypeScript to use `T`, instead of current type alias' name, as the result type name\n *\n * Example:\n *\n * ```ts\n * type WithIdentity<T> = Identity<SomeType<T>>;\n * type WithoutIdentity<T> = SomeType<T>;\n *\n * type WithIdentityResult = WithIdentity<number>;\n * // Hover on this one shows `SomeType<number>`\n *\n * type WithoutIdentityResult = WithoutIdentity<number>;\n * // Hover on this one shows `WithoutIdentity<number>`\n * ```\n */\nexport type Identity<T> = T;\n\n/**\n * Collapse an intersection type (`{ foo: string } & { bar: number }`) to a simple type (`{ foo: string, bar: number }`)\n */\nexport type Evaluate<T> = T extends infer U ? { [K in keyof U]: U[K] } : never;\n\n/**\n * Overwrite fields in `TBase` with fields in `TNew`\n */\nexport type Overwrite<TBase extends object, TNew extends object> = Evaluate<\n    Omit<TBase, keyof TNew> & TNew\n>;\n\n/**\n * Remove fields with `never` type\n */\nexport type OmitNever<T> = Pick<\n    T,\n    { [K in keyof T]: [T[K]] extends [never] ? never : K }[keyof T]\n>;\n\n/**\n * Extract keys of fields in `T` that has type `TValue`\n */\nexport type KeysOfType<T, TValue> = {\n    [TKey in keyof T]: T[TKey] extends TValue ? TKey : never;\n}[keyof T];\n\nexport type ValueOrPromise<T> = T | PromiseLike<T>;\n\n/**\n * Returns a (fake) value of the given type.\n */\nexport function placeholder<T>(): T {\n    return undefined as unknown as T;\n}\n\n// This library can't use `@types/node` or `lib: dom`\n// because they will pollute the global scope\n// So `TextEncoder` and `TextDecoder` types are not available\n\n// Node.js 8.3 ships `TextEncoder` and `TextDecoder` in `util` module.\n// But using top level await to load them requires Node.js 14.1.\n// So there is no point to do that. Let's just assume they exist in global.\n\ndeclare class TextEncoderType {\n    constructor();\n\n    encode(input: string): Uint8Array;\n}\n\ndeclare class TextDecoderType {\n    constructor();\n\n    decode(buffer: ArrayBufferView | ArrayBuffer): string;\n}\n\ninterface GlobalExtension {\n    TextEncoder: typeof TextEncoderType;\n    TextDecoder: typeof TextDecoderType;\n}\n\nconst { TextEncoder, TextDecoder } = globalThis as unknown as GlobalExtension;\n\nconst Utf8Encoder = new TextEncoder();\nconst Utf8Decoder = new TextDecoder();\n\nexport function encodeUtf8(input: string): Uint8Array {\n    return Utf8Encoder.encode(input);\n}\n\nexport function decodeUtf8(buffer: ArrayBufferView | ArrayBuffer): string {\n    return Utf8Decoder.decode(buffer);\n}\n", "import type {\n    StructAsyncDeserializeStream,\n    StructDeserializeStream,\n    StructOptions,\n    StructValue,\n} from \"../../basic/index.js\";\nimport { StructFieldDefinition, StructFieldValue } from \"../../basic/index.js\";\nimport { SyncPromise } from \"../../sync-promise.js\";\nimport type { ValueOrPromise } from \"../../utils.js\";\nimport { decodeUtf8, encodeUtf8 } from \"../../utils.js\";\n\n/**\n * Base class for all types that\n * can be converted from an `Uint8Array` when deserialized,\n * and need to be converted to an `Uint8Array` when serializing\n *\n * @template TValue The actual TypeScript type of this type\n * @template TTypeScriptType Optional another type (should be compatible with `TType`)\n * specified by user when creating field definitions.\n */\nexport abstract class BufferFieldSubType<\n    TValue = unknown,\n    TTypeScriptType = TValue\n> {\n    public readonly TTypeScriptType!: TTypeScriptType;\n\n    /**\n     * When implemented in derived classes, converts the type-specific `value` to an `Uint8Array`\n     *\n     * This function should be \"pure\", i.e.,\n     * same `value` should always be converted to `Uint8Array`s that have same content.\n     */\n    public abstract toBuffer(value: TValue): Uint8Array;\n\n    /** When implemented in derived classes, converts the `Uint8Array` to a type-specific value */\n    public abstract toValue(array: Uint8Array): TValue;\n\n    /**\n     * When implemented in derived classes, gets the size in byte of the type-specific `value`.\n     *\n     * If the size can't be calculated without first converting the `value` back to an `Uint8Array`,\n     * implementer can returns `-1`, so the caller will get its size by first converting it to\n     * an `Uint8Array` (and cache the result).\n     */\n    public abstract getSize(value: TValue): number;\n}\n\n/** An `BufferFieldSubType` that's actually an `Uint8Array` */\nexport class Uint8ArrayBufferFieldSubType<\n    TTypeScriptType = Uint8Array\n> extends BufferFieldSubType<Uint8Array, TTypeScriptType> {\n    public static readonly Instance = new Uint8ArrayBufferFieldSubType();\n\n    protected constructor() {\n        super();\n    }\n\n    public toBuffer(value: Uint8Array): Uint8Array {\n        return value;\n    }\n\n    public toValue(buffer: Uint8Array): Uint8Array {\n        return buffer;\n    }\n\n    public getSize(value: Uint8Array): number {\n        return value.byteLength;\n    }\n}\n\n/** An `BufferFieldSubType` that converts between `Uint8Array` and `string` */\nexport class StringBufferFieldSubType<\n    TTypeScriptType = string\n> extends BufferFieldSubType<string, TTypeScriptType> {\n    public static readonly Instance = new StringBufferFieldSubType();\n\n    public toBuffer(value: string): Uint8Array {\n        return encodeUtf8(value);\n    }\n\n    public toValue(array: Uint8Array): string {\n        return decodeUtf8(array);\n    }\n\n    public getSize(): number {\n        // Return `-1`, so `BufferLikeFieldDefinition` will\n        // convert this `value` into an `Uint8Array` (and cache the result),\n        // Then get the size from that `Uint8Array`\n        return -1;\n    }\n}\n\nexport const EMPTY_UINT8_ARRAY = new Uint8Array(0);\n\nexport abstract class BufferLikeFieldDefinition<\n    TType extends BufferFieldSubType<any, any> = BufferFieldSubType<\n        unknown,\n        unknown\n    >,\n    TOptions = void,\n    TOmitInitKey extends PropertyKey = never,\n    TTypeScriptType = TType[\"TTypeScriptType\"]\n> extends StructFieldDefinition<TOptions, TTypeScriptType, TOmitInitKey> {\n    public readonly type: TType;\n\n    public constructor(type: TType, options: TOptions) {\n        super(options);\n        this.type = type;\n    }\n\n    protected getDeserializeSize(struct: StructValue): number {\n        void struct;\n        return this.getSize();\n    }\n\n    /**\n     * When implemented in derived classes, creates a `StructFieldValue` for the current field definition.\n     */\n    public create(\n        options: Readonly<StructOptions>,\n        struct: StructValue,\n        value: TType[\"TTypeScriptType\"],\n        array?: Uint8Array\n    ): BufferLikeFieldValue<this> {\n        return new BufferLikeFieldValue(this, options, struct, value, array);\n    }\n\n    public override deserialize(\n        options: Readonly<StructOptions>,\n        stream: StructDeserializeStream,\n        struct: StructValue\n    ): BufferLikeFieldValue<this>;\n    public override deserialize(\n        options: Readonly<StructOptions>,\n        stream: StructAsyncDeserializeStream,\n        struct: StructValue\n    ): Promise<BufferLikeFieldValue<this>>;\n    public override deserialize(\n        options: Readonly<StructOptions>,\n        stream: StructDeserializeStream | StructAsyncDeserializeStream,\n        struct: StructValue\n    ): ValueOrPromise<BufferLikeFieldValue<this>> {\n        return SyncPromise.try(() => {\n            const size = this.getDeserializeSize(struct);\n            if (size === 0) {\n                return EMPTY_UINT8_ARRAY;\n            } else {\n                return stream.read(size);\n            }\n        })\n            .then((array) => {\n                const value = this.type.toValue(array);\n                return this.create(options, struct, value, array);\n            })\n            .valueOrPromise();\n    }\n}\n\nexport class BufferLikeFieldValue<\n    TDefinition extends BufferLikeFieldDefinition<\n        BufferFieldSubType<unknown, unknown>,\n        any,\n        any\n    >\n> extends StructFieldValue<TDefinition> {\n    protected array: Uint8Array | undefined;\n\n    public constructor(\n        definition: TDefinition,\n        options: Readonly<StructOptions>,\n        struct: StructValue,\n        value: TDefinition[\"TValue\"],\n        array?: Uint8Array\n    ) {\n        super(definition, options, struct, value);\n        this.array = array;\n    }\n\n    public override set(value: TDefinition[\"TValue\"]): void {\n        super.set(value);\n        // When value changes, clear the cached `array`\n        // It will be lazily calculated in `serialize()`\n        this.array = undefined;\n    }\n\n    public serialize(dataView: DataView, offset: number): void {\n        if (!this.array) {\n            this.array = this.definition.type.toBuffer(this.value);\n        }\n\n        new Uint8Array(\n            dataView.buffer,\n            dataView.byteOffset,\n            dataView.byteLength\n        ).set(this.array, offset);\n    }\n}\n", "import type { BufferFieldSubType } from \"./base.js\";\nimport { BufferLikeFieldDefinition } from \"./base.js\";\n\nexport interface FixedLengthBufferLikeFieldOptions {\n    length: number;\n}\n\nexport class FixedLengthBufferLikeFieldDefinition<\n    TType extends BufferFieldSubType = BufferFieldSubType,\n    TOptions extends FixedLengthBufferLikeFieldOptions = FixedLengthBufferLikeFieldOptions,\n    TTypeScriptType = TType[\"TTypeScriptType\"]\n> extends BufferLikeFieldDefinition<TType, TOptions, never, TTypeScriptType> {\n    public getSize(): number {\n        return this.options.length;\n    }\n}\n", "import type {\n    StructFieldDefinition,\n    StructOptions,\n    StructValue,\n} from \"../../basic/index.js\";\nimport { StructFieldValue } from \"../../basic/index.js\";\nimport type { KeysOfType } from \"../../utils.js\";\n\nimport type { BufferFieldSubType } from \"./base.js\";\nimport { BufferLikeFieldDefinition, BufferLikeFieldValue } from \"./base.js\";\n\nexport type LengthField<TFields> = KeysOfType<TFields, number | string>;\n\nexport interface VariableLengthBufferLikeFieldOptions<\n    TFields = object,\n    TLengthField extends LengthField<TFields> = any\n> {\n    /**\n     * The name of the field that contains the length of the buffer.\n     *\n     * This field must be a `number` or `string` (can't be `bigint`) field.\n     */\n    lengthField: TLengthField;\n\n    /**\n     * If the `lengthField` refers to a string field,\n     * what radix to use when converting the string to a number.\n     *\n     * @default 10\n     */\n    lengthFieldRadix?: number;\n}\n\nexport class VariableLengthBufferLikeFieldDefinition<\n    TType extends BufferFieldSubType = BufferFieldSubType,\n    TOptions extends VariableLengthBufferLikeFieldOptions = VariableLengthBufferLikeFieldOptions,\n    TTypeScriptType = TType[\"TTypeScriptType\"]\n> extends BufferLikeFieldDefinition<\n    TType,\n    TOptions,\n    TOptions[\"lengthField\"],\n    TTypeScriptType\n> {\n    public getSize(): number {\n        return 0;\n    }\n\n    protected override getDeserializeSize(struct: StructValue) {\n        let value = struct.value[this.options.lengthField] as number | string;\n        if (typeof value === \"string\") {\n            value = Number.parseInt(value, this.options.lengthFieldRadix ?? 10);\n        }\n        return value;\n    }\n\n    public override create(\n        options: Readonly<StructOptions>,\n        struct: StructValue,\n        value: TTypeScriptType,\n        array?: Uint8Array\n    ): VariableLengthBufferLikeStructFieldValue<this> {\n        return new VariableLengthBufferLikeStructFieldValue(\n            this,\n            options,\n            struct,\n            value,\n            array\n        );\n    }\n}\n\nexport class VariableLengthBufferLikeStructFieldValue<\n    TDefinition extends VariableLengthBufferLikeFieldDefinition = VariableLengthBufferLikeFieldDefinition\n> extends BufferLikeFieldValue<TDefinition> {\n    protected length: number | undefined;\n\n    protected lengthFieldValue: VariableLengthBufferLikeFieldLengthValue;\n\n    public constructor(\n        definition: TDefinition,\n        options: Readonly<StructOptions>,\n        struct: StructValue,\n        value: TDefinition[\"TValue\"],\n        array?: Uint8Array\n    ) {\n        super(definition, options, struct, value, array);\n\n        if (array) {\n            this.length = array.byteLength;\n        }\n\n        // Patch the associated length field.\n        const lengthField = this.definition.options.lengthField;\n\n        const originalValue = struct.get(lengthField);\n        this.lengthFieldValue = new VariableLengthBufferLikeFieldLengthValue(\n            originalValue,\n            this\n        );\n        struct.set(lengthField, this.lengthFieldValue);\n    }\n\n    public override getSize() {\n        if (this.length === undefined) {\n            this.length = this.definition.type.getSize(this.value);\n            if (this.length === -1) {\n                this.array = this.definition.type.toBuffer(this.value);\n                this.length = this.array.byteLength;\n            }\n        }\n\n        return this.length;\n    }\n\n    public override set(value: unknown) {\n        super.set(value);\n        this.array = undefined;\n        this.length = undefined;\n    }\n}\n\n// Not using `VariableLengthBufferLikeStructFieldValue` directly makes writing tests much easier...\ntype VariableLengthBufferLikeFieldValueLike = StructFieldValue<\n    StructFieldDefinition<VariableLengthBufferLikeFieldOptions, any, any>\n>;\n\nexport class VariableLengthBufferLikeFieldLengthValue extends StructFieldValue {\n    protected originalField: StructFieldValue;\n\n    protected bufferField: VariableLengthBufferLikeFieldValueLike;\n\n    public constructor(\n        originalField: StructFieldValue,\n        arrayBufferField: VariableLengthBufferLikeFieldValueLike\n    ) {\n        super(\n            originalField.definition,\n            originalField.options,\n            originalField.struct,\n            0\n        );\n        this.originalField = originalField;\n        this.bufferField = arrayBufferField;\n    }\n\n    public override getSize() {\n        return this.originalField.getSize();\n    }\n\n    public override get() {\n        let value: string | number = this.bufferField.getSize();\n\n        const originalValue = this.originalField.get();\n        if (typeof originalValue === \"string\") {\n            value = value.toString(\n                this.bufferField.definition.options.lengthFieldRadix ?? 10\n            );\n        }\n\n        return value;\n    }\n\n    public override set() {\n        // Ignore setting\n        // It will always be in sync with the buffer size\n    }\n\n    serialize(dataView: DataView, offset: number) {\n        this.originalField.set(this.get());\n        this.originalField.serialize(dataView, offset);\n    }\n}\n", "import type {\n    StructAsyncDeserializeStream,\n    StructDeserializeStream,\n    StructOptions,\n    StructValue,\n} from \"../basic/index.js\";\nimport { StructFieldDefinition, StructFieldValue } from \"../basic/index.js\";\nimport { SyncPromise } from \"../sync-promise.js\";\nimport type { ValueOrPromise } from \"../utils.js\";\n\nexport interface NumberFieldType {\n    signed: boolean;\n    size: number;\n    deserialize(array: Uint8Array, littleEndian: boolean): number;\n    serialize(\n        dataView: DataView,\n        offset: number,\n        value: number,\n        littleEndian: boolean\n    ): void;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace NumberFieldType {\n    export const Uint8: NumberFieldType = {\n        signed: false,\n        size: 1,\n        deserialize(array) {\n            return array[0]!;\n        },\n        serialize(dataView, offset, value) {\n            dataView.setUint8(offset, value);\n        },\n    };\n\n    export const Int8: NumberFieldType = {\n        signed: true,\n        size: 1,\n        deserialize(array) {\n            const value = Uint8.deserialize(array, false);\n            return (value << 24) >> 24;\n        },\n        serialize(dataView, offset, value) {\n            dataView.setInt8(offset, value);\n        },\n    };\n\n    export const Uint16: NumberFieldType = {\n        signed: false,\n        size: 2,\n        deserialize(array, littleEndian) {\n            // PERF: Chrome's `DataView#getUint16` uses inefficient operations,\n            // including branching, bit extending and 32-bit bit swapping.\n            // The best way should use 16-bit bit rotation and conditional move,\n            // like LLVM does for code similar to the below one.\n            // This code is much faster on V8, but the actual generated assembly is unknown.\n            return (\n                (((array[1]! << 8) | array[0]!) * (littleEndian as any)) |\n                (((array[0]! << 8) | array[1]!) * (!littleEndian as any))\n            );\n        },\n        serialize(dataView, offset, value, littleEndian) {\n            dataView.setUint16(offset, value, littleEndian);\n        },\n    };\n\n    export const Int16: NumberFieldType = {\n        signed: true,\n        size: 2,\n        deserialize(array, littleEndian) {\n            const value = Uint16.deserialize(array, littleEndian);\n            return (value << 16) >> 16;\n        },\n        serialize(dataView, offset, value, littleEndian) {\n            dataView.setInt16(offset, value, littleEndian);\n        },\n    };\n\n    export const Uint32: NumberFieldType = {\n        signed: false,\n        size: 4,\n        deserialize(array, littleEndian) {\n            const value = Int32.deserialize(array, littleEndian);\n            return value >>> 0;\n        },\n        serialize(dataView, offset, value, littleEndian) {\n            dataView.setUint32(offset, value, littleEndian);\n        },\n    };\n\n    export const Int32: NumberFieldType = {\n        signed: true,\n        size: 4,\n        deserialize(array, littleEndian) {\n            return (\n                (((array[3]! << 24) |\n                    (array[2]! << 16) |\n                    (array[1]! << 8) |\n                    array[0]!) *\n                    (littleEndian as any)) |\n                (((array[0]! << 24) |\n                    (array[1]! << 16) |\n                    (array[2]! << 8) |\n                    array[3]!) *\n                    (!littleEndian as any))\n            );\n        },\n        serialize(dataView, offset, value, littleEndian) {\n            dataView.setInt32(offset, value, littleEndian);\n        },\n    };\n}\n\nexport class NumberFieldDefinition<\n    TType extends NumberFieldType = NumberFieldType,\n    TTypeScriptType = number\n> extends StructFieldDefinition<void, TTypeScriptType> {\n    public readonly type: TType;\n\n    public constructor(type: TType, typescriptType?: TTypeScriptType) {\n        void typescriptType;\n        super();\n        this.type = type;\n    }\n\n    public getSize(): number {\n        return this.type.size;\n    }\n\n    public create(\n        options: Readonly<StructOptions>,\n        struct: StructValue,\n        value: TTypeScriptType\n    ): NumberFieldValue<this> {\n        return new NumberFieldValue(this, options, struct, value);\n    }\n\n    public override deserialize(\n        options: Readonly<StructOptions>,\n        stream: StructDeserializeStream,\n        struct: StructValue\n    ): NumberFieldValue<this>;\n    public override deserialize(\n        options: Readonly<StructOptions>,\n        stream: StructAsyncDeserializeStream,\n        struct: StructValue\n    ): Promise<NumberFieldValue<this>>;\n    public override deserialize(\n        options: Readonly<StructOptions>,\n        stream: StructDeserializeStream | StructAsyncDeserializeStream,\n        struct: StructValue\n    ): ValueOrPromise<NumberFieldValue<this>> {\n        return SyncPromise.try(() => {\n            return stream.read(this.getSize());\n        })\n            .then((array) => {\n                const value = this.type.deserialize(\n                    array,\n                    options.littleEndian\n                );\n                return this.create(options, struct, value as any);\n            })\n            .valueOrPromise();\n    }\n}\n\nexport class NumberFieldValue<\n    TDefinition extends NumberFieldDefinition<NumberFieldType, any>\n> extends StructFieldValue<TDefinition> {\n    public serialize(dataView: DataView, offset: number): void {\n        this.definition.type.serialize(\n            dataView,\n            offset,\n            this.value,\n            this.options.littleEndian\n        );\n    }\n}\n", "import type {\n    StructAsyncDeserializeStream,\n    StructDeserializeStream,\n    StructFieldDefinition,\n    StructFieldValue,\n    StructOptions,\n} from \"./basic/index.js\";\nimport {\n    STRUCT_VALUE_SYMBOL,\n    StructDefaultOptions,\n    StructValue,\n} from \"./basic/index.js\";\nimport { SyncPromise } from \"./sync-promise.js\";\nimport type {\n    BufferFieldSubType,\n    FixedLengthBufferLikeFieldOptions,\n    LengthField,\n    VariableLengthBufferLikeFieldOptions,\n} from \"./types/index.js\";\nimport {\n    BigIntFieldDefinition,\n    BigIntFieldType,\n    FixedLengthBufferLikeFieldDefinition,\n    NumberFieldDefinition,\n    NumberFieldType,\n    StringBufferFieldSubType,\n    Uint8ArrayBufferFieldSubType,\n    VariableLengthBufferLikeFieldDefinition,\n} from \"./types/index.js\";\nimport type { Evaluate, Identity, Overwrite, ValueOrPromise } from \"./utils.js\";\n\nexport interface StructLike<TValue> {\n    deserialize(\n        stream: StructDeserializeStream | StructAsyncDeserializeStream\n    ): Promise<TValue>;\n}\n\n/**\n * Extract the value type of the specified `Struct`\n */\nexport type StructValueType<T extends StructLike<unknown>> = Awaited<\n    ReturnType<T[\"deserialize\"]>\n>;\n\n/**\n * Create a new `Struct` type with `TDefinition` appended\n */\ntype AddFieldDescriptor<\n    TFields extends object,\n    TOmitInitKey extends PropertyKey,\n    TExtra extends object,\n    TPostDeserialized,\n    TFieldName extends PropertyKey,\n    TDefinition extends StructFieldDefinition<any, any, any>\n> = Identity<\n    Struct<\n        // Merge two types\n        // Evaluate immediately to optimize editor hover tooltip\n        Evaluate<TFields & Record<TFieldName, TDefinition[\"TValue\"]>>,\n        // Merge two `TOmitInitKey`s\n        TOmitInitKey | TDefinition[\"TOmitInitKey\"],\n        TExtra,\n        TPostDeserialized\n    >\n>;\n\n/**\n * Overload methods to add an array buffer like field\n */\ninterface ArrayBufferLikeFieldCreator<\n    TFields extends object,\n    TOmitInitKey extends PropertyKey,\n    TExtra extends object,\n    TPostDeserialized\n> {\n    /**\n     * Append a fixed-length array buffer like field to the `Struct`\n     *\n     * @param name Name of the field\n     * @param type `Array.SubType.ArrayBuffer` or `Array.SubType.String`\n     * @param options Fixed-length array options\n     * @param typeScriptType Type of the field in TypeScript.\n     * For example, if this field is a string, you can declare it as a string enum or literal union.\n     */\n    <\n        TName extends PropertyKey,\n        TType extends BufferFieldSubType<any, any>,\n        TTypeScriptType = TType[\"TTypeScriptType\"]\n    >(\n        name: TName,\n        type: TType,\n        options: FixedLengthBufferLikeFieldOptions,\n        typeScriptType?: TTypeScriptType\n    ): AddFieldDescriptor<\n        TFields,\n        TOmitInitKey,\n        TExtra,\n        TPostDeserialized,\n        TName,\n        FixedLengthBufferLikeFieldDefinition<\n            TType,\n            FixedLengthBufferLikeFieldOptions\n        >\n    >;\n\n    /**\n     * Append a variable-length array buffer like field to the `Struct`\n     */\n    <\n        TName extends PropertyKey,\n        TType extends BufferFieldSubType<any, any>,\n        TOptions extends VariableLengthBufferLikeFieldOptions<TFields>,\n        TTypeScriptType = TType[\"TTypeScriptType\"]\n    >(\n        name: TName,\n        type: TType,\n        options: TOptions,\n        typeScriptType?: TTypeScriptType\n    ): AddFieldDescriptor<\n        TFields,\n        TOmitInitKey,\n        TExtra,\n        TPostDeserialized,\n        TName,\n        VariableLengthBufferLikeFieldDefinition<TType, TOptions>\n    >;\n}\n\n/**\n * Similar to `ArrayBufferLikeFieldCreator`, but bind to `TType`\n */\ninterface BoundArrayBufferLikeFieldDefinitionCreator<\n    TFields extends object,\n    TOmitInitKey extends PropertyKey,\n    TExtra extends object,\n    TPostDeserialized,\n    TType extends BufferFieldSubType<any, any>\n> {\n    <TName extends PropertyKey, TTypeScriptType = TType[\"TTypeScriptType\"]>(\n        name: TName,\n        options: FixedLengthBufferLikeFieldOptions,\n        typeScriptType?: TTypeScriptType\n    ): AddFieldDescriptor<\n        TFields,\n        TOmitInitKey,\n        TExtra,\n        TPostDeserialized,\n        TName,\n        FixedLengthBufferLikeFieldDefinition<\n            TType,\n            FixedLengthBufferLikeFieldOptions,\n            TTypeScriptType\n        >\n    >;\n\n    <\n        TName extends PropertyKey,\n        TLengthField extends LengthField<TFields>,\n        TOptions extends VariableLengthBufferLikeFieldOptions<\n            TFields,\n            TLengthField\n        >,\n        TTypeScriptType = TType[\"TTypeScriptType\"]\n    >(\n        name: TName,\n        options: TOptions,\n        typeScriptType?: TTypeScriptType\n    ): AddFieldDescriptor<\n        TFields,\n        TOmitInitKey,\n        TExtra,\n        TPostDeserialized,\n        TName,\n        VariableLengthBufferLikeFieldDefinition<\n            TType,\n            TOptions,\n            TTypeScriptType\n        >\n    >;\n}\n\nexport type StructPostDeserialized<TFields, TPostDeserialized> = (\n    this: TFields,\n    object: TFields\n) => TPostDeserialized;\n\nexport type StructDeserializedResult<\n    TFields extends object,\n    TExtra extends object,\n    TPostDeserialized\n> = TPostDeserialized extends undefined\n    ? Overwrite<TExtra, TFields>\n    : TPostDeserialized;\n\nexport class Struct<\n    TFields extends object = Record<never, never>,\n    TOmitInitKey extends PropertyKey = never,\n    TExtra extends object = Record<never, never>,\n    TPostDeserialized = undefined\n> implements\n        StructLike<\n            StructDeserializedResult<TFields, TExtra, TPostDeserialized>\n        >\n{\n    public readonly TFields!: TFields;\n\n    public readonly TOmitInitKey!: TOmitInitKey;\n\n    public readonly TExtra!: TExtra;\n\n    public readonly TInit!: Evaluate<Omit<TFields, TOmitInitKey>>;\n\n    public readonly TDeserializeResult!: StructDeserializedResult<\n        TFields,\n        TExtra,\n        TPostDeserialized\n    >;\n\n    public readonly options: Readonly<StructOptions>;\n\n    private _size = 0;\n    /**\n     * Gets the static size (exclude fields that can change size at runtime)\n     */\n    public get size() {\n        return this._size;\n    }\n\n    private _fields: [\n        name: PropertyKey,\n        definition: StructFieldDefinition<any, any, any>\n    ][] = [];\n\n    private _extra: Record<PropertyKey, unknown> = {};\n\n    private _postDeserialized?: StructPostDeserialized<any, any> | undefined;\n\n    public constructor(options?: Partial<Readonly<StructOptions>>) {\n        this.options = { ...StructDefaultOptions, ...options };\n    }\n\n    /**\n     * Appends a `StructFieldDefinition` to the `Struct\n     */\n    public field<\n        TName extends PropertyKey,\n        TDefinition extends StructFieldDefinition<any, any, any>\n    >(\n        name: TName,\n        definition: TDefinition\n    ): AddFieldDescriptor<\n        TFields,\n        TOmitInitKey,\n        TExtra,\n        TPostDeserialized,\n        TName,\n        TDefinition\n    > {\n        for (const field of this._fields) {\n            if (field[0] === name) {\n                throw new Error(\n                    `This struct already have a field with name '${String(\n                        name\n                    )}'`\n                );\n            }\n        }\n\n        this._fields.push([name, definition]);\n\n        const size = definition.getSize();\n        this._size += size;\n\n        // Force cast `this` to another type\n        return this as any;\n    }\n\n    /**\n     * Merges (flats) another `Struct`'s fields and extra fields into this one.\n     */\n    public fields<TOther extends Struct<any, any, any, any>>(\n        other: TOther\n    ): Struct<\n        TFields & TOther[\"TFields\"],\n        TOmitInitKey | TOther[\"TOmitInitKey\"],\n        TExtra & TOther[\"TExtra\"],\n        TPostDeserialized\n    > {\n        for (const field of other._fields) {\n            this._fields.push(field);\n        }\n        this._size += other._size;\n        Object.defineProperties(\n            this._extra,\n            Object.getOwnPropertyDescriptors(other._extra)\n        );\n        return this as any;\n    }\n\n    private number<\n        TName extends PropertyKey,\n        TType extends NumberFieldType = NumberFieldType,\n        TTypeScriptType = number\n    >(name: TName, type: TType, typeScriptType?: TTypeScriptType) {\n        return this.field(\n            name,\n            new NumberFieldDefinition(type, typeScriptType)\n        );\n    }\n\n    /**\n     * Appends an `int8` field to the `Struct`\n     */\n    public int8<TName extends PropertyKey, TTypeScriptType = number>(\n        name: TName,\n        typeScriptType?: TTypeScriptType\n    ) {\n        return this.number(name, NumberFieldType.Int8, typeScriptType);\n    }\n\n    /**\n     * Appends an `uint8` field to the `Struct`\n     */\n    public uint8<TName extends PropertyKey, TTypeScriptType = number>(\n        name: TName,\n        typeScriptType?: TTypeScriptType\n    ) {\n        return this.number(name, NumberFieldType.Uint8, typeScriptType);\n    }\n\n    /**\n     * Appends an `int16` field to the `Struct`\n     */\n    public int16<TName extends PropertyKey, TTypeScriptType = number>(\n        name: TName,\n        typeScriptType?: TTypeScriptType\n    ) {\n        return this.number(name, NumberFieldType.Int16, typeScriptType);\n    }\n\n    /**\n     * Appends an `uint16` field to the `Struct`\n     */\n    public uint16<TName extends PropertyKey, TTypeScriptType = number>(\n        name: TName,\n        typeScriptType?: TTypeScriptType\n    ) {\n        return this.number(name, NumberFieldType.Uint16, typeScriptType);\n    }\n\n    /**\n     * Appends an `int32` field to the `Struct`\n     */\n    public int32<TName extends PropertyKey, TTypeScriptType = number>(\n        name: TName,\n        typeScriptType?: TTypeScriptType\n    ) {\n        return this.number(name, NumberFieldType.Int32, typeScriptType);\n    }\n\n    /**\n     * Appends an `uint32` field to the `Struct`\n     */\n    public uint32<TName extends PropertyKey, TTypeScriptType = number>(\n        name: TName,\n        typeScriptType?: TTypeScriptType\n    ) {\n        return this.number(name, NumberFieldType.Uint32, typeScriptType);\n    }\n\n    private bigint<\n        TName extends PropertyKey,\n        TType extends BigIntFieldType = BigIntFieldType,\n        TTypeScriptType = TType[\"TTypeScriptType\"]\n    >(name: TName, type: TType, typeScriptType?: TTypeScriptType) {\n        return this.field(\n            name,\n            new BigIntFieldDefinition(type, typeScriptType)\n        );\n    }\n\n    /**\n     * Appends an `int64` field to the `Struct`\n     *\n     * Requires native `BigInt` support\n     */\n    public int64<\n        TName extends PropertyKey,\n        TTypeScriptType = BigIntFieldType[\"TTypeScriptType\"]\n    >(name: TName, typeScriptType?: TTypeScriptType) {\n        return this.bigint(name, BigIntFieldType.Int64, typeScriptType);\n    }\n\n    /**\n     * Appends an `uint64` field to the `Struct`\n     *\n     * Requires native `BigInt` support\n     */\n    public uint64<\n        TName extends PropertyKey,\n        TTypeScriptType = BigIntFieldType[\"TTypeScriptType\"]\n    >(name: TName, typeScriptType?: TTypeScriptType) {\n        return this.bigint(name, BigIntFieldType.Uint64, typeScriptType);\n    }\n\n    private arrayBufferLike: ArrayBufferLikeFieldCreator<\n        TFields,\n        TOmitInitKey,\n        TExtra,\n        TPostDeserialized\n    > = (\n        name: PropertyKey,\n        type: BufferFieldSubType,\n        options:\n            | FixedLengthBufferLikeFieldOptions\n            | VariableLengthBufferLikeFieldOptions\n    ): any => {\n        if (\"length\" in options) {\n            return this.field(\n                name,\n                new FixedLengthBufferLikeFieldDefinition(type, options)\n            );\n        } else {\n            return this.field(\n                name,\n                new VariableLengthBufferLikeFieldDefinition(type, options)\n            );\n        }\n    };\n\n    public uint8Array: BoundArrayBufferLikeFieldDefinitionCreator<\n        TFields,\n        TOmitInitKey,\n        TExtra,\n        TPostDeserialized,\n        Uint8ArrayBufferFieldSubType\n    > = (name: PropertyKey, options: any, typeScriptType: any): any => {\n        return this.arrayBufferLike(\n            name,\n            Uint8ArrayBufferFieldSubType.Instance,\n            options,\n            typeScriptType\n        );\n    };\n\n    public string: BoundArrayBufferLikeFieldDefinitionCreator<\n        TFields,\n        TOmitInitKey,\n        TExtra,\n        TPostDeserialized,\n        StringBufferFieldSubType\n    > = (name: PropertyKey, options: any, typeScriptType: any): any => {\n        return this.arrayBufferLike(\n            name,\n            StringBufferFieldSubType.Instance,\n            options,\n            typeScriptType\n        );\n    };\n\n    /**\n     * Adds some extra properties into every `Struct` value.\n     *\n     * Extra properties will not affect serialize or deserialize process.\n     *\n     * Multiple calls to `extra` will merge all properties together.\n     *\n     * @param value\n     * An object containing properties to be added to the result value. Accessors and methods are also allowed.\n     */\n    public extra<\n        T extends Record<\n            // This trick disallows any keys that are already in `TValue`\n            Exclude<keyof T, Exclude<keyof T, keyof TFields>>,\n            never\n        >\n    >(\n        value: T & ThisType<Overwrite<Overwrite<TExtra, T>, TFields>>\n    ): Struct<TFields, TOmitInitKey, Overwrite<TExtra, T>, TPostDeserialized> {\n        Object.defineProperties(\n            this._extra,\n            Object.getOwnPropertyDescriptors(value)\n        );\n        return this as any;\n    }\n\n    /**\n     * Registers (or replaces) a custom callback to be run after deserialized.\n     *\n     * A callback returning `never` (always throw an error)\n     * will also change the return type of `deserialize` to `never`.\n     */\n    public postDeserialize(\n        callback: StructPostDeserialized<TFields, never>\n    ): Struct<TFields, TOmitInitKey, TExtra, never>;\n    /**\n     * Registers (or replaces) a custom callback to be run after deserialized.\n     *\n     * A callback returning `void` means it modify the result object in-place\n     * (or doesn't modify it at all), so `deserialize` will still return the result object.\n     */\n    public postDeserialize(\n        callback?: StructPostDeserialized<TFields, void>\n    ): Struct<TFields, TOmitInitKey, TExtra, undefined>;\n    /**\n     * Registers (or replaces) a custom callback to be run after deserialized.\n     *\n     * A callback returning anything other than `undefined`\n     * will `deserialize` to return that object instead.\n     */\n    public postDeserialize<TPostSerialize>(\n        callback?: StructPostDeserialized<TFields, TPostSerialize>\n    ): Struct<TFields, TOmitInitKey, TExtra, TPostSerialize>;\n    public postDeserialize(callback?: StructPostDeserialized<TFields, any>) {\n        this._postDeserialized = callback;\n        return this as any;\n    }\n\n    /**\n     * Deserialize a struct value from `stream`.\n     */\n    public deserialize(\n        stream: StructDeserializeStream\n    ): StructDeserializedResult<TFields, TExtra, TPostDeserialized>;\n    public deserialize(\n        stream: StructAsyncDeserializeStream\n    ): Promise<StructDeserializedResult<TFields, TExtra, TPostDeserialized>>;\n    public deserialize(\n        stream: StructDeserializeStream | StructAsyncDeserializeStream\n    ): ValueOrPromise<\n        StructDeserializedResult<TFields, TExtra, TPostDeserialized>\n    > {\n        const structValue = new StructValue(this._extra);\n\n        let promise = SyncPromise.resolve();\n\n        for (const [name, definition] of this._fields) {\n            promise = promise\n                .then(() =>\n                    definition.deserialize(\n                        this.options,\n                        stream as any,\n                        structValue\n                    )\n                )\n                .then((fieldValue) => {\n                    structValue.set(name, fieldValue);\n                });\n        }\n\n        return promise\n            .then(() => {\n                const object = structValue.value;\n\n                // Run `postDeserialized`\n                if (this._postDeserialized) {\n                    const override = this._postDeserialized.call(\n                        object,\n                        object\n                    );\n                    // If it returns a new value, use that as result\n                    // Otherwise it only inspects/mutates the object in place.\n                    if (override !== undefined) {\n                        return override;\n                    }\n                }\n\n                return object;\n            })\n            .valueOrPromise();\n    }\n\n    public serialize(init: Evaluate<Omit<TFields, TOmitInitKey>>): Uint8Array;\n    public serialize(\n        init: Evaluate<Omit<TFields, TOmitInitKey>>,\n        output: Uint8Array\n    ): number;\n    public serialize(\n        init: Evaluate<Omit<TFields, TOmitInitKey>>,\n        output?: Uint8Array\n    ): Uint8Array | number {\n        let structValue: StructValue;\n        if (STRUCT_VALUE_SYMBOL in init) {\n            structValue = (init as any)[STRUCT_VALUE_SYMBOL];\n            for (const [key, value] of Object.entries(init)) {\n                const fieldValue = structValue.get(key);\n                if (fieldValue) {\n                    fieldValue.set(value);\n                }\n            }\n        } else {\n            structValue = new StructValue({});\n            for (const [name, definition] of this._fields) {\n                const fieldValue = definition.create(\n                    this.options,\n                    structValue,\n                    (init as any)[name]\n                );\n                structValue.set(name, fieldValue);\n            }\n        }\n\n        let structSize = 0;\n        const fieldsInfo: { fieldValue: StructFieldValue; size: number }[] = [];\n\n        for (const [name] of this._fields) {\n            const fieldValue = structValue.get(name);\n            const size = fieldValue.getSize();\n            fieldsInfo.push({ fieldValue, size });\n            structSize += size;\n        }\n\n        let outputType = \"number\";\n        if (!output) {\n            output = new Uint8Array(structSize);\n            outputType = \"Uint8Array\";\n        }\n\n        const dataView = new DataView(\n            output.buffer,\n            output.byteOffset,\n            output.byteLength\n        );\n        let offset = 0;\n        for (const { fieldValue, size } of fieldsInfo) {\n            fieldValue.serialize(dataView, offset);\n            offset += size;\n        }\n\n        if (outputType === \"number\") {\n            return structSize;\n        } else {\n            return output;\n        }\n    }\n}\n", "import type { ValueOrPromise } from \"@yume-chan/struct\";\n\nimport type {\n    ReadableStreamDefaultController,\n    ReadableStreamDefaultReader,\n} from \"./stream.js\";\nimport { ReadableStream } from \"./stream.js\";\n\nexport type WrapReadableStreamStart<T> = (\n    controller: ReadableStreamDefaultController<T>\n) => ValueOrPromise<ReadableStream<T>>;\n\nexport interface ReadableStreamWrapper<T> {\n    start: WrapReadableStreamStart<T>;\n    cancel?(reason?: unknown): ValueOrPromise<void>;\n    close?(): ValueOrPromise<void>;\n}\n\nfunction getWrappedReadableStream<T>(\n    wrapper:\n        | ReadableStream<T>\n        | WrapReadableStreamStart<T>\n        | ReadableStreamWrapper<T>,\n    controller: ReadableStreamDefaultController<T>\n) {\n    if (\"start\" in wrapper) {\n        return wrapper.start(controller);\n    } else if (typeof wrapper === \"function\") {\n        return wrapper(controller);\n    } else {\n        // Can't use `wrapper instanceof ReadableStream`\n        // Because we want to be compatible with any ReadableStream-like objects\n        return wrapper;\n    }\n}\n\n/**\n * This class has multiple usages:\n *\n * 1. Get notified when the stream is cancelled or closed.\n * 2. Synchronously create a `ReadableStream` by asynchronously return another `ReadableStream`.\n * 3. Convert native `ReadableStream`s to polyfilled ones so they can `pipe` between.\n */\nexport class WrapReadableStream<T> extends ReadableStream<T> {\n    public readable!: ReadableStream<T>;\n\n    private reader!: ReadableStreamDefaultReader<T>;\n\n    public constructor(\n        wrapper:\n            | ReadableStream<T>\n            | WrapReadableStreamStart<T>\n            | ReadableStreamWrapper<T>\n    ) {\n        super({\n            start: async (controller) => {\n                // `start` is invoked before `ReadableStream`'s constructor finish,\n                // so using `this` synchronously causes\n                // \"Must call super constructor in derived class before accessing 'this' or returning from derived constructor\".\n                // Queue a microtask to avoid this.\n                await Promise.resolve();\n\n                this.readable = await getWrappedReadableStream(\n                    wrapper,\n                    controller\n                );\n                this.reader = this.readable.getReader();\n            },\n            cancel: async (reason) => {\n                await this.reader.cancel(reason);\n                if (\"cancel\" in wrapper) {\n                    await wrapper.cancel?.(reason);\n                }\n            },\n            pull: async (controller) => {\n                const result = await this.reader.read();\n                if (result.done) {\n                    controller.close();\n                    if (\"close\" in wrapper) {\n                        await wrapper.close?.();\n                    }\n                } else {\n                    controller.enqueue(result.value);\n                }\n            },\n        });\n    }\n}\n", "import { PromiseResolver } from \"@yume-chan/async\";\nimport type { ValueOrPromise } from \"@yume-chan/struct\";\n\nimport type {\n    ReadableStream,\n    ReadableStreamDefaultController,\n    WritableStreamDefaultWriter,\n} from \"./stream.js\";\nimport { WritableStream } from \"./stream.js\";\nimport { WrapReadableStream } from \"./wrap-readable.js\";\n\nconst NOOP = () => {\n    // no-op\n};\n\nexport interface DuplexStreamFactoryOptions {\n    /**\n     * Callback when any `ReadableStream` is cancelled (the user doesn't need any more data),\n     * or `WritableStream` is ended (the user won't produce any more data),\n     * or `DuplexStreamFactory#close` is called.\n     *\n     * Usually you want to let the other peer know that the duplex stream should be closed.\n     *\n     * `dispose` will automatically be called after `close` completes,\n     * but if you want to wait another peer for a close confirmation and call\n     * `DuplexStreamFactory#dispose` yourself, you can return `false`\n     * (or a `Promise` that resolves to `false`) to disable the automatic call.\n     */\n    close?: (() => ValueOrPromise<boolean | void>) | undefined;\n\n    /**\n     * Callback when any `ReadableStream` is closed (the other peer doesn't produce any more data),\n     * or `WritableStream` is aborted (the other peer can't receive any more data),\n     * or `DuplexStreamFactory#abort` is called.\n     *\n     * Usually indicates the other peer has closed the duplex stream. You can clean up\n     * any resources you have allocated now.\n     */\n    dispose?: (() => void | Promise<void>) | undefined;\n}\n\n/**\n * A factory for creating a duplex stream.\n *\n * It can create multiple `ReadableStream`s and `WritableStream`s,\n * when any of them is closed, all other streams will be closed as well.\n */\nexport class DuplexStreamFactory<R, W> {\n    private readableControllers: ReadableStreamDefaultController<R>[] = [];\n    private writers: WritableStreamDefaultWriter<W>[] = [];\n\n    private _writableClosed = false;\n    public get writableClosed() {\n        return this._writableClosed;\n    }\n\n    private _closed = new PromiseResolver<void>();\n    public get closed() {\n        return this._closed.promise;\n    }\n\n    private options: DuplexStreamFactoryOptions;\n\n    public constructor(options?: DuplexStreamFactoryOptions) {\n        this.options = options ?? {};\n    }\n\n    public wrapReadable(readable: ReadableStream<R>): WrapReadableStream<R> {\n        return new WrapReadableStream<R>({\n            start: (controller) => {\n                this.readableControllers.push(controller);\n                return readable;\n            },\n            cancel: async () => {\n                // cancel means the local peer wants to close the connection.\n                await this.close();\n            },\n            close: async () => {\n                // stream end means the remote peer closed the connection first.\n                await this.dispose();\n            },\n        });\n    }\n\n    public createWritable(stream: WritableStream<W>): WritableStream<W> {\n        const writer = stream.getWriter();\n        this.writers.push(writer);\n\n        // `WritableStream` has no way to tell if the remote peer has closed the connection.\n        // So it only triggers `close`.\n        return new WritableStream<W>({\n            write: async (chunk) => {\n                await writer.write(chunk);\n            },\n            abort: async (reason) => {\n                await writer.abort(reason);\n                await this.close();\n            },\n            close: async () => {\n                await writer.close().catch(NOOP);\n                await this.close();\n            },\n        });\n    }\n\n    public async close() {\n        if (this._writableClosed) {\n            return;\n        }\n        this._writableClosed = true;\n\n        // Call `close` first, so it can still write data to `WritableStream`s.\n        if ((await this.options.close?.()) !== false) {\n            // `close` can return `false` to disable automatic `dispose`.\n            await this.dispose();\n        }\n\n        for (const writer of this.writers) {\n            await writer.close().catch(NOOP);\n        }\n    }\n\n    public async dispose() {\n        this._writableClosed = true;\n        this._closed.resolve();\n\n        for (const controller of this.readableControllers) {\n            try {\n                controller.close();\n            } catch {\n                // ignore\n            }\n        }\n\n        await this.options.dispose?.();\n    }\n}\n", "import type { ReadableWritablePair } from \"./stream.js\";\nimport { WritableStream } from \"./stream.js\";\n\n/**\n * Pipe `pair.readable` to `writable`, then returns `pair.writable`.\n *\n * This is the opposite of `ReadableStream#pipeThrough()`.\n *\n * @param writable The `WritableStream` to write to.\n * @param pair A `TransformStream` that converts chunks.\n * @returns `pair`'s `writable` stream.\n */\nexport function pipeFrom<W, T>(\n    writable: WritableStream<W>,\n    pair: ReadableWritablePair<W, T>\n) {\n    const writer = pair.writable.getWriter();\n    const pipe = pair.readable.pipeTo(writable);\n    return new WritableStream<T>({\n        async write(chunk) {\n            await writer.write(chunk);\n        },\n        async close() {\n            await writer.close();\n            await pipe;\n        },\n    });\n}\n", "import {\n    getBigUint64,\n    setBigUint64,\n} from \"@yume-chan/dataview-bigint-polyfill/esm/fallback.js\";\n\nconst BigInt0 = BigInt(0);\nconst BigInt1 = BigInt(1);\nconst BigInt2 = BigInt(2);\nconst BigInt64 = BigInt(64);\n\n/**\n * Gets the `BigInt` value at the specified byte offset and length from the start of the view. There is\n * no alignment constraint; multi-byte values may be fetched from any offset.\n *\n * Only supports Big-Endian, because that's what ADB uses.\n * @param byteOffset The place in the buffer at which the value should be retrieved.\n */\nexport function getBigUint(\n    dataView: DataView,\n    byteOffset: number,\n    length: number\n): bigint {\n    let result = BigInt0;\n\n    // Currently `length` must be a multiplication of 8\n    // Support for arbitrary length can be easily added\n\n    for (let i = byteOffset; i < byteOffset + length; i += 8) {\n        result <<= BigInt64;\n        const value = getBigUint64(dataView, i, false);\n        result += value;\n    }\n\n    return result;\n}\n\n/**\n * Stores an arbitrary-precision positive `BigInt` value at the specified byte offset from the start of the view.\n * @param byteOffset The place in the buffer at which the value should be set.\n * @param value The value to set.\n * @param littleEndian If `false` or `undefined`, a big-endian value should be written,\n * otherwise a little-endian value should be written.\n */\nexport function setBigUint(\n    dataView: DataView,\n    byteOffset: number,\n    value: bigint,\n    littleEndian?: boolean\n) {\n    const start = byteOffset;\n\n    if (littleEndian) {\n        while (value > BigInt0) {\n            setBigUint64(dataView, byteOffset, value, true);\n            byteOffset += 8;\n            value >>= BigInt64;\n        }\n    } else {\n        // Because we don't know how long (in bits) the `value` is,\n        // Convert it to an array of `uint64` first.\n        const uint64Array: bigint[] = [];\n        while (value > BigInt0) {\n            uint64Array.push(BigInt.asUintN(64, value));\n            value >>= BigInt64;\n        }\n\n        for (let i = uint64Array.length - 1; i >= 0; i -= 1) {\n            setBigUint64(dataView, byteOffset, uint64Array[i]!, false);\n            byteOffset += 8;\n        }\n    }\n\n    return byteOffset - start;\n}\n\n// These values are correct only if\n// modulus length is 2048 and\n// public exponent (e) is 65537\n// Anyway, that's how this library generates keys\n\n// To support other parameters,\n// a proper ASN.1 parser can be used\n\n// References:\n//\n//   https://tools.ietf.org/html/rfc8017#appendix-A.1.2\n//   PKCS #1: RSA Cryptography Specifications Version 2.2\n//     A.1.2.  RSA Private Key Syntax\n//\n//   https://lapo.it/asn1js/\n//   https://github.com/lapo-luchini/asn1js\n//   ASN.1 JavaScript decoder\n//\n//   https://www.itu.int/rec/T-REC-X.690-201508-I/en\n//   X.690: Specification of Distinguished Encoding Rules (DER)\n\nconst RsaPrivateKeyNOffset = 38;\nconst RsaPrivateKeyNLength = 2048 / 8;\nconst RsaPrivateKeyDOffset = 303;\nconst RsaPrivateKeyDLength = 2048 / 8;\n\nexport function parsePrivateKey(key: Uint8Array): [n: bigint, d: bigint] {\n    const view = new DataView(key.buffer, key.byteOffset, key.byteLength);\n    const n = getBigUint(view, RsaPrivateKeyNOffset, RsaPrivateKeyNLength);\n    const d = getBigUint(view, RsaPrivateKeyDOffset, RsaPrivateKeyDLength);\n    return [n, d];\n}\n\n// Taken from https://stackoverflow.com/a/51562038\n// I can't understand, but it does work\n// Only used with numbers smaller than 2^32 so doesn't need BigInt\nexport function modInverse(a: number, m: number) {\n    a = ((a % m) + m) % m;\n    if (!a || m < 2) {\n        return NaN; // invalid input\n    }\n    // find the gcd\n    const s = [];\n    let b = m;\n    while (b) {\n        [a, b] = [b, a % b];\n        s.push({ a, b });\n    }\n    if (a !== 1) {\n        return NaN; // inverse does not exists\n    }\n    // find the inverse\n    let x = 1;\n    let y = 0;\n    for (let i = s.length - 2; i >= 0; i -= 1) {\n        [x, y] = [y, x - y * Math.floor(s[i]!.a / s[i]!.b)];\n    }\n    return ((y % m) + m) % m;\n}\n\nexport function calculatePublicKeyLength() {\n    return 4 + 4 + 2048 / 8 + 2048 / 8 + 4;\n}\n\nexport function calculatePublicKey(privateKey: Uint8Array): Uint8Array;\nexport function calculatePublicKey(\n    privateKey: Uint8Array,\n    output: Uint8Array\n): number;\nexport function calculatePublicKey(\n    privateKey: Uint8Array,\n    output?: Uint8Array\n): Uint8Array | number {\n    // Android has its own public key generation algorithm\n    // See https://android.googlesource.com/platform/system/core.git/+/91784040db2b9273687f88d8b95f729d4a61ecc2/libcrypto_utils/android_pubkey.cpp#111\n\n    // The public key is an array of\n    //\n    // [\n    //   modulusLengthInWords, // 32-bit integer, a \"word\" is 32-bit so it must be 2048 / 8 / 4\n    //                         // Actually the comment in Android source code was wrong\n    //   n0inv,                // 32-bit integer, the modular inverse of (low 32 bits of n)\n    //   modulus,              // n\n    //   rr,                   // Montgomery parameter R^2\n    //   exponent,             // 32-bit integer, must be 65537\n    // ]\n    //\n    // (All in little endian)\n    // See https://android.googlesource.com/platform/system/core.git/+/91784040db2b9273687f88d8b95f729d4a61ecc2/libcrypto_utils/android_pubkey.cpp#38\n\n    // extract `n` from private key\n    const [n] = parsePrivateKey(privateKey);\n\n    let outputType: \"Uint8Array\" | \"number\";\n    const outputLength = calculatePublicKeyLength();\n    if (!output) {\n        output = new Uint8Array(outputLength);\n        outputType = \"Uint8Array\";\n    } else {\n        if (output.byteLength < outputLength) {\n            throw new Error(\"output buffer is too small\");\n        }\n\n        outputType = \"number\";\n    }\n\n    const outputView = new DataView(\n        output.buffer,\n        output.byteOffset,\n        output.byteLength\n    );\n    let outputOffset = 0;\n\n    // modulusLengthInWords\n    outputView.setUint32(outputOffset, 2048 / 8 / 4, true);\n    outputOffset += 4;\n\n    // Calculate `n0inv`\n    // Don't know why need to multiple -1\n    // Didn't exist in Android codebase\n    const n0inv = modInverse(\n        Number(BigInt.asUintN(32, n) * BigInt(-1)),\n        2 ** 32\n    );\n    outputView.setUint32(outputOffset, n0inv, true);\n    outputOffset += 4;\n\n    // Write n\n    setBigUint(outputView, outputOffset, n, true);\n    outputOffset += 256;\n\n    // Calculate rr = (2^(rsa_size)) ^ 2 mod n\n    const rr = BigInt(2) ** BigInt(4096) % n;\n    outputOffset += setBigUint(outputView, outputOffset, rr, true);\n\n    // exponent\n    outputView.setUint32(outputOffset, 65537, true);\n    outputOffset += 4;\n\n    if (outputType === \"Uint8Array\") {\n        return output;\n    } else {\n        return outputLength;\n    }\n}\n\n/**\n * Modular exponentiation.\n *\n * Calculate `(base ** exponent) % modulus` without actually calculating `(base ** exponent)`.\n *\n * See https://en.wikipedia.org/wiki/Modular_exponentiation#Implementation_in_Lua\n */\nexport function powMod(\n    base: bigint,\n    exponent: bigint,\n    modulus: bigint\n): bigint {\n    if (modulus === BigInt1) {\n        return BigInt0;\n    }\n\n    let r = BigInt1;\n    base = base % modulus;\n\n    while (exponent > BigInt0) {\n        if (BigInt.asUintN(1, exponent) === BigInt1) {\n            r = (r * base) % modulus;\n        }\n\n        exponent >>= BigInt1;\n        base = base ** BigInt2 % modulus;\n    }\n\n    return r;\n}\n\nexport const SHA1_DIGEST_LENGTH = 20;\n\nexport const ASN1_SEQUENCE = 0x30;\nexport const ASN1_OCTET_STRING = 0x04;\nexport const ASN1_NULL = 0x05;\nexport const ASN1_OID = 0x06;\n\n// PKCS#1 SHA-1 hash digest info\nexport const SHA1_DIGEST_INFO = new Uint8Array([\n    ASN1_SEQUENCE,\n    0x0d + SHA1_DIGEST_LENGTH,\n    ASN1_SEQUENCE,\n    0x09,\n    // SHA-1 (1 3 14 3 2 26)\n    ASN1_OID,\n    0x05,\n    1 * 40 + 3,\n    14,\n    3,\n    2,\n    26,\n    ASN1_NULL,\n    0x00,\n    ASN1_OCTET_STRING,\n    SHA1_DIGEST_LENGTH,\n]);\n\n// SubtleCrypto.sign() will hash the given data and sign the hash\n// But we don't need the hashing step\n// (In another word, ADB just requires the client to\n// encrypt the given data with its private key)\n// However SubtileCrypto.encrypt() doesn't accept 'RSASSA-PKCS1-v1_5' algorithm\n// So we need to implement the encryption by ourself\nexport function sign(privateKey: Uint8Array, data: Uint8Array): Uint8Array {\n    const [n, d] = parsePrivateKey(privateKey);\n\n    // PKCS#1 padding\n    const padded = new Uint8Array(256);\n    let index = 0;\n\n    padded[index] = 0;\n    index += 1;\n\n    padded[index] = 1;\n    index += 1;\n\n    const fillLength =\n        padded.length - SHA1_DIGEST_INFO.length - data.length - 1;\n    while (index < fillLength) {\n        padded[index] = 0xff;\n        index += 1;\n    }\n\n    padded[index] = 0;\n    index += 1;\n\n    padded.set(SHA1_DIGEST_INFO, index);\n    index += SHA1_DIGEST_INFO.length;\n\n    padded.set(data, index);\n\n    // Encryption\n    // signature = padded ** d % n\n    const view = new DataView(padded.buffer);\n    const signature = powMod(getBigUint(view, 0, view.byteLength), d, n);\n\n    // `padded` is not used anymore,\n    // re-use the buffer to store the result\n    setBigUint(view, 0, signature, false);\n\n    return padded;\n}\n", "import { ConsumableTransformStream } from \"@yume-chan/stream-extra\";\nimport Struct from \"@yume-chan/struct\";\n\nexport enum AdbCommand {\n    Auth = 0x48545541, // 'AUTH'\n    Close = 0x45534c43, // 'CLSE'\n    Connect = 0x4e584e43, // 'CNXN'\n    OK = 0x59414b4f, // 'OKAY'\n    Open = 0x4e45504f, // 'OPEN'\n    Write = 0x45545257, // 'WRTE'\n}\n\nexport const AdbPacketHeader = new Struct({ littleEndian: true })\n    .uint32(\"command\")\n    .uint32(\"arg0\")\n    .uint32(\"arg1\")\n    .uint32(\"payloadLength\")\n    .uint32(\"checksum\")\n    .int32(\"magic\");\n\nexport type AdbPacketHeader = (typeof AdbPacketHeader)[\"TDeserializeResult\"];\n\ntype AdbPacketHeaderInit = (typeof AdbPacketHeader)[\"TInit\"];\n\nexport const AdbPacket = new Struct({ littleEndian: true })\n    .fields(AdbPacketHeader)\n    .uint8Array(\"payload\", { lengthField: \"payloadLength\" });\n\nexport type AdbPacket = (typeof AdbPacket)[\"TDeserializeResult\"];\n\n/**\n * `AdbPacketData` contains all the useful fields of `AdbPacket`.\n *\n * `AdbBackend#connect` will return a `ReadableStream<AdbPacketData>`,\n * so each backend can encode `AdbPacket` in different ways.\n *\n * `AdbBackend#connect` will return a `WritableStream<AdbPacketInit>`,\n * however, `AdbPacketDispatcher` will transform `AdbPacketData` to `AdbPacketInit` for you,\n * so `AdbSocket#writable#write` only needs `AdbPacketData`.\n */\nexport type AdbPacketData = Omit<\n    (typeof AdbPacket)[\"TInit\"],\n    \"checksum\" | \"magic\"\n>;\n\nexport type AdbPacketInit = (typeof AdbPacket)[\"TInit\"];\n\nexport function calculateChecksum(payload: Uint8Array): number {\n    return payload.reduce((result, item) => result + item, 0);\n}\n\nexport class AdbPacketSerializeStream extends ConsumableTransformStream<\n    AdbPacketInit,\n    Uint8Array\n> {\n    public constructor() {\n        const headerBuffer = new Uint8Array(AdbPacketHeader.size);\n        super({\n            transform: async (chunk, controller) => {\n                const init = chunk as AdbPacketInit & AdbPacketHeaderInit;\n                init.payloadLength = init.payload.byteLength;\n\n                AdbPacketHeader.serialize(init, headerBuffer);\n                await controller.enqueue(headerBuffer);\n\n                if (init.payload.byteLength) {\n                    // USB protocol preserves packet boundaries,\n                    // so we must write payload separately as native ADB does,\n                    // otherwise the read operation on device will fail.\n                    await controller.enqueue(init.payload);\n                }\n            },\n        });\n    }\n}\n", "// Array is faster than object literal or `Map`\nconst charToIndex: number[] = [];\nconst indexToChar: number[] = [];\nconst paddingChar = \"=\".charCodeAt(0);\n\nfunction addRange(start: string, end: string) {\n    const charCodeStart = start.charCodeAt(0);\n    const charCodeEnd = end.charCodeAt(0);\n\n    for (let charCode = charCodeStart; charCode <= charCodeEnd; charCode += 1) {\n        charToIndex[charCode] = indexToChar.length;\n        indexToChar.push(charCode);\n    }\n}\n\naddRange(\"A\", \"Z\");\naddRange(\"a\", \"z\");\naddRange(\"0\", \"9\");\naddRange(\"+\", \"+\");\naddRange(\"/\", \"/\");\n\n/**\n * Calculate the required length of the output buffer for the given input length.\n *\n * @param inputLength Length of the input in bytes\n * @returns Length of the output in bytes\n */\nexport function calculateBase64EncodedLength(\n    inputLength: number\n): [outputLength: number, paddingLength: number] {\n    const remainder = inputLength % 3;\n    const paddingLength = remainder !== 0 ? 3 - remainder : 0;\n    return [((inputLength + paddingLength) / 3) * 4, paddingLength];\n}\n\n/**\n * Encode the given input buffer into base64.\n *\n * @param input The input buffer\n * @returns The encoded output buffer\n */\nexport function encodeBase64(input: Uint8Array): Uint8Array;\n/**\n * Encode the given input into base64 and write it to the output buffer.\n *\n * The output buffer must be at least as long as the value returned by `calculateBase64EncodedLength`.\n * It can points to the same buffer as the input, as long as `output.offset <= input.offset - input.length / 3`,\n * or `output.offset >= input.offset - 1`\n *\n * @param input The input buffer\n * @param output The output buffer\n * @returns The number of bytes written to the output buffer\n */\nexport function encodeBase64(input: Uint8Array, output: Uint8Array): number;\nexport function encodeBase64(\n    input: Uint8Array,\n    output?: Uint8Array\n): Uint8Array | number {\n    const [outputLength, paddingLength] = calculateBase64EncodedLength(\n        input.length\n    );\n\n    if (!output) {\n        output = new Uint8Array(outputLength);\n        encodeForward(input, output, paddingLength);\n        return output;\n    } else {\n        if (output.length < outputLength) {\n            throw new Error(\"output buffer is too small\");\n        }\n\n        output = output.subarray(0, outputLength);\n\n        // When input and output are on same ArrayBuffer,\n        // we check if it's possible to encode in-place.\n        if (input.buffer !== output.buffer) {\n            encodeForward(input, output, paddingLength);\n        } else if (\n            output.byteOffset + output.length - (paddingLength + 1) <=\n            input.byteOffset + input.length\n        ) {\n            // Output ends before input ends\n            // So output won't catch up with input.\n\n            // Depends on padding length,\n            // it's possible to write 1-3 bytes after input ends.\n            // spell: disable-next-line\n            // | aaaaaabb |          |          |          |\n            // |  aaaaaa  |  bb0000  |    =     |    =     |\n            //\n            // spell: disable-next-line\n            // | aaaaaabb | bbbbcccc |          |          |\n            // |  aaaaaa  |  bbbbbb  |  cccc00  |    =     |\n            //\n            // spell: disable-next-line\n            // | aaaaaabb | bbbbcccc | ccdddddd |          |\n            // |  aaaaaa  |  bbbbbb  |  cccccc  |  dddddd  |\n\n            // Must encode forwards.\n            encodeForward(input, output, paddingLength);\n        } else if (output.byteOffset >= input.byteOffset - 1) {\n            // Output starts after input starts\n            // So in backwards, output can't catch up with input.\n\n            // Because first 3 bytes becomes 4 bytes,\n            // it's possible to write 1 byte before input starts.\n            // spell: disable-next-line\n            // |          | aaaaaabb | bbbbcccc | ccdddddd |\n            // |  aaaaaa  |  bbbbbb  |  cccccc  |  dddddd  |\n\n            // Must encode backwards.\n            encodeBackward(input, output, paddingLength);\n        } else {\n            // Input is in the middle of output,\n            // not possible to read neither first or last three bytes,\n            throw new Error(\"input and output cannot overlap\");\n        }\n\n        return outputLength;\n    }\n}\n\nfunction encodeForward(\n    input: Uint8Array,\n    output: Uint8Array,\n    paddingLength: number\n) {\n    let inputIndex = 0;\n    let outputIndex = 0;\n\n    while (inputIndex < input.length - 2) {\n        /* cspell: disable-next-line */\n        // aaaaaabb\n        const x = input[inputIndex]!;\n        inputIndex += 1;\n\n        /* cspell: disable-next-line */\n        // bbbbcccc\n        const y = input[inputIndex]!;\n        inputIndex += 1;\n\n        /* cspell: disable-next-line */\n        // ccdddddd\n        const z = input[inputIndex]!;\n        inputIndex += 1;\n\n        output[outputIndex] = indexToChar[x >> 2]!;\n        outputIndex += 1;\n\n        output[outputIndex] = indexToChar[((x & 0b11) << 4) | (y >> 4)]!;\n        outputIndex += 1;\n\n        output[outputIndex] = indexToChar[((y & 0b1111) << 2) | (z >> 6)]!;\n        outputIndex += 1;\n\n        output[outputIndex] = indexToChar[z & 0b111111]!;\n        outputIndex += 1;\n    }\n\n    if (paddingLength === 2) {\n        /* cspell: disable-next-line */\n        // aaaaaabb\n        const x = input[inputIndex]!;\n        inputIndex += 1;\n\n        output[outputIndex] = indexToChar[x >> 2]!;\n        outputIndex += 1;\n\n        output[outputIndex] = indexToChar[(x & 0b11) << 4]!;\n        outputIndex += 1;\n\n        output[outputIndex] = paddingChar;\n        outputIndex += 1;\n\n        output[outputIndex] = paddingChar;\n    } else if (paddingLength === 1) {\n        /* cspell: disable-next-line */\n        // aaaaaabb\n        const x = input[inputIndex]!;\n        inputIndex += 1;\n\n        /* cspell: disable-next-line */\n        // bbbbcccc\n        const y = input[inputIndex]!;\n        inputIndex += 1;\n\n        output[outputIndex] = indexToChar[x >> 2]!;\n        outputIndex += 1;\n\n        output[outputIndex] = indexToChar[((x & 0b11) << 4) | (y >> 4)]!;\n        outputIndex += 1;\n\n        output[outputIndex] = indexToChar[(y & 0b1111) << 2]!;\n        outputIndex += 1;\n\n        output[outputIndex] = paddingChar;\n    }\n}\n\nfunction encodeBackward(\n    input: Uint8Array,\n    output: Uint8Array,\n    paddingLength: number\n) {\n    let inputIndex = input.length - 1;\n    let outputIndex = output.length - 1;\n\n    if (paddingLength === 2) {\n        /* cspell: disable-next-line */\n        // aaaaaabb\n        const x = input[inputIndex]!;\n        inputIndex -= 1;\n\n        output[outputIndex] = paddingChar;\n        outputIndex -= 1;\n\n        output[outputIndex] = paddingChar;\n        outputIndex -= 1;\n\n        output[outputIndex] = indexToChar[(x & 0b11) << 4]!;\n        outputIndex -= 1;\n\n        output[outputIndex] = indexToChar[x >> 2]!;\n        outputIndex -= 1;\n    } else if (paddingLength === 1) {\n        /* cspell: disable-next-line */\n        // bbbbcccc\n        const y = input[inputIndex]!;\n        inputIndex -= 1;\n\n        /* cspell: disable-next-line */\n        // aaaaaabb\n        const x = input[inputIndex]!;\n        inputIndex -= 1;\n\n        output[outputIndex] = paddingChar;\n        outputIndex -= 1;\n\n        output[outputIndex] = indexToChar[(y & 0b1111) << 2]!;\n        outputIndex -= 1;\n\n        output[outputIndex] = indexToChar[((x & 0b11) << 4) | (y >> 4)]!;\n        outputIndex -= 1;\n\n        output[outputIndex] = indexToChar[x >> 2]!;\n        outputIndex -= 1;\n    }\n\n    while (inputIndex >= 0) {\n        /* cspell: disable-next-line */\n        // ccdddddd\n        const z = input[inputIndex]!;\n        inputIndex -= 1;\n\n        /* cspell: disable-next-line */\n        // bbbbcccc\n        const y = input[inputIndex]!;\n        inputIndex -= 1;\n\n        /* cspell: disable-next-line */\n        // aaaaaabb\n        const x = input[inputIndex]!;\n        inputIndex -= 1;\n\n        output[outputIndex] = indexToChar[z & 0b111111]!;\n        outputIndex -= 1;\n\n        output[outputIndex] = indexToChar[((y & 0b1111) << 2) | (z >> 6)]!;\n        outputIndex -= 1;\n\n        output[outputIndex] = indexToChar[((x & 0b11) << 4) | (y >> 4)]!;\n        outputIndex -= 1;\n\n        output[outputIndex] = indexToChar[x >> 2]!;\n        outputIndex -= 1;\n    }\n}\n\nexport function decodeBase64(input: string): Uint8Array {\n    let padding: number;\n    if (input[input.length - 2] === \"=\") {\n        padding = 2;\n    } else if (input[input.length - 1] === \"=\") {\n        padding = 1;\n    } else {\n        padding = 0;\n    }\n\n    const result = new Uint8Array((input.length / 4) * 3 - padding);\n    let sIndex = 0;\n    let dIndex = 0;\n\n    while (sIndex < input.length - (padding !== 0 ? 4 : 0)) {\n        const a = charToIndex[input.charCodeAt(sIndex)]!;\n        sIndex += 1;\n\n        const b = charToIndex[input.charCodeAt(sIndex)]!;\n        sIndex += 1;\n\n        const c = charToIndex[input.charCodeAt(sIndex)]!;\n        sIndex += 1;\n\n        const d = charToIndex[input.charCodeAt(sIndex)]!;\n        sIndex += 1;\n\n        result[dIndex] = (a << 2) | ((b & 0b11_0000) >> 4);\n        dIndex += 1;\n\n        result[dIndex] = ((b & 0b1111) << 4) | ((c & 0b11_1100) >> 2);\n        dIndex += 1;\n\n        result[dIndex] = ((c & 0b11) << 6) | d;\n        dIndex += 1;\n    }\n\n    if (padding === 1) {\n        const a = charToIndex[input.charCodeAt(sIndex)]!;\n        sIndex += 1;\n\n        const b = charToIndex[input.charCodeAt(sIndex)]!;\n        sIndex += 1;\n\n        const c = charToIndex[input.charCodeAt(sIndex)]!;\n\n        result[dIndex] = (a << 2) | ((b & 0b11_0000) >> 4);\n        dIndex += 1;\n\n        result[dIndex] = ((b & 0b1111) << 4) | ((c & 0b11_1100) >> 2);\n    } else if (padding === 2) {\n        const a = charToIndex[input.charCodeAt(sIndex)]!;\n        sIndex += 1;\n\n        const b = charToIndex[input.charCodeAt(sIndex)]!;\n\n        result[dIndex] = (a << 2) | ((b & 0b11_0000) >> 4);\n    }\n\n    return result;\n}\n", "import { PromiseResolver } from \"@yume-chan/async\";\nimport type { Disposable } from \"@yume-chan/event\";\nimport type { ValueOrPromise } from \"@yume-chan/struct\";\n\nimport {\n    calculatePublicKey,\n    calculatePublicKeyLength,\n    sign,\n} from \"./crypto.js\";\nimport type { AdbPacketData } from \"./packet.js\";\nimport { AdbCommand } from \"./packet.js\";\nimport { calculateBase64EncodedLength, encodeBase64 } from \"./utils/index.js\";\n\nexport type AdbKeyIterable = Iterable<Uint8Array> | AsyncIterable<Uint8Array>;\n\nexport interface AdbCredentialStore {\n    /**\n     * Generate and store a RSA private key with modulus length `2048` and public exponent `65537`.\n     *\n     * The returned `Uint8Array` is the private key in PKCS #8 format.\n     */\n    generateKey(): ValueOrPromise<Uint8Array>;\n\n    /**\n     * Synchronously or asynchronously iterate through all stored RSA private keys.\n     *\n     * Each call to `iterateKeys` must return a different iterator that iterate through all stored keys.\n     */\n    iterateKeys(): AdbKeyIterable;\n}\n\nexport enum AdbAuthType {\n    Token = 1,\n    Signature = 2,\n    PublicKey = 3,\n}\n\nexport interface AdbAuthenticator {\n    /**\n     * @param getNextRequest\n     *\n     * Call this function to get the next authentication request packet from device.\n     *\n     * After calling `getNextRequest`, authenticator can `yield` a packet as response, or `return` to indicate its incapability of handling the request.\n     *\n     * After `return`, the `AdbAuthenticatorHandler` will move on to next authenticator and never go back.\n     *\n     * Calling `getNextRequest` multiple times without `yield` or `return` will always return the same request.\n     */\n    (\n        credentialStore: AdbCredentialStore,\n        getNextRequest: () => Promise<AdbPacketData>\n    ): AsyncIterable<AdbPacketData>;\n}\n\nexport const AdbSignatureAuthenticator: AdbAuthenticator = async function* (\n    credentialStore: AdbCredentialStore,\n    getNextRequest: () => Promise<AdbPacketData>\n): AsyncIterable<AdbPacketData> {\n    for await (const key of credentialStore.iterateKeys()) {\n        const packet = await getNextRequest();\n\n        if (packet.arg0 !== AdbAuthType.Token) {\n            return;\n        }\n\n        const signature = sign(key, packet.payload);\n        yield {\n            command: AdbCommand.Auth,\n            arg0: AdbAuthType.Signature,\n            arg1: 0,\n            payload: new Uint8Array(signature),\n        };\n    }\n};\n\nexport const AdbPublicKeyAuthenticator: AdbAuthenticator = async function* (\n    credentialStore: AdbCredentialStore,\n    getNextRequest: () => Promise<AdbPacketData>\n): AsyncIterable<AdbPacketData> {\n    const packet = await getNextRequest();\n\n    if (packet.arg0 !== AdbAuthType.Token) {\n        return;\n    }\n\n    let privateKey: Uint8Array | undefined;\n    for await (const key of credentialStore.iterateKeys()) {\n        privateKey = key;\n        break;\n    }\n\n    if (!privateKey) {\n        privateKey = await credentialStore.generateKey();\n    }\n\n    const publicKeyLength = calculatePublicKeyLength();\n    const [publicKeyBase64Length] =\n        calculateBase64EncodedLength(publicKeyLength);\n\n    const publicKeyBuffer = new Uint8Array(\n        publicKeyBase64Length + 1 // Null character\n    );\n\n    calculatePublicKey(privateKey, publicKeyBuffer);\n    encodeBase64(publicKeyBuffer.subarray(0, publicKeyLength), publicKeyBuffer);\n\n    yield {\n        command: AdbCommand.Auth,\n        arg0: AdbAuthType.PublicKey,\n        arg1: 0,\n        payload: publicKeyBuffer,\n    };\n};\n\nexport const ADB_DEFAULT_AUTHENTICATORS: AdbAuthenticator[] = [\n    AdbSignatureAuthenticator,\n    AdbPublicKeyAuthenticator,\n];\n\nexport class AdbAuthenticationProcessor implements Disposable {\n    public readonly authenticators: readonly AdbAuthenticator[];\n\n    private readonly credentialStore: AdbCredentialStore;\n\n    private pendingRequest = new PromiseResolver<AdbPacketData>();\n\n    private iterator: AsyncIterator<AdbPacketData, void, void> | undefined;\n\n    public constructor(\n        authenticators: readonly AdbAuthenticator[],\n        credentialStore: AdbCredentialStore\n    ) {\n        this.authenticators = authenticators;\n        this.credentialStore = credentialStore;\n    }\n\n    private getNextRequest = (): Promise<AdbPacketData> => {\n        return this.pendingRequest.promise;\n    };\n\n    private async *invokeAuthenticator(): AsyncGenerator<\n        AdbPacketData,\n        void,\n        void\n    > {\n        for (const authenticator of this.authenticators) {\n            for await (const packet of authenticator(\n                this.credentialStore,\n                this.getNextRequest\n            )) {\n                // If the authenticator yielded a response\n                // Prepare `nextRequest` for next authentication request\n                this.pendingRequest = new PromiseResolver();\n\n                // Yield the response to outer layer\n                yield packet;\n            }\n\n            // If the authenticator returned,\n            // Next authenticator will be given the same `pendingRequest`\n        }\n    }\n\n    public async process(packet: AdbPacketData): Promise<AdbPacketData> {\n        if (!this.iterator) {\n            this.iterator = this.invokeAuthenticator();\n        }\n\n        this.pendingRequest.resolve(packet);\n\n        const result = await this.iterator.next();\n        if (result.done) {\n            throw new Error(\"No authenticator can handle the request\");\n        }\n\n        return result.value;\n    }\n\n    public dispose() {\n        void this.iterator?.return?.();\n    }\n}\n", "import { BufferedReadableStream } from \"@yume-chan/stream-extra\";\nimport Struct from \"@yume-chan/struct\";\n\nimport type { Adb } from \"../adb.js\";\n\nconst Version = new Struct({ littleEndian: true }).uint32(\"version\");\n\nexport const AdbFrameBufferV1 = new Struct({ littleEndian: true })\n    .uint32(\"bpp\")\n    .uint32(\"size\")\n    .uint32(\"width\")\n    .uint32(\"height\")\n    .uint32(\"red_offset\")\n    .uint32(\"red_length\")\n    .uint32(\"blue_offset\")\n    .uint32(\"blue_length\")\n    .uint32(\"green_offset\")\n    .uint32(\"green_length\")\n    .uint32(\"alpha_offset\")\n    .uint32(\"alpha_length\")\n    .uint8Array(\"data\", { lengthField: \"size\" });\n\nexport type AdbFrameBufferV1 = (typeof AdbFrameBufferV1)[\"TDeserializeResult\"];\n\nexport const AdbFrameBufferV2 = new Struct({ littleEndian: true })\n    .uint32(\"bpp\")\n    .uint32(\"colorSpace\")\n    .uint32(\"size\")\n    .uint32(\"width\")\n    .uint32(\"height\")\n    .uint32(\"red_offset\")\n    .uint32(\"red_length\")\n    .uint32(\"blue_offset\")\n    .uint32(\"blue_length\")\n    .uint32(\"green_offset\")\n    .uint32(\"green_length\")\n    .uint32(\"alpha_offset\")\n    .uint32(\"alpha_length\")\n    .uint8Array(\"data\", { lengthField: \"size\" });\n\nexport type AdbFrameBufferV2 = (typeof AdbFrameBufferV2)[\"TDeserializeResult\"];\n\n/**\n * ADB uses 8 int32 fields to describe bit depths\n *\n * The only combination I have seen is RGBA8888, which is\n *\n *   red_offset:   0\n *   red_length:   8\n *   blue_offset:  16\n *   blue_length:  8\n *   green_offset: 8\n *   green_length: 8\n *   alpha_offset: 24\n *   alpha_length: 8\n *\n * But it doesn't mean that other combinations are not possible.\n */\nexport type AdbFrameBuffer = AdbFrameBufferV1 | AdbFrameBufferV2;\n\nexport async function framebuffer(adb: Adb): Promise<AdbFrameBuffer> {\n    const socket = await adb.createSocket(\"framebuffer:\");\n    const stream = new BufferedReadableStream(socket.readable);\n    const { version } = await Version.deserialize(stream);\n    switch (version) {\n        case 1:\n            // TODO: AdbFrameBuffer: does all v1 responses uses the same color space? Add it so the command returns same format for all versions.\n            return AdbFrameBufferV1.deserialize(stream);\n        case 2:\n            return AdbFrameBufferV2.deserialize(stream);\n        default:\n            throw new Error(\"Unsupported FrameBuffer version\");\n    }\n}\n", "// cspell: ignore killforward\n\nimport { AutoDisposable } from \"@yume-chan/event\";\nimport {\n    BufferedReadableStream,\n    BufferedReadableStreamEndedError,\n} from \"@yume-chan/stream-extra\";\nimport Struct from \"@yume-chan/struct\";\n\nimport type { Adb } from \"../adb.js\";\nimport type { AdbIncomingSocketHandler, AdbSocket } from \"../socket/index.js\";\nimport { decodeUtf8 } from \"../utils/index.js\";\n\nexport interface AdbForwardListener {\n    deviceSerial: string;\n\n    localName: string;\n\n    remoteName: string;\n}\n\nconst AdbReverseStringResponse = new Struct()\n    .string(\"length\", { length: 4 })\n    .string(\"content\", { lengthField: \"length\", lengthFieldRadix: 16 });\n\nexport class AdbReverseError extends Error {\n    public constructor(message: string) {\n        super(message);\n        Object.setPrototypeOf(this, AdbReverseError.prototype);\n    }\n}\n\nexport class AdbReverseNotSupportedError extends Error {\n    public constructor() {\n        super(\n            \"ADB reverse tunnel is not supported on this device when connected wirelessly.\"\n        );\n        Object.setPrototypeOf(this, AdbReverseNotSupportedError.prototype);\n    }\n}\n\nconst AdbReverseErrorResponse = new Struct()\n    .fields(AdbReverseStringResponse)\n    .postDeserialize((value) => {\n        // https://issuetracker.google.com/issues/37066218\n        // ADB on Android <9 can't create reverse tunnels when connected wirelessly (ADB over WiFi),\n        // and returns this confusing \"more than one device/emulator\" error.\n        if (value.content === \"more than one device/emulator\") {\n            throw new AdbReverseNotSupportedError();\n        } else {\n            throw new AdbReverseError(value.content);\n        }\n    });\n\nexport class AdbReverseCommand extends AutoDisposable {\n    protected localAddressToHandler = new Map<\n        string,\n        AdbIncomingSocketHandler\n    >();\n\n    protected deviceAddressToLocalAddress = new Map<string, string>();\n\n    protected adb: Adb;\n\n    protected listening = false;\n\n    public constructor(adb: Adb) {\n        super();\n\n        this.adb = adb;\n        this.addDisposable(\n            this.adb.onIncomingSocket(this.handleIncomingSocket)\n        );\n    }\n\n    protected handleIncomingSocket = async (socket: AdbSocket) => {\n        let address = socket.serviceString;\n        // ADB daemon appends `\\0` to the service string\n        address = address.replace(/\\0/g, \"\");\n        return !!(await this.localAddressToHandler.get(address)?.(socket));\n    };\n\n    private async createBufferedStream(service: string) {\n        const socket = await this.adb.createSocket(service);\n        return new BufferedReadableStream(socket.readable);\n    }\n\n    private async sendRequest(service: string) {\n        const stream = await this.createBufferedStream(service);\n        const success = decodeUtf8(await stream.read(4)) === \"OKAY\";\n        if (!success) {\n            await AdbReverseErrorResponse.deserialize(stream);\n        }\n        return stream;\n    }\n\n    public async list(): Promise<AdbForwardListener[]> {\n        const stream = await this.createBufferedStream(\"reverse:list-forward\");\n\n        const response = await AdbReverseStringResponse.deserialize(stream);\n        return response.content!.split(\"\\n\").map((line) => {\n            const [deviceSerial, localName, remoteName] = line.split(\" \") as [\n                string,\n                string,\n                string\n            ];\n            return { deviceSerial, localName, remoteName };\n        });\n\n        // No need to close the stream, device will close it\n    }\n\n    /**\n     * @param deviceAddress\n     * The address to be listened on device by ADB daemon. Or `tcp:0` to choose an available TCP port.\n     * @param localAddress\n     * An identifier for the reverse tunnel.\n     *\n     * When a socket wants to connect to {@link deviceAddress}, native ADB client will forward that connection to {@link localAddress}.\n     * However in this library, the {@link handler} is invoked instead. So this parameter is only used to identify the reverse tunnel.\n     * @param handler A callback to handle incoming connections. It must return `true` if it accepts the connection.\n     * @returns `tcp:{ACTUAL_LISTENING_PORT}`, If `deviceAddress` is `tcp:0`; otherwise, `deviceAddress`.\n     * @throws {AdbReverseNotSupportedError} If ADB reverse tunnel is not supported on this device when connected wirelessly.\n     * @throws {AdbReverseError} If ADB daemon returns an error.\n     */\n    public async add(\n        deviceAddress: string,\n        localAddress: string,\n        handler: AdbIncomingSocketHandler\n    ): Promise<string> {\n        const stream = await this.sendRequest(\n            `reverse:forward:${deviceAddress};${localAddress}`\n        );\n\n        // `tcp:0` tells the device to pick an available port.\n        // On Android >=8, device will respond with the selected port for all `tcp:` requests.\n        if (deviceAddress.startsWith(\"tcp:\")) {\n            let length: number | undefined;\n            try {\n                length = Number.parseInt(decodeUtf8(await stream.read(4)), 16);\n            } catch (e) {\n                if (!(e instanceof BufferedReadableStreamEndedError)) {\n                    throw e;\n                }\n\n                // Android <8 doesn't have this response.\n                // (the stream is closed now)\n                // Can be safely ignored.\n            }\n\n            if (length !== undefined) {\n                const port = decodeUtf8(await stream.read(length));\n                deviceAddress = `tcp:${Number.parseInt(port, 10)}`;\n            }\n        }\n\n        this.localAddressToHandler.set(localAddress, handler);\n        this.deviceAddressToLocalAddress.set(deviceAddress, localAddress);\n        return deviceAddress;\n\n        // No need to close the stream, device will close it\n    }\n\n    public async remove(deviceAddress: string): Promise<void> {\n        await this.sendRequest(`reverse:killforward:${deviceAddress}`);\n\n        if (this.deviceAddressToLocalAddress.has(deviceAddress)) {\n            this.localAddressToHandler.delete(\n                this.deviceAddressToLocalAddress.get(deviceAddress)!\n            );\n            this.deviceAddressToLocalAddress.delete(deviceAddress);\n        }\n\n        // No need to close the stream, device will close it\n    }\n\n    public async removeAll(): Promise<void> {\n        await this.sendRequest(`reverse:killforward-all`);\n\n        this.deviceAddressToLocalAddress.clear();\n        this.localAddressToHandler.clear();\n\n        // No need to close the stream, device will close it\n    }\n}\n", "// The order follows\n// https://android.googlesource.com/platform/packages/modules/adb/+/79010dc6d5ca7490c493df800d4421730f5466ca/transport.cpp#1252\nexport enum AdbFeature {\n    ShellV2 = \"shell_v2\",\n    Cmd = \"cmd\",\n    StatV2 = \"stat_v2\",\n    ListV2 = \"ls_v2\",\n    FixedPushMkdir = \"fixed_push_mkdir\",\n    Abb = \"abb\",\n    AbbExec = \"abb_exec\",\n    SendReceiveV2 = \"sendrecv_v2\",\n}\n", "import { PromiseResolver } from \"@yume-chan/async\";\nimport type {\n    Consumable,\n    PushReadableStreamController,\n    ReadableStream,\n    WritableStreamDefaultWriter,\n} from \"@yume-chan/stream-extra\";\nimport {\n    ConsumableTransformStream,\n    ConsumableWritableStream,\n    PushReadableStream,\n    StructDeserializeStream,\n    TransformStream,\n    WritableStream,\n    pipeFrom,\n} from \"@yume-chan/stream-extra\";\nimport type { StructValueType } from \"@yume-chan/struct\";\nimport Struct, { placeholder } from \"@yume-chan/struct\";\n\nimport type { Adb } from \"../../../adb.js\";\nimport { AdbFeature } from \"../../../features.js\";\nimport type { AdbSocket } from \"../../../socket/index.js\";\nimport { encodeUtf8 } from \"../../../utils/index.js\";\n\nimport type { AdbSubprocessProtocol } from \"./types.js\";\n\nexport enum AdbShellProtocolId {\n    Stdin,\n    Stdout,\n    Stderr,\n    Exit,\n    CloseStdin,\n    WindowSizeChange,\n}\n\n// This packet format is used in both direction.\nconst AdbShellProtocolPacket = new Struct({ littleEndian: true })\n    .uint8(\"id\", placeholder<AdbShellProtocolId>())\n    .uint32(\"length\")\n    .uint8Array(\"data\", { lengthField: \"length\" });\n\ntype AdbShellProtocolPacketInit = (typeof AdbShellProtocolPacket)[\"TInit\"];\n\ntype AdbShellProtocolPacket = StructValueType<typeof AdbShellProtocolPacket>;\n\nclass StdinSerializeStream extends ConsumableTransformStream<\n    Uint8Array,\n    AdbShellProtocolPacketInit\n> {\n    constructor() {\n        super({\n            async transform(chunk, controller) {\n                await controller.enqueue({\n                    id: AdbShellProtocolId.Stdin,\n                    data: chunk,\n                });\n            },\n            flush() {\n                // TODO: AdbShellSubprocessProtocol: support closing stdin\n            },\n        });\n    }\n}\n\nclass StdoutDeserializeStream extends TransformStream<\n    AdbShellProtocolPacket,\n    Uint8Array\n> {\n    constructor(type: AdbShellProtocolId.Stdout | AdbShellProtocolId.Stderr) {\n        super({\n            transform(chunk, controller) {\n                if (chunk.id === type) {\n                    controller.enqueue(chunk.data);\n                }\n            },\n        });\n    }\n}\n\nclass MultiplexStream<T> {\n    private _readable: PushReadableStream<T>;\n    private _readableController!: PushReadableStreamController<T>;\n    public get readable() {\n        return this._readable;\n    }\n\n    private _activeCount = 0;\n\n    constructor() {\n        this._readable = new PushReadableStream((controller) => {\n            this._readableController = controller;\n        });\n    }\n\n    public createWriteable() {\n        return new WritableStream<T>({\n            start: () => {\n                this._activeCount += 1;\n            },\n            write: async (chunk) => {\n                await this._readableController.enqueue(chunk);\n            },\n            abort: () => {\n                this._activeCount -= 1;\n                if (this._activeCount === 0) {\n                    this._readableController.close();\n                }\n            },\n            close: () => {\n                this._activeCount -= 1;\n                if (this._activeCount === 0) {\n                    this._readableController.close();\n                }\n            },\n        });\n    }\n}\n\n/**\n * Shell v2 a.k.a Shell Protocol\n *\n * Features:\n * * `stderr`: Yes\n * * `exit` exit code: Yes\n * * `resize`: Yes\n */\nexport class AdbSubprocessShellProtocol implements AdbSubprocessProtocol {\n    public static isSupported(adb: Adb) {\n        return adb.supportsFeature(AdbFeature.ShellV2);\n    }\n\n    public static async pty(adb: Adb, command: string) {\n        // TODO: AdbShellSubprocessProtocol: Support setting `XTERM` environment variable\n        return new AdbSubprocessShellProtocol(\n            await adb.createSocket(`shell,v2,pty:${command}`)\n        );\n    }\n\n    public static async raw(adb: Adb, command: string) {\n        return new AdbSubprocessShellProtocol(\n            await adb.createSocket(`shell,v2,raw:${command}`)\n        );\n    }\n\n    private readonly _socket: AdbSocket;\n    private _socketWriter: WritableStreamDefaultWriter<\n        Consumable<AdbShellProtocolPacketInit>\n    >;\n\n    private _stdin: WritableStream<Consumable<Uint8Array>>;\n    public get stdin() {\n        return this._stdin;\n    }\n\n    private _stdout: ReadableStream<Uint8Array>;\n    public get stdout() {\n        return this._stdout;\n    }\n\n    private _stderr: ReadableStream<Uint8Array>;\n    public get stderr() {\n        return this._stderr;\n    }\n\n    private readonly _exit = new PromiseResolver<number>();\n    public get exit() {\n        return this._exit.promise;\n    }\n\n    public constructor(socket: AdbSocket) {\n        this._socket = socket;\n\n        // Check this image to help you understand the stream graph\n        // cspell: disable-next-line\n        // https://www.plantuml.com/plantuml/png/bL91QiCm4Bpx5SAdv90lb1JISmiw5XzaQKf5PIkiLZIqzEyLSg8ks13gYtOykpFhiOw93N6UGjVDqK7rZsxKqNw0U_NTgVAy4empOy2mm4_olC0VEVEE47GUpnGjKdgXoD76q4GIEpyFhOwP_m28hW0NNzxNUig1_JdW0bA7muFIJDco1daJ_1SAX9bgvoPJPyIkSekhNYctvIGXrCH6tIsPL5fs-s6J5yc9BpWXhKtNdF2LgVYPGM_6GlMwfhWUsIt4lbScANrwlgVVUifPSVi__t44qStnwPvZwobdSmHHlL57p2vFuHS0\n\n        // TODO: AdbShellSubprocessProtocol: Optimize stream graph\n\n        const [stdout, stderr] = socket.readable\n            .pipeThrough(new StructDeserializeStream(AdbShellProtocolPacket))\n            .pipeThrough(\n                new TransformStream<\n                    AdbShellProtocolPacket,\n                    AdbShellProtocolPacket\n                >({\n                    transform: (chunk, controller) => {\n                        if (chunk.id === AdbShellProtocolId.Exit) {\n                            this._exit.resolve(new Uint8Array(chunk.data)[0]!);\n                            // We can let `StdoutDeserializeStream` to process `AdbShellProtocolId.Exit`,\n                            // but since we need this `TransformStream` to capture the exit code anyway,\n                            // terminating child streams here is killing two birds with one stone.\n                            controller.terminate();\n                            return;\n                        }\n                        controller.enqueue(chunk);\n                    },\n                })\n            )\n            .tee();\n        this._stdout = stdout.pipeThrough(\n            new StdoutDeserializeStream(AdbShellProtocolId.Stdout)\n        );\n        this._stderr = stderr.pipeThrough(\n            new StdoutDeserializeStream(AdbShellProtocolId.Stderr)\n        );\n\n        const multiplexer = new MultiplexStream<\n            Consumable<AdbShellProtocolPacketInit>\n        >();\n        void multiplexer.readable\n            .pipeThrough(\n                new ConsumableTransformStream({\n                    async transform(chunk, controller) {\n                        await controller.enqueue(\n                            AdbShellProtocolPacket.serialize(chunk)\n                        );\n                    },\n                })\n            )\n            .pipeTo(socket.writable);\n\n        this._stdin = pipeFrom(\n            multiplexer.createWriteable(),\n            new StdinSerializeStream()\n        );\n\n        this._socketWriter = multiplexer.createWriteable().getWriter();\n    }\n\n    public async resize(rows: number, cols: number) {\n        await ConsumableWritableStream.write(this._socketWriter, {\n            id: AdbShellProtocolId.WindowSizeChange,\n            data: encodeUtf8(\n                // The \"correct\" format is `${rows}x${cols},${x_pixels}x${y_pixels}`\n                // However, according to https://linux.die.net/man/4/tty_ioctl\n                // `x_pixels` and `y_pixels` are unused, so always sending `0` should be fine.\n                `${rows}x${cols},0x0\\0`\n            ),\n        });\n    }\n\n    public kill() {\n        return this._socket.close();\n    }\n}\n", "import Struct from \"@yume-chan/struct\";\n\nimport { encodeUtf8 } from \"../../utils/index.js\";\n\nexport enum AdbSyncRequestId {\n    List = \"LIST\",\n    ListV2 = \"LIS2\",\n    Send = \"SEND\",\n    SendV2 = \"SND2\",\n    Lstat = \"STAT\",\n    Stat = \"STA2\",\n    LstatV2 = \"LST2\",\n    Data = \"DATA\",\n    Done = \"DONE\",\n    Receive = \"RECV\",\n}\n\nexport const AdbSyncNumberRequest = new Struct({ littleEndian: true })\n    .string(\"id\", { length: 4 })\n    .uint32(\"arg\");\n\nexport const AdbSyncDataRequest = new Struct({ littleEndian: true })\n    .fields(AdbSyncNumberRequest)\n    .uint8Array(\"data\", { lengthField: \"arg\" });\n\nexport interface AdbSyncWritable {\n    write(buffer: Uint8Array): Promise<void>;\n}\n\nexport async function adbSyncWriteRequest(\n    writable: AdbSyncWritable,\n    id: AdbSyncRequestId | string,\n    value: number | string | Uint8Array\n): Promise<void> {\n    if (typeof value === \"number\") {\n        const buffer = AdbSyncNumberRequest.serialize({\n            id,\n            arg: value,\n        });\n        await writable.write(buffer);\n    } else if (typeof value === \"string\") {\n        // Let `writable` buffer writes\n        const buffer = encodeUtf8(value);\n        await writable.write(\n            AdbSyncNumberRequest.serialize({ id, arg: buffer.byteLength })\n        );\n        await writable.write(buffer);\n    } else {\n        await writable.write(\n            AdbSyncNumberRequest.serialize({ id, arg: value.byteLength })\n        );\n        await writable.write(value);\n    }\n}\n", "import type {\n    StructAsyncDeserializeStream,\n    StructLike,\n    StructValueType,\n} from \"@yume-chan/struct\";\nimport Struct from \"@yume-chan/struct\";\n\nimport { decodeUtf8 } from \"../../utils/index.js\";\n\nexport enum AdbSyncResponseId {\n    Entry = \"DENT\",\n    Entry2 = \"DNT2\",\n    Lstat = \"STAT\",\n    Stat = \"STA2\",\n    Lstat2 = \"LST2\",\n    Done = \"DONE\",\n    Data = \"DATA\",\n    Ok = \"OKAY\",\n    Fail = \"FAIL\",\n}\n\nexport const AdbSyncFailResponse = new Struct({ littleEndian: true })\n    .uint32(\"messageLength\")\n    .string(\"message\", { lengthField: \"messageLength\" })\n    .postDeserialize((object) => {\n        throw new Error(object.message);\n    });\n\nexport async function adbSyncReadResponse<T>(\n    stream: StructAsyncDeserializeStream,\n    id: AdbSyncResponseId,\n    type: StructLike<T>\n): Promise<T> {\n    const actualId = decodeUtf8(await stream.read(4));\n    switch (actualId) {\n        case AdbSyncResponseId.Fail:\n            await AdbSyncFailResponse.deserialize(stream);\n            throw new Error(\"Unreachable\");\n        case id:\n            return await type.deserialize(stream);\n        default:\n            throw new Error(`Expected '${id}', but got '${actualId}'`);\n    }\n}\n\nexport async function* adbSyncReadResponses<\n    T extends Struct<object, PropertyKey, object, any>\n>(\n    stream: StructAsyncDeserializeStream,\n    id: AdbSyncResponseId,\n    type: T\n): AsyncGenerator<StructValueType<T>, void, void> {\n    while (true) {\n        const actualId = decodeUtf8(await stream.read(4));\n        switch (actualId) {\n            case AdbSyncResponseId.Fail:\n                await AdbSyncFailResponse.deserialize(stream);\n                throw new Error(\"Unreachable\");\n            case AdbSyncResponseId.Done:\n                // `DONE` responses' size are always same as the request's normal response.\n                //\n                // For example, `DONE` responses for `LIST` requests are 16 bytes (same as `DENT` responses),\n                // but `DONE` responses for `STAT` requests are 12 bytes (same as `STAT` responses).\n                await stream.read(type.size);\n                return;\n            case id:\n                yield await type.deserialize(stream);\n                break;\n            default:\n                throw new Error(\n                    `Expected '${id}' or '${AdbSyncResponseId.Done}', but got '${actualId}'`\n                );\n        }\n    }\n}\n", "import Struct, { placeholder } from \"@yume-chan/struct\";\n\nimport { AdbSyncRequestId, adbSyncWriteRequest } from \"./request.js\";\nimport { AdbSyncResponseId, adbSyncReadResponse } from \"./response.js\";\nimport type { AdbSyncSocket } from \"./socket.js\";\n\n// https://github.com/python/cpython/blob/4e581d64b8aff3e2eda99b12f080c877bb78dfca/Lib/stat.py#L36\nexport enum LinuxFileType {\n    Directory = 0o04,\n    File = 0o10,\n    Link = 0o12,\n}\n\nexport interface AdbSyncStat {\n    mode: number;\n    size: bigint;\n    mtime: bigint;\n    get type(): LinuxFileType;\n    get permission(): number;\n\n    uid?: number;\n    gid?: number;\n    atime?: bigint;\n    ctime?: bigint;\n}\n\nexport const AdbSyncLstatResponse = new Struct({ littleEndian: true })\n    .int32(\"mode\")\n    .int32(\"size\")\n    .int32(\"mtime\")\n    .extra({\n        id: AdbSyncResponseId.Lstat as const,\n        get type() {\n            return (this.mode >> 12) as LinuxFileType;\n        },\n        get permission() {\n            return this.mode & 0b00001111_11111111;\n        },\n    })\n    .postDeserialize((object) => {\n        if (object.mode === 0 && object.size === 0 && object.mtime === 0) {\n            throw new Error(\"lstat error\");\n        }\n    });\n\nexport type AdbSyncLstatResponse =\n    (typeof AdbSyncLstatResponse)[\"TDeserializeResult\"];\n\nexport enum AdbSyncStatErrorCode {\n    SUCCESS = 0,\n    EACCES = 13,\n    EEXIST = 17,\n    EFAULT = 14,\n    EFBIG = 27,\n    EINTR = 4,\n    EINVAL = 22,\n    EIO = 5,\n    EISDIR = 21,\n    ELOOP = 40,\n    EMFILE = 24,\n    ENAMETOOLONG = 36,\n    ENFILE = 23,\n    ENOENT = 2,\n    ENOMEM = 12,\n    ENOSPC = 28,\n    ENOTDIR = 20,\n    EOVERFLOW = 75,\n    EPERM = 1,\n    EROFS = 30,\n    ETXTBSY = 26,\n}\n\nexport const AdbSyncStatResponse = new Struct({ littleEndian: true })\n    .uint32(\"error\", placeholder<AdbSyncStatErrorCode>())\n    .uint64(\"dev\")\n    .uint64(\"ino\")\n    .uint32(\"mode\")\n    .uint32(\"nlink\")\n    .uint32(\"uid\")\n    .uint32(\"gid\")\n    .uint64(\"size\")\n    .uint64(\"atime\")\n    .uint64(\"mtime\")\n    .uint64(\"ctime\")\n    .extra({\n        id: AdbSyncResponseId.Stat as const,\n        get type() {\n            return (this.mode >> 12) as LinuxFileType;\n        },\n        get permission() {\n            return this.mode & 0b00001111_11111111;\n        },\n    })\n    .postDeserialize((object) => {\n        if (object.error) {\n            throw new Error(AdbSyncStatErrorCode[object.error]);\n        }\n    });\n\nexport type AdbSyncStatResponse =\n    (typeof AdbSyncStatResponse)[\"TDeserializeResult\"];\n\nexport async function adbSyncLstat(\n    socket: AdbSyncSocket,\n    path: string,\n    v2: boolean\n): Promise<AdbSyncStat> {\n    const locked = await socket.lock();\n    try {\n        if (v2) {\n            await adbSyncWriteRequest(locked, AdbSyncRequestId.LstatV2, path);\n            return await adbSyncReadResponse(\n                locked,\n                AdbSyncResponseId.Lstat2,\n                AdbSyncStatResponse\n            );\n        } else {\n            await adbSyncWriteRequest(locked, AdbSyncRequestId.Lstat, path);\n            const response = await adbSyncReadResponse(\n                locked,\n                AdbSyncResponseId.Lstat,\n                AdbSyncLstatResponse\n            );\n            return {\n                mode: response.mode,\n                // Convert to `BigInt` to make it compatible with `AdbSyncStatResponse`\n                size: BigInt(response.size),\n                mtime: BigInt(response.mtime),\n                get type() {\n                    return response.type;\n                },\n                get permission() {\n                    return response.permission;\n                },\n            };\n        }\n    } finally {\n        locked.release();\n    }\n}\n\nexport async function adbSyncStat(\n    socket: AdbSyncSocket,\n    path: string\n): Promise<AdbSyncStatResponse> {\n    const locked = await socket.lock();\n    try {\n        await adbSyncWriteRequest(locked, AdbSyncRequestId.Stat, path);\n        return await adbSyncReadResponse(\n            locked,\n            AdbSyncResponseId.Stat,\n            AdbSyncStatResponse\n        );\n    } finally {\n        locked.release();\n    }\n}\n", "import Struct from \"@yume-chan/struct\";\n\nimport { AdbSyncRequestId, adbSyncWriteRequest } from \"./request.js\";\nimport { AdbSyncResponseId, adbSyncReadResponses } from \"./response.js\";\nimport type { AdbSyncSocket } from \"./socket.js\";\nimport type { AdbSyncStat } from \"./stat.js\";\nimport { AdbSyncLstatResponse, AdbSyncStatResponse } from \"./stat.js\";\n\nexport interface AdbSyncEntry extends AdbSyncStat {\n    name: string;\n}\n\nexport const AdbSyncEntryResponse = new Struct({ littleEndian: true })\n    .fields(AdbSyncLstatResponse)\n    .uint32(\"nameLength\")\n    .string(\"name\", { lengthField: \"nameLength\" })\n    .extra({ id: AdbSyncResponseId.Entry as const });\n\nexport type AdbSyncEntryResponse =\n    (typeof AdbSyncEntryResponse)[\"TDeserializeResult\"];\n\nexport const AdbSyncEntry2Response = new Struct({ littleEndian: true })\n    .fields(AdbSyncStatResponse)\n    .uint32(\"nameLength\")\n    .string(\"name\", { lengthField: \"nameLength\" })\n    .extra({ id: AdbSyncResponseId.Entry2 as const });\n\nexport type AdbSyncEntry2Response =\n    (typeof AdbSyncEntry2Response)[\"TDeserializeResult\"];\n\nexport async function* adbSyncOpenDirV2(\n    socket: AdbSyncSocket,\n    path: string\n): AsyncGenerator<AdbSyncEntry2Response, void, void> {\n    const locked = await socket.lock();\n    try {\n        await adbSyncWriteRequest(locked, AdbSyncRequestId.ListV2, path);\n        for await (const item of adbSyncReadResponses(\n            locked,\n            AdbSyncResponseId.Entry2,\n            AdbSyncEntry2Response\n        )) {\n            // `LST2` can return error codes for failed `lstat` calls.\n            // `LIST` just ignores them.\n            // But they only contain `name` so still pretty useless.\n            if (item.error !== 0) {\n                continue;\n            }\n            yield item;\n        }\n    } finally {\n        locked.release();\n    }\n}\n\nexport async function* adbSyncOpenDirV1(\n    socket: AdbSyncSocket,\n    path: string\n): AsyncGenerator<AdbSyncEntryResponse, void, void> {\n    const locked = await socket.lock();\n    try {\n        await adbSyncWriteRequest(locked, AdbSyncRequestId.List, path);\n        for await (const item of adbSyncReadResponses(\n            locked,\n            AdbSyncResponseId.Entry,\n            AdbSyncEntryResponse\n        )) {\n            yield item;\n        }\n    } finally {\n        locked.release();\n    }\n}\n\nexport async function* adbSyncOpenDir(\n    socket: AdbSyncSocket,\n    path: string,\n    v2: boolean\n): AsyncGenerator<AdbSyncEntry, void, void> {\n    if (v2) {\n        yield* adbSyncOpenDirV2(socket, path);\n    } else {\n        for await (const item of adbSyncOpenDirV1(socket, path)) {\n            // Convert to same format as `AdbSyncEntry2Response` for easier consumption.\n            // However it will add some overhead.\n            yield {\n                mode: item.mode,\n                size: BigInt(item.size),\n                mtime: BigInt(item.mtime),\n                get type() {\n                    return item.type;\n                },\n                get permission() {\n                    return item.permission;\n                },\n                name: item.name,\n            };\n        }\n    }\n}\n", "import type { ReadableStream } from \"@yume-chan/stream-extra\";\nimport { PushReadableStream } from \"@yume-chan/stream-extra\";\nimport Struct from \"@yume-chan/struct\";\n\nimport { AdbSyncRequestId, adbSyncWriteRequest } from \"./request.js\";\nimport { AdbSyncResponseId, adbSyncReadResponses } from \"./response.js\";\nimport type { AdbSyncSocket } from \"./socket.js\";\n\nexport const AdbSyncDataResponse = new Struct({ littleEndian: true })\n    .uint32(\"dataLength\")\n    .uint8Array(\"data\", { lengthField: \"dataLength\" })\n    .extra({ id: AdbSyncResponseId.Data as const });\n\nexport type AdbSyncDataResponse =\n    (typeof AdbSyncDataResponse)[\"TDeserializeResult\"];\n\nexport async function* adbSyncPullGenerator(\n    socket: AdbSyncSocket,\n    path: string\n): AsyncGenerator<Uint8Array, void, void> {\n    const locked = await socket.lock();\n    let done = false;\n    try {\n        await adbSyncWriteRequest(locked, AdbSyncRequestId.Receive, path);\n        for await (const packet of adbSyncReadResponses(\n            locked,\n            AdbSyncResponseId.Data,\n            AdbSyncDataResponse\n        )) {\n            yield packet.data;\n        }\n        done = true;\n    } finally {\n        if (!done) {\n            // sync pull can't be cancelled, so we have to read all data\n            for await (const packet of adbSyncReadResponses(\n                locked,\n                AdbSyncResponseId.Data,\n                AdbSyncDataResponse\n            )) {\n                void packet;\n            }\n        }\n        locked.release();\n    }\n}\n\nexport function adbSyncPull(\n    socket: AdbSyncSocket,\n    path: string\n): ReadableStream<Uint8Array> {\n    return new PushReadableStream(async (controller) => {\n        for await (const data of adbSyncPullGenerator(socket, path)) {\n            await controller.enqueue(data);\n        }\n    });\n}\n", "import type { Consumable, ReadableStream } from \"@yume-chan/stream-extra\";\nimport {\n    AbortController,\n    ConsumableWritableStream,\n    DistributionStream,\n} from \"@yume-chan/stream-extra\";\nimport Struct, { placeholder } from \"@yume-chan/struct\";\n\nimport { AdbSyncRequestId, adbSyncWriteRequest } from \"./request.js\";\nimport { AdbSyncResponseId, adbSyncReadResponse } from \"./response.js\";\nimport type { AdbSyncSocket, AdbSyncSocketLocked } from \"./socket.js\";\nimport { LinuxFileType } from \"./stat.js\";\n\nconst NOOP = () => {\n    // no-op\n};\n\nexport const ADB_SYNC_MAX_PACKET_SIZE = 64 * 1024;\n\nexport interface AdbSyncPushV1Options {\n    socket: AdbSyncSocket;\n    filename: string;\n    file: ReadableStream<Consumable<Uint8Array>>;\n    mode?: number;\n    mtime?: number;\n    packetSize?: number;\n}\n\nexport const AdbSyncOkResponse = new Struct({ littleEndian: true }).uint32(\n    \"unused\"\n);\n\nasync function pipeFile(\n    locked: AdbSyncSocketLocked,\n    file: ReadableStream<Consumable<Uint8Array>>,\n    packetSize: number,\n    mtime: number\n) {\n    // Read and write in parallel,\n    // allow error response to abort the write.\n    const abortController = new AbortController();\n    file.pipeThrough(new DistributionStream(packetSize, true))\n        .pipeTo(\n            new ConsumableWritableStream({\n                write: async (chunk) => {\n                    await adbSyncWriteRequest(\n                        locked,\n                        AdbSyncRequestId.Data,\n                        chunk\n                    );\n                },\n            }),\n            { signal: abortController.signal }\n        )\n        .then(async () => {\n            await adbSyncWriteRequest(locked, AdbSyncRequestId.Done, mtime);\n            await locked.flush();\n        }, NOOP);\n\n    await adbSyncReadResponse(\n        locked,\n        AdbSyncResponseId.Ok,\n        AdbSyncOkResponse\n    ).catch((e) => {\n        abortController.abort();\n        throw e;\n    });\n}\n\nexport async function adbSyncPushV1({\n    socket,\n    filename,\n    file,\n    mode = (LinuxFileType.File << 12) | 0o666,\n    mtime = (Date.now() / 1000) | 0,\n    packetSize = ADB_SYNC_MAX_PACKET_SIZE,\n}: AdbSyncPushV1Options) {\n    const locked = await socket.lock();\n    try {\n        const pathAndMode = `${filename},${mode.toString()}`;\n        await adbSyncWriteRequest(locked, AdbSyncRequestId.Send, pathAndMode);\n        await pipeFile(locked, file, packetSize, mtime);\n    } finally {\n        locked.release();\n    }\n}\n\nexport enum AdbSyncSendV2Flags {\n    None = 0,\n    Brotli = 1,\n    /**\n     * 2\n     */\n    Lz4 = 1 << 1,\n    /**\n     * 4\n     */\n    Zstd = 1 << 2,\n    /**\n     * 0x80000000\n     */\n    DryRun = (1 << 31) >>> 0,\n}\n\nexport interface AdbSyncPushV2Options extends AdbSyncPushV1Options {\n    dryRun?: boolean;\n}\n\nexport const AdbSyncSendV2Request = new Struct({ littleEndian: true })\n    .uint32(\"id\", placeholder<AdbSyncRequestId>())\n    .uint32(\"mode\")\n    .uint32(\"flags\", placeholder<AdbSyncSendV2Flags>());\n\nexport async function adbSyncPushV2({\n    socket,\n    filename,\n    file,\n    mode = (LinuxFileType.File << 12) | 0o666,\n    mtime = (Date.now() / 1000) | 0,\n    packetSize = ADB_SYNC_MAX_PACKET_SIZE,\n    dryRun = false,\n}: AdbSyncPushV2Options) {\n    const locked = await socket.lock();\n    try {\n        await adbSyncWriteRequest(locked, AdbSyncRequestId.SendV2, filename);\n\n        let flags: AdbSyncSendV2Flags = AdbSyncSendV2Flags.None;\n        if (dryRun) {\n            flags |= AdbSyncSendV2Flags.DryRun;\n        }\n        await locked.write(\n            AdbSyncSendV2Request.serialize({\n                id: AdbSyncRequestId.SendV2,\n                mode,\n                flags,\n            })\n        );\n\n        await pipeFile(locked, file, packetSize, mtime);\n    } finally {\n        locked.release();\n    }\n}\n\nexport interface AdbSyncPushOptions extends AdbSyncPushV2Options {\n    v2: boolean;\n}\n\nexport function adbSyncPush(options: AdbSyncPushOptions) {\n    if (options.v2) {\n        return adbSyncPushV2(options);\n    }\n\n    if (options.dryRun) {\n        throw new Error(\"dryRun is not supported in v1\");\n    }\n\n    return adbSyncPushV1(options);\n}\n", "import { PromiseResolver } from \"@yume-chan/async\";\nimport type { Consumable, ReadableWritablePair } from \"@yume-chan/stream-extra\";\nimport {\n    AbortController,\n    ConsumableWritableStream,\n    DecodeUtf8Stream,\n    GatherStringStream,\n    WritableStream,\n} from \"@yume-chan/stream-extra\";\n\nimport type { AdbCredentialStore } from \"./auth.js\";\nimport {\n    ADB_DEFAULT_AUTHENTICATORS,\n    AdbAuthenticationProcessor,\n} from \"./auth.js\";\nimport type { AdbFrameBuffer } from \"./commands/index.js\";\nimport {\n    AdbPower,\n    AdbReverseCommand,\n    AdbSubprocess,\n    AdbSync,\n    AdbTcpIpCommand,\n    escapeArg,\n    framebuffer,\n} from \"./commands/index.js\";\nimport { AdbFeature } from \"./features.js\";\nimport type { AdbPacketData, AdbPacketInit } from \"./packet.js\";\nimport { AdbCommand, calculateChecksum } from \"./packet.js\";\nimport type {\n    AdbIncomingSocketHandler,\n    AdbSocket,\n    Closeable,\n} from \"./socket/index.js\";\nimport { AdbPacketDispatcher } from \"./socket/index.js\";\nimport { decodeUtf8, encodeUtf8 } from \"./utils/index.js\";\n\nexport enum AdbPropKey {\n    Product = \"ro.product.name\",\n    Model = \"ro.product.model\",\n    Device = \"ro.product.device\",\n    Features = \"features\",\n}\n\nexport const VERSION_OMIT_CHECKSUM = 0x01000001;\n\nexport class Adb implements Closeable {\n    /**\n     * It's possible to call `authenticate` multiple times on a single connection,\n     * every time the device receives a `CNXN` packet, it resets its internal state,\n     * and starts a new authentication process.\n     */\n    public static async authenticate(\n        connection: ReadableWritablePair<\n            AdbPacketData,\n            Consumable<AdbPacketInit>\n        >,\n        credentialStore: AdbCredentialStore,\n        authenticators = ADB_DEFAULT_AUTHENTICATORS\n    ): Promise<Adb> {\n        // Initially, set to highest-supported version and payload size.\n        let version = 0x01000001;\n        // Android 4: 4K, Android 7: 256K, Android 9: 1M\n        let maxPayloadSize = 1024 * 1024;\n\n        const resolver = new PromiseResolver<string>();\n        const authProcessor = new AdbAuthenticationProcessor(\n            authenticators,\n            credentialStore\n        );\n\n        // Here is similar to `AdbPacketDispatcher`,\n        // But the received packet types and send packet processing are different.\n        const abortController = new AbortController();\n        const pipe = connection.readable\n            .pipeTo(\n                new WritableStream({\n                    async write(packet) {\n                        switch (packet.command) {\n                            case AdbCommand.Connect:\n                                version = Math.min(version, packet.arg0);\n                                maxPayloadSize = Math.min(\n                                    maxPayloadSize,\n                                    packet.arg1\n                                );\n                                resolver.resolve(decodeUtf8(packet.payload));\n                                break;\n                            case AdbCommand.Auth: {\n                                const response = await authProcessor.process(\n                                    packet\n                                );\n                                await sendPacket(response);\n                                break;\n                            }\n                            default:\n                                // Maybe the previous ADB client exited without reading all packets,\n                                // so they are still waiting in OS internal buffer.\n                                // Just ignore them.\n                                // Because a `Connect` packet will reset the device,\n                                // Eventually there will be `Connect` and `Auth` response packets.\n                                break;\n                        }\n                    },\n                }),\n                {\n                    // Don't cancel the source ReadableStream on AbortSignal abort.\n                    preventCancel: true,\n                    signal: abortController.signal,\n                }\n            )\n            .catch((e) => {\n                resolver.reject(e);\n            });\n\n        const writer = connection.writable.getWriter();\n        async function sendPacket(init: AdbPacketData) {\n            // Always send checksum in auth steps\n            // Because we don't know if the device needs it or not.\n            (init as AdbPacketInit).checksum = calculateChecksum(init.payload);\n            (init as AdbPacketInit).magic = init.command ^ 0xffffffff;\n            await ConsumableWritableStream.write(writer, init as AdbPacketInit);\n        }\n\n        let banner: string;\n        try {\n            // https://android.googlesource.com/platform/packages/modules/adb/+/79010dc6d5ca7490c493df800d4421730f5466ca/transport.cpp#1252\n            // There are some other feature constants, but some of them are only used by ADB server, not devices (daemons).\n            const features = [\n                AdbFeature.ShellV2,\n                AdbFeature.Cmd,\n                AdbFeature.StatV2,\n                AdbFeature.ListV2,\n                AdbFeature.FixedPushMkdir,\n                \"apex\",\n                AdbFeature.Abb,\n                // only tells the client the symlink timestamp issue in `adb push --sync` has been fixed.\n                // No special handling required.\n                \"fixed_push_symlink_timestamp\",\n                AdbFeature.AbbExec,\n                \"remount_shell\",\n                \"track_app\",\n                \"sendrecv_v2\",\n                \"sendrecv_v2_brotli\",\n                \"sendrecv_v2_lz4\",\n                \"sendrecv_v2_zstd\",\n                \"sendrecv_v2_dry_run_send\",\n            ].join(\",\");\n\n            await sendPacket({\n                command: AdbCommand.Connect,\n                arg0: version,\n                arg1: maxPayloadSize,\n                // The terminating `;` is required in formal definition\n                // But ADB daemon (all versions) can still work without it\n                payload: encodeUtf8(`host::features=${features};`),\n            });\n\n            banner = await resolver.promise;\n        } finally {\n            // When failed, release locks on `connection` so the caller can try again.\n            // When success, also release locks so `AdbPacketDispatcher` can use them.\n            abortController.abort();\n            writer.releaseLock();\n\n            // Wait until pipe stops (`ReadableStream` lock released)\n            await pipe;\n        }\n\n        return new Adb(connection, version, maxPayloadSize, banner);\n    }\n\n    private readonly dispatcher: AdbPacketDispatcher;\n\n    public get disconnected() {\n        return this.dispatcher.disconnected;\n    }\n\n    private _protocolVersion: number;\n    public get protocolVersion() {\n        return this._protocolVersion;\n    }\n\n    private _maxPayloadSize: number;\n    public get maxPayloadSize() {\n        return this._maxPayloadSize;\n    }\n\n    private _product: string | undefined;\n    public get product() {\n        return this._product;\n    }\n\n    private _model: string | undefined;\n    public get model() {\n        return this._model;\n    }\n\n    private _device: string | undefined;\n    public get device() {\n        return this._device;\n    }\n\n    private _features: AdbFeature[] = [];\n    public get features() {\n        return this._features;\n    }\n\n    public readonly subprocess: AdbSubprocess;\n    public readonly power: AdbPower;\n    public readonly reverse: AdbReverseCommand;\n    public readonly tcpip: AdbTcpIpCommand;\n\n    public constructor(\n        connection: ReadableWritablePair<\n            AdbPacketData,\n            Consumable<AdbPacketInit>\n        >,\n        version: number,\n        maxPayloadSize: number,\n        banner: string\n    ) {\n        this.parseBanner(banner);\n\n        let calculateChecksum: boolean;\n        let appendNullToServiceString: boolean;\n        if (version >= VERSION_OMIT_CHECKSUM) {\n            calculateChecksum = false;\n            appendNullToServiceString = false;\n        } else {\n            calculateChecksum = true;\n            appendNullToServiceString = true;\n        }\n\n        this.dispatcher = new AdbPacketDispatcher(connection, {\n            calculateChecksum,\n            appendNullToServiceString,\n            maxPayloadSize,\n        });\n\n        this._protocolVersion = version;\n        this._maxPayloadSize = maxPayloadSize;\n\n        this.subprocess = new AdbSubprocess(this);\n        this.power = new AdbPower(this);\n        this.reverse = new AdbReverseCommand(this);\n        this.tcpip = new AdbTcpIpCommand(this);\n    }\n\n    private parseBanner(banner: string): void {\n        const pieces = banner.split(\"::\");\n        if (pieces.length > 1) {\n            const props = pieces[1]!;\n            for (const prop of props.split(\";\")) {\n                if (!prop) {\n                    continue;\n                }\n\n                const keyValue = prop.split(\"=\");\n                if (keyValue.length !== 2) {\n                    continue;\n                }\n\n                const [key, value] = keyValue;\n                switch (key) {\n                    case AdbPropKey.Product:\n                        this._product = value;\n                        break;\n                    case AdbPropKey.Model:\n                        this._model = value;\n                        break;\n                    case AdbPropKey.Device:\n                        this._device = value;\n                        break;\n                    case AdbPropKey.Features:\n                        this._features = value!.split(\",\") as AdbFeature[];\n                        break;\n                }\n            }\n        }\n    }\n\n    public supportsFeature(feature: AdbFeature): boolean {\n        return this._features.includes(feature);\n    }\n\n    /**\n     * Add a handler for incoming socket.\n     * @param handler A function to call with new incoming sockets. It must return `true` if it accepts the socket.\n     * @returns A function to remove the handler.\n     */\n    public onIncomingSocket(handler: AdbIncomingSocketHandler) {\n        return this.dispatcher.onIncomingSocket(handler);\n    }\n\n    public async createSocket(service: string): Promise<AdbSocket> {\n        return this.dispatcher.createSocket(service);\n    }\n\n    public async createSocketAndWait(service: string): Promise<string> {\n        const socket = await this.createSocket(service);\n        const gatherStream = new GatherStringStream();\n        await socket.readable\n            .pipeThrough(new DecodeUtf8Stream())\n            .pipeTo(gatherStream);\n        return gatherStream.result;\n    }\n\n    public async getProp(key: string): Promise<string> {\n        const stdout = await this.subprocess.spawnAndWaitLegacy([\n            \"getprop\",\n            key,\n        ]);\n        return stdout.trim();\n    }\n\n    public async rm(...filenames: string[]): Promise<string> {\n        // https://android.googlesource.com/platform/packages/modules/adb/+/1a0fb8846d4e6b671c8aa7f137a8c21d7b248716/client/adb_install.cpp#984\n        const stdout = await this.subprocess.spawnAndWaitLegacy([\n            \"rm\",\n            ...filenames.map((arg) => escapeArg(arg)),\n            \"</dev/null\",\n        ]);\n        return stdout;\n    }\n\n    public async sync(): Promise<AdbSync> {\n        const socket = await this.createSocket(\"sync:\");\n        return new AdbSync(this, socket);\n    }\n\n    public async framebuffer(): Promise<AdbFrameBuffer> {\n        return framebuffer(this);\n    }\n\n    /**\n     * Close the ADB connection.\n     *\n     * Note that it won't close the streams from backends.\n     * The streams are both physically and logically intact,\n     * and can be reused.\n     */\n    public async close(): Promise<void> {\n        await this.dispatcher.close();\n    }\n}\n", "import type { AdbBackend, AdbPacketData, AdbPacketInit } from \"@yume-chan/adb\";\nimport { AdbPacketHeader, AdbPacketSerializeStream } from \"@yume-chan/adb\";\nimport type {\n    Consumable,\n    ReadableWritablePair,\n    WritableStream,\n} from \"@yume-chan/stream-extra\";\nimport {\n    ConsumableWritableStream,\n    DuplexStreamFactory,\n    ReadableStream,\n    pipeFrom,\n} from \"@yume-chan/stream-extra\";\nimport type { StructDeserializeStream } from \"@yume-chan/struct\";\nimport { EMPTY_UINT8_ARRAY } from \"@yume-chan/struct\";\n\n/**\n * `classCode`, `subclassCode` and `protocolCode` are required\n * for selecting correct USB configuration and interface.\n */\nexport type AdbDeviceFilter = USBDeviceFilter &\n    Required<\n        Pick<USBDeviceFilter, \"classCode\" | \"subclassCode\" | \"protocolCode\">\n    >;\n\n/**\n * The default filter for ADB devices, as defined by Google.\n */\nexport const ADB_DEFAULT_DEVICE_FILTER = {\n    classCode: 0xff,\n    subclassCode: 0x42,\n    protocolCode: 1,\n} as const satisfies AdbDeviceFilter;\n\nfunction alternateMatchesFilter(\n    alternate: USBAlternateInterface,\n    filters: AdbDeviceFilter[]\n) {\n    return filters.some(\n        (filter) =>\n            alternate.interfaceClass === filter.classCode &&\n            alternate.interfaceSubclass === filter.subclassCode &&\n            alternate.interfaceProtocol === filter.protocolCode\n    );\n}\n\nfunction findUsbAlternateInterface(\n    device: USBDevice,\n    filters: AdbDeviceFilter[]\n) {\n    for (const configuration of device.configurations) {\n        for (const interface_ of configuration.interfaces) {\n            for (const alternate of interface_.alternates) {\n                if (alternateMatchesFilter(alternate, filters)) {\n                    return { configuration, interface_, alternate };\n                }\n            }\n        }\n    }\n\n    throw new Error(\"No matched alternate interface found\");\n}\n\n/**\n * Find the first pair of input and output endpoints from an alternate interface.\n *\n * ADB interface only has two endpoints, one for input and one for output.\n */\nfunction findUsbEndpoints(endpoints: USBEndpoint[]) {\n    if (endpoints.length === 0) {\n        throw new Error(\"No endpoints given\");\n    }\n\n    let inEndpoint: USBEndpoint | undefined;\n    let outEndpoint: USBEndpoint | undefined;\n\n    for (const endpoint of endpoints) {\n        switch (endpoint.direction) {\n            case \"in\":\n                inEndpoint = endpoint;\n                if (outEndpoint) {\n                    return { inEndpoint, outEndpoint };\n                }\n                break;\n            case \"out\":\n                outEndpoint = endpoint;\n                if (inEndpoint) {\n                    return { inEndpoint, outEndpoint };\n                }\n                break;\n        }\n    }\n\n    if (!inEndpoint) {\n        throw new Error(\"No input endpoint found.\");\n    }\n    if (!outEndpoint) {\n        throw new Error(\"No output endpoint found.\");\n    }\n    throw new Error(\"unreachable\");\n}\n\nclass Uint8ArrayStructDeserializeStream implements StructDeserializeStream {\n    private buffer: Uint8Array;\n\n    private offset: number;\n\n    public constructor(buffer: Uint8Array) {\n        this.buffer = buffer;\n        this.offset = 0;\n    }\n\n    public read(length: number): Uint8Array {\n        const result = this.buffer.subarray(this.offset, this.offset + length);\n        this.offset += length;\n        return result;\n    }\n}\n\nexport class AdbWebUsbBackendStream\n    implements ReadableWritablePair<AdbPacketData, Consumable<AdbPacketInit>>\n{\n    private _readable: ReadableStream<AdbPacketData>;\n    public get readable() {\n        return this._readable;\n    }\n\n    private _writable: WritableStream<Consumable<AdbPacketInit>>;\n    public get writable() {\n        return this._writable;\n    }\n\n    public constructor(\n        device: USBDevice,\n        inEndpoint: USBEndpoint,\n        outEndpoint: USBEndpoint,\n        usbManager: USB\n    ) {\n        let closed = false;\n\n        const factory = new DuplexStreamFactory<\n            AdbPacketData,\n            Consumable<Uint8Array>\n        >({\n            close: async () => {\n                try {\n                    closed = true;\n                    await device.close();\n                } catch {\n                    /* device may have already disconnected */\n                }\n            },\n            dispose: () => {\n                usbManager.removeEventListener(\n                    \"disconnect\",\n                    handleUsbDisconnect\n                );\n            },\n        });\n\n        function handleUsbDisconnect(e: USBConnectionEvent) {\n            if (e.device === device) {\n                factory.dispose().catch((e) => {\n                    void e;\n                });\n            }\n        }\n\n        usbManager.addEventListener(\"disconnect\", handleUsbDisconnect);\n\n        this._readable = factory.wrapReadable(\n            new ReadableStream<AdbPacketData>({\n                async pull(controller) {\n                    // The `length` argument in `transferIn` must not be smaller than what the device sent,\n                    // otherwise it will return `babble` status without any data.\n                    // Here we read exactly 24 bytes (packet header) followed by exactly `payloadLength`.\n                    const result = await device.transferIn(\n                        inEndpoint.endpointNumber,\n                        24\n                    );\n\n                    // TODO: webusb: handle `babble` by discarding the data and receive again\n                    // TODO: webusb: on Windows, `transferIn` throws an NetworkError when device disconnected, check with other OSs.\n\n                    // From spec, the `result.data` always covers the whole `buffer`.\n                    const buffer = new Uint8Array(result.data!.buffer);\n                    const stream = new Uint8ArrayStructDeserializeStream(\n                        buffer\n                    );\n\n                    // Add `payload` field to its type, because we will assign `payload` in next step.\n                    const packet = AdbPacketHeader.deserialize(\n                        stream\n                    ) as AdbPacketHeader & { payload: Uint8Array };\n                    if (packet.payloadLength !== 0) {\n                        const result = await device.transferIn(\n                            inEndpoint.endpointNumber,\n                            packet.payloadLength\n                        );\n                        packet.payload = new Uint8Array(result.data!.buffer);\n                    } else {\n                        packet.payload = EMPTY_UINT8_ARRAY;\n                    }\n\n                    controller.enqueue(packet);\n                },\n            })\n        );\n\n        const zeroMask = outEndpoint.packetSize - 1;\n        this._writable = pipeFrom(\n            factory.createWritable(\n                new ConsumableWritableStream({\n                    write: async (chunk) => {\n                        try {\n                            await device.transferOut(\n                                outEndpoint.endpointNumber,\n                                chunk\n                            );\n\n                            if (\n                                zeroMask &&\n                                (chunk.byteLength & zeroMask) === 0\n                            ) {\n                                await device.transferOut(\n                                    outEndpoint.endpointNumber,\n                                    EMPTY_UINT8_ARRAY\n                                );\n                            }\n                        } catch (e) {\n                            if (closed) {\n                                return;\n                            }\n                            throw e;\n                        }\n                    },\n                })\n            ),\n            new AdbPacketSerializeStream()\n        );\n    }\n}\n\nexport class AdbWebUsbBackend implements AdbBackend {\n    private _filters: AdbDeviceFilter[];\n    private _usb: USB;\n\n    private _device: USBDevice;\n    public get device() {\n        return this._device;\n    }\n\n    public get serial(): string {\n        return this._device.serialNumber!;\n    }\n\n    public get name(): string {\n        return this._device.productName!;\n    }\n\n    /**\n     * Create a new instance of `AdbWebBackend` using a specified `USBDevice` instance\n     *\n     * @param device The `USBDevice` instance obtained elsewhere.\n     * @param filters The filters to use when searching for ADB interface. Defaults to {@link ADB_DEFAULT_DEVICE_FILTER}.\n     */\n    public constructor(\n        device: USBDevice,\n        filters: AdbDeviceFilter[] = [ADB_DEFAULT_DEVICE_FILTER],\n        usb: USB\n    ) {\n        this._device = device;\n        this._filters = filters;\n        this._usb = usb;\n    }\n\n    /**\n     * Claim the device and create a pair of `AdbPacket` streams to the ADB interface.\n     * @returns The pair of `AdbPacket` streams.\n     */\n    public async connect(): Promise<\n        ReadableWritablePair<AdbPacketData, Consumable<AdbPacketInit>>\n    > {\n        if (!this._device.opened) {\n            await this._device.open();\n        }\n\n        const { configuration, interface_, alternate } =\n            findUsbAlternateInterface(this._device, this._filters);\n\n        if (\n            this._device.configuration?.configurationValue !==\n            configuration.configurationValue\n        ) {\n            // Note: Switching configuration is not supported on Windows,\n            // but Android devices should always expose ADB function at the first (default) configuration.\n            await this._device.selectConfiguration(\n                configuration.configurationValue\n            );\n        }\n\n        if (!interface_.claimed) {\n            await this._device.claimInterface(interface_.interfaceNumber);\n        }\n\n        if (\n            interface_.alternate.alternateSetting !== alternate.alternateSetting\n        ) {\n            await this._device.selectAlternateInterface(\n                interface_.interfaceNumber,\n                alternate.alternateSetting\n            );\n        }\n\n        const { inEndpoint, outEndpoint } = findUsbEndpoints(\n            alternate.endpoints\n        );\n        return new AdbWebUsbBackendStream(\n            this._device,\n            inEndpoint,\n            outEndpoint,\n            this._usb\n        );\n    }\n}\n", "import type { AdbDeviceFilter } from \"./backend.js\";\nimport { ADB_DEFAULT_DEVICE_FILTER, AdbWebUsbBackend } from \"./backend.js\";\n\nexport class AdbWebUsbBackendManager {\n    /**\n     * Gets the instance of AdbWebUsbBackendManager using browser WebUSB implementation.\n     *\n     * May be `undefined` if the browser does not support WebUSB.\n     */\n    public static readonly BROWSER =\n        typeof window !== \"undefined\" && !!window.navigator.usb\n            ? new AdbWebUsbBackendManager(window.navigator.usb)\n            : undefined;\n\n    private _usb: USB;\n\n    /**\n     * Create a new instance of `AdbWebUsbBackendManager` using the specified WebUSB API implementation.\n     * @param usb A WebUSB compatible interface.\n     */\n    public constructor(usb: USB) {\n        this._usb = usb;\n    }\n\n    /**\n     * Request access to a connected device.\n     * This is a convince method for `usb.requestDevice()`.\n     * @param filters\n     * The filters to apply to the device list.\n     *\n     * It must have `classCode`, `subclassCode` and `protocolCode` fields for selecting the ADB interface,\n     * but might also have `vendorId`, `productId` or `serialNumber` fields to limit the displayed device list.\n     *\n     * Defaults to {@link ADB_DEFAULT_DEVICE_FILTER}.\n     * @param usbManager\n     * A WebUSB compatible interface.\n     * For example, `usb` NPM package for Node.js has a `webusb` object that can be used here.\n     *\n     * Defaults to `window.navigator.usb` (will throw an error if not exist).\n     * @returns The `AdbWebUsbBackend` instance if the user selected a device,\n     * or `undefined` if the user cancelled the device picker.\n     */\n    public async requestDevice(\n        filters: AdbDeviceFilter[] = [ADB_DEFAULT_DEVICE_FILTER]\n    ): Promise<AdbWebUsbBackend | undefined> {\n        try {\n            const device = await this._usb.requestDevice({\n                filters,\n            });\n            return new AdbWebUsbBackend(device, filters, this._usb);\n        } catch (e) {\n            // No device selected\n            // This check is compatible with both Browser implementation\n            // and `usb` NPM package from version 2.8.1\n            // https://github.com/node-usb/node-usb/issues/573\n            if (\n                typeof e === \"object\" &&\n                e !== null &&\n                \"name\" in e &&\n                e.name === \"NotFoundError\"\n            ) {\n                return undefined;\n            }\n\n            throw e;\n        }\n    }\n\n    /**\n     * Get all connected and authenticated devices.\n     * This is a convince method for `usb.getDevices()`.\n     * @param filters\n     * The filters to apply to the device list.\n     *\n     * It must have `classCode`, `subclassCode` and `protocolCode` fields for selecting the ADB interface,\n     * but might also have `vendorId`, `productId` or `serialNumber` fields to limit the displayed device list.\n     *\n     * Defaults to {@link ADB_DEFAULT_DEVICE_FILTER}.\n     * @param usbManager\n     * A WebUSB compatible interface.\n     * For example, `usb` NPM package for Node.js has a `webusb` object that can be used here.\n     *\n     * Defaults to `window.navigator.usb` (will throw an error if not exist).\n     * @returns An array of `AdbWebUsbBackend` instances for all connected and authenticated devices.\n     */\n    public async getDevices(\n        filters: AdbDeviceFilter[] = [ADB_DEFAULT_DEVICE_FILTER]\n    ): Promise<AdbWebUsbBackend[]> {\n        const devices = await this._usb.getDevices();\n        return devices.map(\n            (device) => new AdbWebUsbBackend(device, filters, this._usb)\n        );\n    }\n}\n", "export class AdbWebUsbBackendWatcher {\n    private _callback: (newDeviceSerial?: string) => void;\n    private _usb: USB;\n\n    public constructor(callback: (newDeviceSerial?: string) => void, usb: USB) {\n        this._callback = callback;\n        this._usb = usb;\n\n        this._usb.addEventListener(\"connect\", this.handleConnect);\n        this._usb.addEventListener(\"disconnect\", this.handleDisconnect);\n    }\n\n    public dispose(): void {\n        this._usb.removeEventListener(\"connect\", this.handleConnect);\n        this._usb.removeEventListener(\"disconnect\", this.handleDisconnect);\n    }\n\n    private handleConnect = (e: USBConnectionEvent) => {\n        this._callback(e.device.serialNumber);\n    };\n\n    private handleDisconnect = () => {\n        this._callback();\n    };\n}\n"],
  "mappings": "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",
  "names": ["PromiseResolver", "AsyncOperationManager", "e", "t", "r", "o", "n", "a", "i", "l", "s", "u", "c", "d", "_", "y", "S", "g", "v", "q", "w", "R", "T", "P", "E", "C", "O", "f", "b", "h", "p", "AbortController", "ReadableStream", "WritableStream", "TransformStream", "e", "WritableStream", "_a", "TransformStream", "v", "e", "a", "b", "getBigInt64", "getBigUint64", "setBigInt64", "setBigUint64", "getBigInt64", "setBigInt64", "getBigUint64", "setBigUint64", "NumberFieldType", "ReadableStream", "_a", "WritableStream", "_a", "WritableStream", "AdbCommand", "AdbAuthType", "AdbFeature", "AdbShellProtocolId", "AdbSyncRequestId", "AdbSyncResponseId", "LinuxFileType", "AdbSyncStatErrorCode", "AdbSyncSendV2Flags", "AdbPropKey", "e", "ReadableStream", "result", "_a", "e", "e"]
}
